<!doctype html><html><head><meta charset="utf-8"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109297390-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-109297390-1")</script><title>Articles | Riotz.works</title><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="Fun and joy engineering activities articles by members of Riotz.works."><meta property="og:type" content="website"><meta property="og:title" content="Articles | Riotz.works"><meta property="og:url" content="https://riotz.works/articles/page/8/index.html"><meta property="og:site_name" content="Articles | Riotz.works"><meta property="og:description" content="Fun and joy engineering activities articles by members of Riotz.works."><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://riotz.works/articles/assets/logo.png"><meta property="article:author" content="Riotz.works"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://riotz.works/articles/assets/logo.png"><meta name="twitter:creator" content="@riotz_works"><link rel="alternate" href="/articles/atom.xml" title="Articles | Riotz.works" type="application/atom+xml"><link rel="icon" href="/articles/assets/favicon.ico"><link href="//fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css?family=M+PLUS+Rounded+1c&display=swap&subset=japanese" rel="stylesheet"><link href="//unicons.iconscout.com/release/v1.0.0/css/unicons.css" rel="stylesheet"><link rel="stylesheet" href="/articles/css/style.css"><meta name="generator" content="Hexo 4.1.1"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/articles/" id="logo"><img src="/articles/assets/riotz.png"></a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a><a class="main-nav-link home" href="/">Home</a><a class="main-nav-link slide" href="/slides">Slides</a></nav><nav id="sub-nav"><a id="nav-github-link" class="nav-icon" href="https://github.com/riotz-works" target="_blank" rel="noopener" title="GitHub @riotz_works"></a><a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/riotz_works" target="_blank" rel="noopener" title="Twitter @riotz_works"></a><a id="nav-rss-link" class="nav-icon" href="/articles/atom.xml" title="RSSフィード"></a><a id="nav-search-btn" class="nav-icon" title="検索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"></button><input type="hidden" name="sitesearch" value="https://riotz.works/articles"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" class="article-date"><time datetime="2019-02-26T15:00:00.000Z" itemprop="datePublished">2019-02-27</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/">デブサミ 2019 にて「サーバーレス開発の楽しさ」について発表をしました</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/01.png" alt=""></p><p>2019年2月14日～15日に開催された Developers Summit 2019（通称：「デブサミ」）で、『サーバーレスで最高に楽しめるアプリ開発』と題してサーバーレスにまつわる発表をしました。発表内容のサマリーです。</p><p><strong>シリーズの記事</strong></p><ul><li><strong>デブサミ 2019 でサーバーレス開発の楽しさについて発表をしました</strong>（本記事）</li><li><a href="https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/">デブサミ 2019 Ask the Speaker で 頂いた QA まとめ</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/">発表者は、その日何をしていたのか - 発表の舞台裏 デブサミ 2019 編</a></li></ul><h2 id="デブサミ概要"><a href="#デブサミ概要" class="headerlink" title="デブサミ概要"></a>デブサミ概要</h2><p>発表したイベント<a href="https://event.shoeisha.jp/devsumi/" target="_blank" rel="noopener">デブサミ</a>ですが、技術書籍で定評のある翔泳社さんが開催している “技術者コミュニティとの連携から生まれた総合ITコンファレンス” です。</p><p>今回は<a href="https://event.shoeisha.jp/devsumi/20190214/" target="_blank" rel="noopener">Developers Summit 2019 冬</a>のイベントで、ホテル雅叙園東京で開催されました。よく結婚式などで使われ、建物内に滝と庭園があるすごい場所です。</p><p>そして各開催にはテーマが設定されます。今回は「SHARE YOUR FUN!」です。</p><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/02.png" alt=""></p><p>まさに「サーバーレス開発って楽しいよね」と思っていたところで、その楽しさを多くの人にお伝えしたい、そう考えていたところでの『サーバーレスで最高に楽しめるアプリ開発』の発表となりました。</p><p>タイトルが弾け気味なのは楽しさを伝えたいという思いをテーマに乗せました。<br>（他の登壇者さんのタイトルを見ると、もっと弾けてもよかったかな）</p><h2 id="発表資料と-Togetter"><a href="#発表資料と-Togetter" class="headerlink" title="発表資料と Togetter"></a>発表資料と Togetter</h2><div class="slide"><iframe src="https://riotz.works/slides/2019-devsumi"></iframe></div><p><a href="https://togetter.com/li/1319506" target="_blank" rel="noopener">デブサミ2019【15-B-6】サーバーレスで最高に楽しめるアプリ開発 #devsumiB - Togetter</a><br>たくさんのツイートありがとうございます！！</p><p><a href="https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/">デブサミ 2019 Ask the Speaker で 頂いた QA まとめ</a><br>Ask the Speaker 他、QA・ディスカスありがとうございます！！</p><h2 id="サマリー"><a href="#サマリー" class="headerlink" title="サマリー"></a>サマリー</h2><p>発表の主旨は「サーバーレス開発の楽しさ」です。</p><p>これまでさまざまな形態で開発をしてきました。オンプレミス、Amazon EC2、AWS Elastic Beanstalk、Docker…<br>それが AWS Lambda の登場によって開発体験が激変し、それと同時にさらなる開発の楽しさを体験できました。<br>もちろんプロジェクトが不調な時もあり、サーバーレスによる制約もあり、たくさんの困難は変わらず待ち構えていますが、それを踏まえても楽しさが勝ると感じています。</p><p>そんな体験や思いを多くの開発者さんにお伝えしたく「サーバーレス開発の楽しさ」にフォースし、大きく３つのテーマでお話ししました。</p><ol><li>アイデアを即、形にできる、楽しみ</li><li>アプリの開発に専念できる、楽しみ</li><li>ピタゴラ装置を組み立てる、楽しみ</li></ol><h3 id="アイデアを即、形にできる、楽しみ"><a href="#アイデアを即、形にできる、楽しみ" class="headerlink" title="アイデアを即、形にできる、楽しみ"></a>アイデアを即、形にできる、楽しみ</h3><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/10.png" alt=""><br>サーバーレスの環境にすることで、多くのことがクラウドに任せられます。<br>これはホントにすごいことで、たとえばウェブサーバーもアプリサーバーもデータベースもすべて構築済みでいきなり使い始めることができます。</p><p>つまりアイデアが浮かんだら、即コーディングを始めてしまってプロトタイピングできてしまうことです。そして思い切って世に出してしまうことができるということでもあります。</p><p>アイデアを形にしていくことは開発者にとって、とても楽しいことではないでしょうか。<br>また作ったアプリは、過度なアクセスが発生しない限り大した費用にならないことも多く（もちろん、作りにもよりますが）稼働させたままにできます。ポートフォリオとして作品を並べておくこともできます。</p><p>アプリの依存ライブラリこそ管理は必要ですが、インフラ部分のパッチあてやバージョンアップなどの運用はクラウドに任せられます。<br>このアプリの依存ライブラリの管理は<a href="https://dependabot.com/" target="_blank" rel="noopener">Dependabot</a>や<a href="https://renovatebot.com/" target="_blank" rel="noopener">Renovate</a>といったサービスを使うことができます。GitHub などのリポジトリと連携することで<code>package.json</code>や<code>pom.xml</code>といったプロジェクトのライブラリ管理のファイルを参照し、バージョンアップがあったらプルリクエストを上げてくれます。テストなどに自信がある場合は自動マージさせてしまうのも手です。</p><p>サーバーレスには、アイデアを即、形にする楽しさがある！<br>思いついたら、すぐに作って、どんどん公開して、楽しみましょう♪</p><p>※ 発表時に「<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>」のコスト 500円と話しましたが、さすがに今月は JAWS DAYS 2019 で<a href="https://riotz.works/slides/2019-jaws-days">AWS x JAMstack で 構築・運用する サーバーレス な Web Front| Slides | Riotz.works</a>もあったので 1,000円にかかりそうです。それでもコスパよいのではないでしょうか。</p><h3 id="アプリの開発に専念できる、楽しみ"><a href="#アプリの開発に専念できる、楽しみ" class="headerlink" title="アプリの開発に専念できる、楽しみ"></a>アプリの開発に専念できる、楽しみ</h3><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/20.png" alt=""><br>サーバーレス、FaaS の実行ランタイムにフォーカスして、サーバーレスはアプリ開発に集中できるという話になります。</p><p>実行ランタイムが構成済みで使うものを簡単に選択できます。そして、それらは周辺システムと統合されているので、ランタイムを選択するだけで使う始めることができ、他のことを考える必要がありませんし実行ランタイムの違いから周辺システムへの変化を気にすることもありません。</p><p>IoT バックエンドの開発プロジェクトの事例になりますが、Java の実行ランタイムを使ったサーバーレスで作っていたものを、本番投入１ヶ月前に Node.js/TypeScript へ切り替えるという事態がありました。</p><p>この時でさえ、Lambda の実行ランタイムを Java から Node.js へ切り替え、プログラムは再実装するものの周辺システムは変更ありませんでした。スケールや監視でさえ統合済みなので何も設定する必要はありません。<br>ホントにプログラムだけを実装しなおしただけになります。</p><p>もしインスタンスやコンテナーベースだとしたら、OS やミドルウェアからと、全部やり直しになります。そしてそれに対応できる人材はいたでしょうか。。。</p><p>ホントにプログラムだけに集中できました。<br>プロジェクトは危機的状況ですが、開発者としてコードだけに専念できるのは、とても楽しいことではないでしょうか。</p><p>サーバーレス環境は構成済み＆疎結合、手軽に切替えて使う楽しさがある！<br>必要時に最適なものへ切替え、それでも “コードに専念” を楽しみましょう♪</p><h3 id="ピタゴラ装置を組み立てる、楽しみ"><a href="#ピタゴラ装置を組み立てる、楽しみ" class="headerlink" title="ピタゴラ装置を組み立てる、楽しみ"></a>ピタゴラ装置を組み立てる、楽しみ</h3><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/30.png" alt=""><br>クラウドには多様な機能があり、クラウド自体もたくさんあり、サービス(SaaS)も含めると無数に機能があるといえます。<br>サーバレスで開発するときに、これらの機能を組み合わせて作っていきますが、あるいはピタゴラ装置を組み立てているとも言えます。（もうこの時点で楽しい、とも思えてしまいますが）</p><p>ここでの「機能を組み合わせる」は、Lambda などの処理ロジックの中で多数の機能を呼び出すのではなく、１つの Lambda が １つの機能を担い、次の機能へ処理を渡していくような流れを想定しています。</p><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/31.png" alt=""><br>これは、私たちがハッカソンで作った「<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>」というアプリの例ですが「通知」の機能が DynamoDB の後ろに来ています。</p><p>多くの場合「登録の Lambda」処理で一緒に通知を行うのではないでしょうか。<br>しかしながら、ここでは DynamoDB Streams という機能を使って、DynamoDB のレコードの変化を受けて処理を動かすようにしています。</p><p>これにより「登録の Lambda」は DynamoDB へ登録するだけの処理となり非常にシンプルになり<br>ます。</p><p>そして「通知の Lambda」も通知が必要かを判断して<a href="https://firebase.google.com/products/cloud-messaging/" target="_blank" rel="noopener">Firebase Cloud Messaging</a>を呼び出すだけのシンプル実装です。</p><p>また「TTL/削除の Lambda」は DynamoDB の TTL(Time To Live) の機能を使い、レコードの削除を自動的に行うようにしています。レコードが削除されると DynamoDB Streams が動きますので、そこから<a href="https://webrtc.ecl.ntt.com/" target="_blank" rel="noopener">SkyWay</a>の SFU ルーム削除を呼び出す Lambda 処理が行われます。</p><p>一見複雑なアーキテクチャになっているようでいて、１つ１つの処理はシンプルになっているので作りやすくメンテもしやすいのではないでしょうか。</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/40.png" alt=""><br>以上、発表の主旨とサマリーになります。</p><h2 id="エゴサ"><a href="#エゴサ" class="headerlink" title="エゴサ"></a>エゴサ</h2><p>まとめ、参加録、フィードバック、いろいろな記事ありがとうございます 😆🙏</p><p><a href="https://togetter.com/li/1319506" target="_blank" rel="noopener">デブサミ2019【15-B-6】サーバーレスで最高に楽しめるアプリ開発 #devsumiB - Togetter</a><br>たくさんのツイートありがとうございます！！</p><p><a href="https://hinastory.github.io/cats-cats-cats/2019/02/15/devsumi-2019-winter/" target="_blank" rel="noopener">Developers Summit 2019に参加した感想など - cats cats cats</a><br>ラップアプリのアーキテクチャを中心に所感交え書いてくださりました。ありがとうございます！！</p><p><a href="https://qiita.com/nori0__/items/710baf5096aac83a143b" target="_blank" rel="noopener">初心者がデブサミに参加した感想をまとめたらこうなる - Qiita</a><br>ピタゴラとコールドスタートにフォーカスを与え所感交えて書いてくださりました。<br>また<a href="https://dependabot.com/" target="_blank" rel="noopener">Dependabot</a>の補足も入れてくださり、ありがとうございます！！</p><p><a href="https://qiita.com/meowmeowcats/items/050eb057aa3fb79bcec2" target="_blank" rel="noopener">デブサミ2019メモリンク集～Share my fun～ - Qiita</a><br>感動を表現した形のまとめが<em>Fun!</em>。ありがとうございます！！</p><p><a href="https://onarimonstudio.hatenablog.com/entry/2019/02/15/183427" target="_blank" rel="noopener">Developers Summit 2019に参加してきました - 御成門プログラマーの日記</a><br>要点をまとめ、重要部分にフォーカスしてくださりました。ありがとうございます！！</p><p>できる限り探してまとめさせていただきました。<br>もし入ってなかったり、新たに投稿いただいたなどありましたら Twitter<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ DM やメンションいただけたら幸いです。</p><hr><p>デブサミで発表させていただくのははじめてで、とても良い経験をさせていただきました。<br>話始めるまでは緊張があったのですが、不思議なことに話始めると緊張は完全に抜けており、会場の皆さまの真摯な目にしっかり応えていきたい、自分の伝えられるものをすべてをお伝えしたいという気持ちが高まり話をすることができました。</p><p>これは会場の空気を作ってくださった聴講者の皆さま、安心して発表に臨めるよう支援してくださったスタッフ・運営の方々のおかげです。ありがとうございます。</p><p>AWS Lambda 登場以来、サーバーレスに特化しサーバーレスで開発し続けてきたなかで感じていた「サーバレス開発の楽しさ」については、お伝えすることができたのではないかと思っていますが、やはり『サーバーレスで最高に楽しめる』と銘打ったからにはもう少し弾けて話したほうが良かったかなと少し反省。</p><p>最後になりますが、セッションにご参加いただいた皆さま、万事支援してくださったスタッフの皆さま、そして貴重な機会を作っていただいた運営の皆さまに感謝です！ ありがとうございす！！</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E3%83%87%E3%83%96%E3%82%B5%E3%83%9F%202019%20%E3%81%AB%E3%81%A6%E3%80%8C%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9%E9%96%8B%E7%99%BA%E3%81%AE%E6%A5%BD%E3%81%97%E3%81%95%E3%80%8D%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%99%BA%E8%A1%A8%E3%82%92%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F&url=https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E3%83%87%E3%83%96%E3%82%B5%E3%83%9F%202019%20%E3%81%AB%E3%81%A6%E3%80%8C%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9%E9%96%8B%E7%99%BA%E3%81%AE%E6%A5%BD%E3%81%97%E3%81%95%E3%80%8D%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%99%BA%E8%A1%A8%E3%82%92%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" data-id="ckfm1lwy300bp24nx73b3gkmx" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Developers-Summit/" rel="tag">Developers Summit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" title="デブサミ 2019 Ask the Speaker にて頂いた QA まとめ" rel="bookmark">デブサミ 2019 Ask the Speaker にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2017/12/07/csv-batch-can-also-realized-with-serverless-impl-using-lambda/" title="CSV ファイルのバッチ連携も AWS Lambda でサーバーレス" rel="bookmark">CSV ファイルのバッチ連携も AWS Lambda でサーバーレス</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" title="API Gateway の WebSocket でチャットを実装 w/Serverless Framework" rel="bookmark">API Gateway の WebSocket でチャットを実装 w/Serverless Framework</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" title="TypeScript プロジェクト用サンドボックスで簡単コード検証" rel="bookmark">TypeScript プロジェクト用サンドボックスで簡単コード検証</a></h3></div></li></ul></div></footer></div></article><article id="post-summary-of-qa-at-jawsdays2019" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" class="article-date"><time datetime="2019-02-23T15:00:00.000Z" itemprop="datePublished">2019-02-24</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/">JAWS DAYS 2019 にて頂いた QA まとめ</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/01.png" alt=""></p><p>JAWS DAYS 2019 で『AWS x JAMstack で構築・運用するサーバーレスな Web Front』のお話をした後に頂きました QA をまとめます。</p><p>頂いた質問は要点のみを一般化して書いている部分がります。背景などが入っていないので若干わかりにくい部分がありますが、ご了承ください。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/">JAWS DAYS 2019 で AWS x JAMstack なサーバーレス Web Front について発表をしました</a></li><li><strong>JAWS DAYS 2019 で頂いた QA まとめ</strong>（本記事）</li><li><a href="https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/">発表者は、その日何をしていたのか - 発表の舞台裏 JAWS DAYS 2019 編</a></li></ul><h2 id="発表資料と-Togetter"><a href="#発表資料と-Togetter" class="headerlink" title="発表資料と Togetter"></a>発表資料と Togetter</h2><div class="slide"><iframe src="https://riotz.works/slides/2019-jaws-days"></iframe></div><p><a href="https://togetter.com/li/1322142" target="_blank" rel="noopener">2019/02/23(土) JAWS DAYS 2019 &lt;7> 15:10～ #jawsug #jawsdays - Togetter</a><br>たくさんのツイートありがとうございます！！</p><h2 id="1-DynamoDB-の-Attribute-を変えたい場合に、どうやっているのか？"><a href="#1-DynamoDB-の-Attribute-を変えたい場合に、どうやっているのか？" class="headerlink" title="1. DynamoDB の Attribute を変えたい場合に、どうやっているのか？"></a>1. DynamoDB の Attribute を変えたい場合に、どうやっているのか？</h2><p>発表の QA タイムで<a href="https://twitter.com/yoshidashingo" target="_blank" rel="noopener">@yoshidashingo</a>さんに、頂いた質問になります。<br><a href="https://aws.amazon.com/jp/developer/community/heroes/shingo-yoshida/" target="_blank" rel="noopener">AWS Serverless Hero</a>直々の質問に緊張し、質問の要点を上手く汲み取れず、しっかり回答を返せませんでした。すみません。QA 対応力を磨かねば。<br>（ところで振り返ると、これって「この分野はあんまり詳しくないんですが」事案ではないでしょうか💦）</p><p>この QA については、本記事投稿時追記の形で、QA を振り返り整理します。</p><p>質問の主旨としては、このセクションのタイトルにした通り「DynamoDB の Attribute を変えたい場合に、どうやっているのか？」の質問と改めて整理しました。</p><p>DynamoDB でテーブル作成後に変えられないものは下記になります。（他にもテーブル名や暗号化タイプなどありますが質問のスコープとして）</p><ul><li>主キーの構成と型 (パーティションキー、ソートキー)</li><li>Attribute の名前と型（ただし Attribute の追加はいつでも自由にできる）</li></ul><p>主キーはどうにもならないので、テーブルの作り直しになります。</p><p>Attribute の名前と型、こちらは変えたいとなるとどうにもなりませんが、Attribute は後から追加できるので新しく Attribute を足して、そちらを使う手も取れそうです。<br>しかし、既存データを新しい Attribute に移動するのか、またはプログラムでカバーするのかが出てきます。また混ざった状態が発生すると、後々困りそうです。</p><p>質問の前提となる事象がわかったら、もう少し踏み込めそうですがざっくりこんな感じの回答になります。</p><p>発表時に「あまり大きなものを作ってないので」と回答しましたが、マイクロサービスで作っているので、個々のシステムは小さく、また変化もあまりないので上手く想定できなかったのもあったかもしれません。<br>それでも Attribute はいつでも自由に足せるので、キレイではないものの逃げ方もあるような 🤔<br>「ディスカスしましょう」とおっしゃっていたので、このあたりの逃げ方含め議論したかったのかな。</p><p>※ Serverless Framework との質問でしたが、DynamoDB の定義は Serverless Framework の構成ファイル<code>serverless.yml</code>に書きます。しかし CloudFormation のパートになるので、Serverless Framework 固有より、CloudFormation での管理になることと、むしろ DynamoDB そのものの話になるかと思い Serverless Framework は外しました。</p><p>参考情報</p><ul><li><a href="https://aws.amazon.com/jp/dynamodb/" target="_blank" rel="noopener">Amazon DynamoDB（フルマネージド型 No SQL データベース） ｜AWS</a></li><li><a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/best-practices.html" target="_blank" rel="noopener">DynamoDB のベストプラクティス - Amazon DynamoDB</a></li></ul><h2 id="2-WordPress-の静的化に-JAMstack-は有効なの？"><a href="#2-WordPress-の静的化に-JAMstack-は有効なの？" class="headerlink" title="2. WordPress の静的化に JAMstack は有効なの？"></a>2. WordPress の静的化に JAMstack は有効なの？</h2><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/10.png" alt=""><br>何件か質問をいただきました。</p><p>WordPress へ投降者以外は直接アクセスできないようにしたり、投稿通知をするための仕組みを作ってあげる必要はありますが、WordPress を使った既存の運用は残したまま、まったく新しいサイトへ生まれ変わらせることができます。</p><p>それにより、セキュリティ問題やバージョンアップ対応の負担を減らすことはできますが、この場合でもセキュリティ問題は内部からの攻撃は避けられません。脅威はインターネット側だけにあるとは限らないこと注意が必要です。</p><p>そして静的化するのでパフォーマンスは、とてつもなく向上します。<br>まさに今日お話ししました、高パフォーマンス、セキュリティただし局所化、スケーリング、運用の軽減が手に入ります。</p><p>発表資料では<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>を使ったアーキテクチャ図になっていますが、まだまだ開発中なので<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">GatsbyJS</a>を使うのが現実的です。</p><p>またカスタム API を持たず、WordPress のコンテンツを新しいサイトとして配信するだけなら<a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify</a>に配置するのも手です。</p><p>GatsbyJS で WordPress 移行は、多くの情報があるので取り組みやすいです。<br>私も機会があったらブログとかを書きます。</p><h2 id="3-SSR-Server-Side-Rendering-との違いは何か？"><a href="#3-SSR-Server-Side-Rendering-との違いは何か？" class="headerlink" title="3. SSR(Server Side Rendering) との違いは何か？"></a>3. SSR(Server Side Rendering) との違いは何か？</h2><p>SSR はブラウザからのリクエストを受けて、サーバー側で HTML を生成してレスポンスする形になります。<br>これはリクエストを受けてから処理を行うので静的サイトを作る SSG(Static Site Generator) より、以下の点で不利です。</p><ul><li>パフォーマンス、これは HTML 生成処理がある、また DB アクセスすることもあるかもしれません</li><li>セキュリティ、仮に HTML だけを返すとしても AP サーバが存在するので攻撃対象になります</li><li>スケーラビリティ、AP サーバをスケールするのは大変です</li></ul><p>ただし、開発者フレンドリーは、JAMstack としては良いとしていますが、一概に言えないかもしれません。Web API から取得したデータを JavaScript で HTML を変化させるのは開発者によっては苦痛かもしれない。<br>私は<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>や<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>が気に入っていて、JavaScript で値を設定するのは、楽しいです。</p><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/11.png" alt=""><br>そして SEO の観点でお話ししました通り、SEO のためのヘッダー出力は HTML である必要があります。<br>自分がコンテンツの発信量をコントロールできている場合は SSG で問題ないのですが、リアルタイムで大量のコンテンツが変化していくものには SSR が必要となります。</p><p>SSG では CI などを使ってビルドを回す必要があります。これは遅い処理になります。リアルタイムでユーザーを待たせることができないくらい時間がかかり、また大量に受け付けることができないものになります。</p><p>この場面においては SSR が必要となります。<br>それ以外で SSR 必須、または SSR が良いシーンは今のところ浮かばないです。もっと考えてみます。</p><h2 id="4-SPA-Single-Page-Application-はどうなるのか？"><a href="#4-SPA-Single-Page-Application-はどうなるのか？" class="headerlink" title="4. SPA(Single Page Application) はどうなるのか？"></a>4. SPA(Single Page Application) はどうなるのか？</h2><p>これは、SSG が生成した HTML の形式になるので、ツールによります。</p><p>ブログツールの<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>は SSG で MPA(Multiple Page Application) です。</p><p>私たちが作ったラップ・バトルは<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>で SSG ＆ SPA で動かしています。<br><a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>は SSR もできるので、設定で指定します。</p><p>ツールの考え方とかもあるので一概に何とも言えないところがあります。<br>ただし高パフォーマンスの観点で考えると、ページの先読みやキャッシュなどが重要になっきます。そして、これらも SSG がどのような機能を持っているかによります。</p><p>その点で、私たちは<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>が気に入っています。<br>まだ開発中なので、普通に使うには<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">GatsbyJS</a>が良いかもしれません。<br>また、アプリ開発用途でしたら、<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>をオススメします。</p><h2 id="5-JAMstack-でも-Lambda-や-DynamoDB-は必須なのか？"><a href="#5-JAMstack-でも-Lambda-や-DynamoDB-は必須なのか？" class="headerlink" title="5. JAMstack でも Lambda や DynamoDB は必須なのか？"></a>5. JAMstack でも Lambda や DynamoDB は必須なのか？</h2><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/12.png" alt=""><br>“俺の満漢全席” を想定されての質問と考えます。<br>こちらは JAMstack で作ったアプリ全体像としてのアーキテクチャ図になります。</p><p>JAMstack の要件はざっくり言うと「HTML を事前ビルドして CDN に置くこと」なので、Lambda や DynamoDB は JAMstack とは関係ないものになります。</p><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/13.png" alt=""><br>JAMstack の要件だけの図としては “満漢ミニ席” または “WordPress リプレース席” をイメージしていただけるとよいです。<br>“満漢ミニ席” では、ブログなどの情報発信サイトをイメージしていて、記事を Markdown などのファイルに書き、それを HTML として出力、CDN へ配置する形になっています。<br>ここには Lambda や DynamoDB は登場しません。純粋にウェブサイトだけになります。</p><h2 id="6-“俺の満漢全席”-で-Lambda-DynamoDB-は-EC2-RDS-にしてもよいか？"><a href="#6-“俺の満漢全席”-で-Lambda-DynamoDB-は-EC2-RDS-にしてもよいか？" class="headerlink" title="6. “俺の満漢全席” で Lambda/DynamoDB は EC2/RDS にしてもよいか？"></a>6. “俺の満漢全席” で Lambda/DynamoDB は EC2/RDS にしてもよいか？</h2><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/12.png" alt=""><br>Lambda/DynamoDB を EC2/RDS へ変えても構いません。JAMstack の要件としては「再利用可能な API」なので、Web API 提供できれば大丈夫です。</p><p>ですが、せっかくなのでサーバーレスで作ってほしいです。</p><p>JAMstack は SSG を使うことで、HTML の生成を事前に行います。<br>そして CDN に配置するだけで運用するので、言わばフロントエンドのサーバーレスともいえるでしょう。</p><p>Web API をサーバーレスで作ってきても、フロントエンドで SSR するからインスタンスが欲しいとなって、全体でサーバーレスになれなかったケースなどもあり、フロントエンドのサーバーレス化も重要だと思ったことがあります。</p><p>CDN に配置するだけのことをサーバーレスと言うのは、ちょっと苦しいですが、全体をサーバーレスで作りたい撮った時に「JAMstack で、フロントもサーバーレスで」って言いたいのもあります。</p><p>最後のまとめ「名前が付き、認識されることで、伝わる」はまさにそんな思いからになります。<br>むしろ「JAMstack で、フロントもサーバーレスで」って書いたほうが良かったですね。</p><hr><p>質問いただき、ありがとうございました。</p><p>QA や議論ができ、とても楽しかったです。そしてお話しいただくことで気付きを得たり、考えの整理にもつながり、とても勉強になりました。</p><p>できる限り思い出して書きましたが、もし入ってなかったり、別途気になることなどがありましたら Twitter<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ DM やメンションいただけたら幸いです。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=JAWS%20DAYS%202019%20%E3%81%AB%E3%81%A6%E9%A0%82%E3%81%84%E3%81%9F%20QA%20%E3%81%BE%E3%81%A8%E3%82%81&url=https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=JAWS%20DAYS%202019%20%E3%81%AB%E3%81%A6%E9%A0%82%E3%81%84%E3%81%9F%20QA%20%E3%81%BE%E3%81%A8%E3%82%81" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" data-id="ckfm1lwrm003024nx88xehlyq" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Gridsome/" rel="tag">Gridsome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAWS-DAYS/" rel="tag">JAWS DAYS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Serverless-Framework/" rel="tag">Serverless Framework</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/" title="JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました" rel="bookmark">JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" title="API Gateway の WebSocket でチャットを実装 w/Serverless Framework" rel="bookmark">API Gateway の WebSocket でチャットを実装 w/Serverless Framework</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/01/made-presentation-about-jamstack-with-gridsome-at-javascript-matsuri/" title="初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました" rel="bookmark">初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/06/think-of-shifters-headlesscms-nize-on-shiftup-vol3/" title="Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる" rel="bookmark">Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる</a></h3></div></li></ul></div></footer></div></article><article id="post-backstage-of-presentation-at-jawsdays2019" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" class="article-date"><time datetime="2019-02-22T15:00:00.000Z" itemprop="datePublished">2019-02-23</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/">発表者は、その日何をしていたのか - 発表の舞台裏 JAWS DAYS 2019 編</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/01.png" alt=""></p><hr><p>新しい朝が来た希望の朝だ、<strong>発表</strong>の朝だ！</p><p>JAWS DAYS での発表の朝を迎えて、発表者 lulzneko は絶望していた。<br>なんと発表資料が完成していないのです 😱</p><hr><p>2019年2月23日に開催された JAWS DAYS 2019 で『AWS x JAMstack で構築・運用するサーバーレスな Web Front』と題して JAMstack にまつわる発表をしました。その発表の舞台裏ということで、発表者が当日何をしていたのかを綴ります。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/">JAWS DAYS 2019 で AWS x JAMstack なサーバーレス Web Front について発表をしました</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/">JAWS DAYS 2019 で頂いた QA まとめ</a></li><li><strong>発表者は、その日何をしていたのか - 発表の舞台裏 JAWS DAYS 2019 編</strong>（本記事）</li></ul><h2 id="JAWS-DAYS-概要"><a href="#JAWS-DAYS-概要" class="headerlink" title="JAWS DAYS 概要"></a>JAWS DAYS 概要</h2><p>発表したイベント<a href="https://jawsdays2019.jaws-ug.jp/" target="_blank" rel="noopener">JAWS DAYS 2019</a>ですが、AWS のユーザーコミュニティ<a href="https://jaws-ug.jp/" target="_blank" rel="noopener">JAWS-UG</a>主催、後援 アマゾン ウェブ サービス ジャパン株式会社さん で 行われる JAWS-UG 最大のイベントです。</p><p>場所は TOC五反田メッセで、さまざまなイベントや展示会などが開催される場所です。</p><h2 id="会場入り"><a href="#会場入り" class="headerlink" title="会場入り"></a>会場入り</h2><p>ストーリーとスライドの配置は完成していて、そこに載せる図<a href="https://riotz.works/slides/2019-jaws-days#18">AWS における JAMstack の配置</a>の章で使うものが間に合ってなかったレベルなのですが、慌てて PowerPoint を操作する朝から始まりました。<br>なんか、前回の<a href="https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/">デブサミ舞台裏</a>でも同じことを書いた気がします。</p><p>なお、前日の 22日には発表用資料をうっかり消し飛ばす事故を起こしました。<br>慌てるとよくないことがあるので、急ぎつつも作業ミスをしないのが大事です。</p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">何を血迷ったのか、明日の発表資料をうっかり消し飛ばす💦<br>git の reflog に しっかり残ってた、あぶねー ＆ Git 最高！</p>— lulzneko (@lulzneko)<a href="https://twitter.com/lulzneko/status/1098850301816188929?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月22日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>急いでスライドを完成させ、所用を済ませと、あわただしく過ごして午後一の会場入りをしました。<br>資料の都合というより所用があって午前入りできなかったのですが、午前中のセッションも聴きたかった。</p><p>会場である TOC五反田メッセは、本館とは別の建物になります。<br>“TOC” だけで考えていると、うっかり本館へ行ってしまい、結構な回り道を歩くことになります。<br>そうです、うっかり本館へ行ってしまいました。微妙な場所からの移動だったのでタクシーさんに乗せてもらったのですが “メッセ” が伝わってなかったようで、がっつり本館へ。あまり東京の道に慣れてないとのことでしたので、結構な周り道を徒歩で堪能させていただきました。<br><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/02.png" alt=""></p><h2 id="受付"><a href="#受付" class="headerlink" title="受付"></a>受付</h2><p>無事会場入りできたので次は受付です。</p><p>イベント開催用の建物なので、入ってすぐに受付になります。<br>手前に参加者の受付があり、少し進んだところに発表者の受付があります。<br>クロークもあるので、モコモコのジャケットを預けられたのが嬉しいです。</p><p>受付で Doorkeeper のチェックインをします。QR コードを表示して読み取ってもらいます。<br>続いて自分の名前が書かれてるスピーカーパスをもらい、印刷したアイコンの切り紙を差し込みます。（写真では名前部分が隠れてますが、当日はアイコン画像を端において名前は見えるようにしています）<br><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/03.jpg" alt=""></p><p>受付が終わると、発表時間までフリーなのでセッションを楽しんだり、控室で作業したりできます。<br><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/04.jpg" alt=""></p><h2 id="発表-10分前"><a href="#発表-10分前" class="headerlink" title="発表 10分前"></a>発表 10分前</h2><p>前の発表が終わり、落ち着いたところで演台へ近づき発表準備に入ります。</p><p>進行の方から名前等の最終確認を受けます。</p><p>そして、電源の確認。<br>今回はちゃんと持っていきました！（持って帰るのを忘れました💦）</p><p>発表者サポートは、進行の方が残り時間をボードで教えてくれます。<br>10分、5分、3分。しっかり出してくれるので助かります。</p><p>マイクはワイヤードで、演台にセットされています。持っているほうが安定するので、外して持つようにしました。<br>会場は各セッションごとの個室ではなく、会場の後ろ側が空いている＆壁が天井までつながっていない仕様のため、マイクの音が小さめでレシーバーで聞くようになっています。会場の後ろのほうで聞いていると音があまりしないので、話すときにどんな感じか心配しましたが話している分には側のスピーカーから聞こえるので違和感はなかったです。<br><img src="/articles/assets/lulzneko/presentation/jawsdays-2019/05.jpg" alt=""></p><p>プロジェクターが大きく、普段は投影画像を直接指さすタイプなのですが、さすがに届かない感じです。そろそろマイ・レーザーポインターを用意したほうが良いと思いつつ、準備完了。</p><p>発表用スライドの URL をツイート。</p><blockquote class="twitter-tweet" data-cards="hidden" data-lang="ja"><p lang="ja" dir="ltr">この後の JAWS DAYS 2019　Aトラック　15:10～<br>『[Serverless 前半] AWS x JAMstack で構築・運用するサーバーレスなWeb Front』の 資料はこちらになります。<a href="https://t.co/LLflOVhGSk" target="_blank" rel="noopener">https://t.co/LLflOVhGSk</a><a href="https://twitter.com/hashtag/jawsug?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsug</a><a href="https://twitter.com/hashtag/jawsdays?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsdays</a><a href="https://twitter.com/hashtag/jd2019_a?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jd2019_a</a></p>— lulzneko (@lulzneko)<a href="https://twitter.com/lulzneko/status/1099187884748300288?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月23日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="発表"><a href="#発表" class="headerlink" title="発表"></a>発表</h2><p>いざ、発表！<br>ご清聴ありがとうございました！！</p><div class="slide"><iframe src="https://riotz.works/slides/2019-jaws-days"></iframe></div><p>たくさんのツイートありがとうございます！！<br><a href="https://togetter.com/li/1322142" target="_blank" rel="noopener">2019/02/23(土) JAWS DAYS 2019 &lt;7> 15:10～ #jawsug #jawsdays - Togetter</a></p><p><a href="https://twitter.com/kondoyuko" target="_blank" rel="noopener">@kondoyuko</a>さんに、グラレコを作っていただきました。ありがとうございます！</p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">[Serverless] AWS x JAMstack で構築・運用するサーバーレスなWeb Front のメモです<a href="https://twitter.com/hashtag/jd2019_a?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jd2019_a</a><a href="https://twitter.com/hashtag/jawsdays?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsdays</a><a href="https://t.co/WbrGcQ062l" target="_blank" rel="noopener">pic.twitter.com/WbrGcQ062l</a></p>— 近藤佑子🐱技術書典6 か66 (@kondoyuko)<a href="https://twitter.com/kondoyuko/status/1099195738116870144?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月23日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>※ QA は後ほどまとめます。</p><h2 id="懇親会まで、徘徊"><a href="#懇親会まで、徘徊" class="headerlink" title="懇親会まで、徘徊"></a>懇親会まで、徘徊</h2><p>Ask the Speaker はないので終了。<br>発表用スライドの URL を再度ツイート。</p><blockquote class="twitter-tweet" data-cards="hidden" data-lang="ja"><p lang="ja" dir="ltr">JAWS DAYS 2019 Aトラック 15:10<br>『[Serverless 前半] AWS x JAMstack で構築・運用するサーバーレスなWeb Front』ご清聴ありがとうございました。<br>資料はこちらになります。質問やフィードバックありましたら気軽にお声がけやDMいただけたらと。<a href="https://t.co/LLflOVhGSk" target="_blank" rel="noopener">https://t.co/LLflOVhGSk</a><a href="https://twitter.com/hashtag/jawsug?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsug</a><a href="https://twitter.com/hashtag/jawsdays?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsdays</a><a href="https://twitter.com/hashtag/jd2019_a?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jd2019_a</a></p>— lulzneko (@lulzneko)<a href="https://twitter.com/lulzneko/status/1099197322246770688?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月23日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>エゴサして、Like、RT、Follow－…</p><p>回れてなかった出展ブースを巡り、スタンプラリー<br>すべて回ったはずなのに、スタンプが１つ足りず。。。どこが足りないのかはわからない仕様なので諦める＆配布終了に間に合わず。残念。<br>（次の日になったらアプリで表示できなくなったのでキャプチャできず）</p><h2 id="懇親会"><a href="#懇親会" class="headerlink" title="懇親会"></a>懇親会</h2><p>すごい人数でした。🍻 楽しかったです！</p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">過去最大の出席者となった JAWS DAYS 2019 が終了しました！<br><br>2010年にJAWS-UGが誕生して今日で9周年、そして明日からは10周年に向かっての第一歩✨<br><br>皆さま、次は全国の勉強会でお会いしましょう！😊<a href="https://twitter.com/hashtag/jawsug?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsug</a><a href="https://twitter.com/hashtag/jawsdays?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#jawsdays</a><a href="https://t.co/OydnxsiB3H" target="_blank" rel="noopener">pic.twitter.com/OydnxsiB3H</a></p>— AWS / アマゾンウェブサービス (@awscloud_jp)<a href="https://twitter.com/awscloud_jp/status/1099259719447863296?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月23日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><hr><p>以上、発表者の一日でした。<br>なんとか無事発表を終えることができました。</p><p>次回は、2019年3月9日(土)『<a href="https://cto-samurai.connpass.com/event/120473/" target="_blank" rel="noopener">【CTOって本当にかけるの！？】ベンチャー６社のCTOチームと競う新規サービス立ち上げハッカソン</a>』でハックしに行きます。<br>2/25日現在、まだまだ枠がある(8/30人)ようなので、よかったら一緒にハッカソンしましょう。</p><p>また、ちょっと来て話をしてよ、といったようなことなどありましたら、Twitter DM/メンションを<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ気軽にいただければ幸いです。<br>これまでの発表歴は、こちら [Slides | Riotz.works]<a href="https://riotz.works/slides">https://riotz.works/slides</a>になります。</p><hr><p>聴きに来てくださり、ありがとうございました。<br>スタッフの皆さま、支援ありがとうございました。</p><p>そして、ポエム的なものをここまで読んでくださり、ありがとうございます。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E7%99%BA%E8%A1%A8%E8%80%85%E3%81%AF%E3%80%81%E3%81%9D%E3%81%AE%E6%97%A5%E4%BD%95%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B%20-%20%E7%99%BA%E8%A1%A8%E3%81%AE%E8%88%9E%E5%8F%B0%E8%A3%8F%20JAWS%20DAYS%202019%20%E7%B7%A8&url=https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E7%99%BA%E8%A1%A8%E8%80%85%E3%81%AF%E3%80%81%E3%81%9D%E3%81%AE%E6%97%A5%E4%BD%95%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B%20-%20%E7%99%BA%E8%A1%A8%E3%81%AE%E8%88%9E%E5%8F%B0%E8%A3%8F%20JAWS%20DAYS%202019%20%E7%B7%A8" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/02/23/backstage-of-presentation-at-jawsdays2019/" data-id="ckfm1lwrn003224nx3zex9y1d" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAWS-DAYS/" rel="tag">JAWS DAYS</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/" title="JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました" rel="bookmark">JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li></ul></div></footer></div></article><article id="post-summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" class="article-date"><time datetime="2019-02-17T15:00:00.000Z" itemprop="datePublished">2019-02-18</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/">デブサミ 2019 Ask the Speaker にて頂いた QA まとめ</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/01.png" alt=""></p><p>Developers Summit 2019 で『サーバーレスで最高に楽しめるアプリ開発』のお話をした後の Ask the Speaker で頂きました QA をまとめます。</p><p>頂いた質問は要点のみを一般化して書いています。背景などが入っていないので若干わかりにくい部分がありますが、ご了承ください。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter">デブサミ 2019 で サーバーレス開発の楽しさについて発表をしました</a></li><li><strong>デブサミ 2019 Ask the Speaker で頂いた QA まとめ</strong>（本記事）</li><li><a href="https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/">発表者は、その日何をしていたのか - 発表の舞台裏 デブサミ 2019 編</a></li></ul><h2 id="発表資料と-Togetter"><a href="#発表資料と-Togetter" class="headerlink" title="発表資料と Togetter"></a>発表資料と Togetter</h2><div class="slide"><iframe src="https://riotz.works/slides/2019-devsumi"></iframe></div><p><a href="https://togetter.com/li/1319506" target="_blank" rel="noopener">デブサミ2019【15-B-6】サーバーレスで最高に楽しめるアプリ開発 #devsumiB - Togetter</a><br>たくさんのツイートありがとうございます！！</p><h2 id="1-ピタゴラ装置式で障害が発生したら、どのように追跡するか？"><a href="#1-ピタゴラ装置式で障害が発生したら、どのように追跡するか？" class="headerlink" title="1. ピタゴラ装置式で障害が発生したら、どのように追跡するか？"></a>1. ピタゴラ装置式で障害が発生したら、どのように追跡するか？</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/32.png" alt=""><br>たとえば IoT プラットフォームの例では、AWS Lambda を細かく分けていますし、いくつかのサブシステムや AWS アカウントをまたがって処理を行っていたりします。</p><p>また入力ソースがバッチとウェブがあり、途中から同じ処理フローになっていきます。</p><p>障害が発生すると、結局のところログを洗っていくしかないのは変わらずで。分散されているので地道に追いかけています。</p><p>開発メンバーのひとりが、トレースID をヘッダーにつけてリレーする方式を導入を進めてくれているため、導入されている範囲は比較的探しやすいです。</p><p>その方法は以下となります。</p><ul><li>リクエストを最初に受けた場所は、次のリクエストを投げるときに<code>TRACE_ID</code>というヘッダーに UUID をつけて送る (※<code>TRACE_ID</code>は本記事用の仮名)</li><li>中間の処理でも<code>TRACE_ID</code>がなかったら、そこから<code>TRACE_ID</code>をつけ始める</li><li><code>TRACE_ID</code>を受け取った場合は、その値をリレーして使っていく（新たに発行しない）</li></ul><p>マイクロサービスのトレーシング用ライブラリや基盤もあります。いまちょっと名前が思い出せないです。すみません。まだ、しっかり調査できてないので導入できてないです。</p><p>※ 本記事投稿時追記<br>マイクロサービスのトレーシングは<a href="https://zipkin.io/" target="_blank" rel="noopener">Zipkin</a>という分散トレーシングシステムを思い出して話していました。名前がすぐに出てこないとは💦<br>同様のプロダクトやサービスがあり、今後調べていきたいと考えています。</p><h2 id="2-ラップ・アプリのモバイル通知が-Amazon-SNS-でないのは？"><a href="#2-ラップ・アプリのモバイル通知が-Amazon-SNS-でないのは？" class="headerlink" title="2. ラップ・アプリのモバイル通知が Amazon SNS でないのは？"></a>2. ラップ・アプリのモバイル通知が Amazon SNS でないのは？</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/13.png" alt=""><br>ラップ・アプリは Web API を AWS に構築しています。<br>AWS を使っているので Amazon SNS(Simple Notification Service) を使ってモバイル通知をすれば、ワンストップになるので良いのではないかとも考えられます。</p><p>これについては、ざっくり行ってしまうと「普段から使っていたから」が一番大きい理由になります。</p><p>これは、ハッカソンという時間が限られた場で開発をするので、使い慣れているものを使うのが一番ということになります。</p><p>では、なぜ普段使いだったのか（普段 AWS なのだから、SNS が普段使いでもよいはずで）</p><p>モバイル通知を必要としたころの調べで、FCM(Firebase Cloud Messaging) のほうが手軽に扱えて、サポートするモバイルデバイスが広かったので FCM を使い、その後も使い続けているといった理由になります。</p><p>今なら Amazon SNS でも変わらないのかな。いずれ調べてみたます。</p><h2 id="3-IoT-プラットフォームでファイル分割処理場をしてる理由は？"><a href="#3-IoT-プラットフォームでファイル分割処理場をしてる理由は？" class="headerlink" title="3. IoT プラットフォームでファイル分割処理場をしてる理由は？"></a>3. IoT プラットフォームでファイル分割処理場をしてる理由は？</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/32.png" alt=""><br>開発当時 AWS Lambda が 5分しか稼働できなかったため、ファイルを分割しながら DynamoDB へ投入しているとタイムアウトしてしまったためになります。</p><p>そのためいかに高速に処理を行えるようにするかを考え「ファイル分割だけ」をすることが高速化につながったので、ファイル分割を入れています。</p><p>高速化のために AWS Lambda のローカルストレージを使ったりとさまざまな工夫が入っています。</p><p>2019年2月現在は 15分まで稼働できるので、このシステムではファイル分割をしなくても処理しきれるかもしれません。</p><h2 id="4-IoT-プラットフォームの-DymemoDB-はコスト高ではないか？"><a href="#4-IoT-プラットフォームの-DymemoDB-はコスト高ではないか？" class="headerlink" title="4. IoT プラットフォームの DymemoDB はコスト高ではないか？"></a>4. IoT プラットフォームの DymemoDB はコスト高ではないか？</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/32.png" alt=""><br>たしかに DynamoDB を ３つ使っていて、データの内容物としてはおぼ同じものになり、ムダになっているように見えます。</p><p>まず DynamoDB のストレージ料金は、高額ではありません。<br>データの複製を大量に持ったとしても、ストレージについては気にしなくてもよいかもしれません。</p><p>ストレージ料金に対して Read/Write のキャパシティが高額です。<br>このシステムはバッチ処理で一時的に大量データを読み書きする必要があるため、とくに１つめの DynamoDB のキャパシティは高く設定しています。</p><p>それでも何百ドルとまでは行っていないはずなので、１つの DynamoDB にして処理ロジックを複雑にさせるより、複数配置するほうを選んでいます。</p><p>※ 本記事投稿時追記<br>2019年2月東京リージョンのストレージ単価は<code>0.285 USD/GB</code><br>10GB のデータベースで約３ドル、超大規模デモない限りロジックの簡易さを求めてもよいのではないでしょうか。</p><p>Read/Write キャパシティについては、オンデマンドキャパシティモードも出たので、状況に応じて変わってきます。</p><p>Amazon DynamoDB 料金<br><a href="https://aws.amazon.com/jp/dynamodb/pricing/" target="_blank" rel="noopener">https://aws.amazon.com/jp/dynamodb/pricing/</a></p><p>AWS Simple Monthly Calculator (簡易見積ツール)<br><a href="https://calculator.s3.amazonaws.com/index.html?lng=ja_JP" target="_blank" rel="noopener">https://calculator.s3.amazonaws.com/index.html?lng=ja_JP</a></p><h2 id="5-Amazon-SNS-で処理を分岐するメリットと活用方法について"><a href="#5-Amazon-SNS-で処理を分岐するメリットと活用方法について" class="headerlink" title="5. Amazon SNS で処理を分岐するメリットと活用方法について"></a>5. Amazon SNS で処理を分岐するメリットと活用方法について</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/32.png" alt=""><br>IoT プラットフォームの例では、Amazon SNS で本処理と Redshift へデータを渡すのを分けています。</p><p>スライドの図では処理の流れを示したかったので矢印が Amazon SNS → DynamoDB の用になっていますが、実際の流れとしては Amazon SNS へ Subscribe しているので矢印が逆になります。</p><p>処理を分岐しているというより、データの公開場所を用意したので、欲しい人は見に来てくださいという形になります。</p><p>この形のメリットはデータを欲しくなった人が増えた時に、Amazon SNS の Subscribe を追加するだけで追加でき、ロジックを変更しなくてよいものになります。</p><h2 id="6-Amazon-SNS-でウェブの処理を分岐できますか？"><a href="#6-Amazon-SNS-でウェブの処理を分岐できますか？" class="headerlink" title="6. Amazon SNS でウェブの処理を分岐できますか？"></a>6. Amazon SNS でウェブの処理を分岐できますか？</h2><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/32.png" alt=""><br>Amazon SNS の Subscribe で動作するのは非同期処理になります。</p><p>ウェブのリクエストが Amazon SNS の先の処理結果を必要とせず、何かしらのデータを Amazon SNS に公開して、ウェブのレスポンスを返せる場合は、処理分岐として利用可能です。</p><p>プログラミングの if文のような条件分岐としては利用できません。<br>Amazon SNS はデータの公開場所を作っておき、そこにデータを置く人、データをもらう人、それぞれがそれぞれのタイミングで動作するイメージになります。</p><hr><p>Ask the Speaker へ来てくださり、ありがとうございました。</p><p>QA や議論ができ、とても楽しかったです。そしてお話しいただくことで気付きを得たり、考えの整理にもつながり、とても勉強になりました。</p><p>できる限り思い出して書きましたが、もし入ってなかったり、別途気になることなどがありましたら Twitter<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ DM やメンションいただけたら幸いです。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E3%83%87%E3%83%96%E3%82%B5%E3%83%9F%202019%20Ask%20the%20Speaker%20%E3%81%AB%E3%81%A6%E9%A0%82%E3%81%84%E3%81%9F%20QA%20%E3%81%BE%E3%81%A8%E3%82%81&url=https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E3%83%87%E3%83%96%E3%82%B5%E3%83%9F%202019%20Ask%20the%20Speaker%20%E3%81%AB%E3%81%A6%E9%A0%82%E3%81%84%E3%81%9F%20QA%20%E3%81%BE%E3%81%A8%E3%82%81" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" data-id="ckfm1lwxx00bh24nxcww13kea" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Developers-Summit/" rel="tag">Developers Summit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" title="デブサミ 2019 にて「サーバーレス開発の楽しさ」について発表をしました" rel="bookmark">デブサミ 2019 にて「サーバーレス開発の楽しさ」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2017/12/07/csv-batch-can-also-realized-with-serverless-impl-using-lambda/" title="CSV ファイルのバッチ連携も AWS Lambda でサーバーレス" rel="bookmark">CSV ファイルのバッチ連携も AWS Lambda でサーバーレス</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" title="API Gateway の WebSocket でチャットを実装 w/Serverless Framework" rel="bookmark">API Gateway の WebSocket でチャットを実装 w/Serverless Framework</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" title="TypeScript プロジェクト用サンドボックスで簡単コード検証" rel="bookmark">TypeScript プロジェクト用サンドボックスで簡単コード検証</a></h3></div></li></ul></div></footer></div></article><article id="post-backstage-of-presentation-at-devsumi-2019-winter" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" class="article-date"><time datetime="2019-02-14T15:00:00.000Z" itemprop="datePublished">2019-02-15</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/">発表者は、その日何をしていたのか - 発表の舞台裏 DevSumi 2019 編</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/presentation/devsumi-2019/01.png" alt=""></p><hr><p>新しい朝が来た希望の朝だ、<strong>発表</strong>の朝だ！</p><p>デブサミでの発表の朝を迎えて、発表者 lulzneko は絶望していた。<br>なんと発表資料が完成していないのです 😱</p><hr><p>2019年2月14日～15日に開催された Developers Summit 2019（通称：「デブサミ」）で、『サーバーレスで最高に楽しめるアプリ開発』と題してサーバーレスにまつわる発表をしました。その発表の舞台裏ということで、発表者が当日何をしていたのかを綴ります。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter">デブサミ 2019 で サーバーレス開発の楽しさについて発表をしました</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/">デブサミ 2019 Ask the Speaker で 頂いた QA まとめ</a></li><li><strong>発表者は、その日何をしていたのか - 発表の舞台裏 DevSumi 2019 編</strong>（本記事）</li></ul><h2 id="デブサミ概要"><a href="#デブサミ概要" class="headerlink" title="デブサミ概要"></a>デブサミ概要</h2><p>発表したイベント<a href="https://event.shoeisha.jp/devsumi/" target="_blank" rel="noopener">デブサミ</a>ですが、技術書籍で定評のある翔泳社さんが開催している “技術者コミュニティとの連携から生まれた総合ITコンファレンス” です。</p><p>今回は<a href="https://event.shoeisha.jp/devsumi/20190214/" target="_blank" rel="noopener">Developers Summit 2019 冬</a>のイベントで、ホテル雅叙園東京で開催されました。よく結婚式などで使われ、建物内に滝と庭園があるすごい場所です。</p><h2 id="会場入り"><a href="#会場入り" class="headerlink" title="会場入り"></a>会場入り</h2><p>ストーリーとスライドの配置は完成していて、そこに載せる図<a href="https://riotz.works/slides/2019-devsumi#25">ピタゴラ装置を組み立てる 楽しみ</a>の章で使うものが間に合ってなかったというレベルなのですが、慌てて PowerPoint を操作する朝から始まりました。</p><p>lulzneko は遅筆で資料の一部が、間に合ってないことが結構あったりします。<br>今回はデブサミの次週に JAWS DAYS での発表もあるため、早めに着手したのですがギリってしまった。<br>あまり本質的でないところとかでも、気になってしまったり、こだわったりしてしまうのが原因なのですが。。。<br>スライドや文章、図が早く作れる方はうらやましいです。</p><p>急いでスライドを完成させ、所用を済ませと、あわただしく過ごして午後一の会場入りをしました。<br>なおデブサミの運営さんからは、”講演開始50分前までにご到着ください。” とのことですが、やはりセッションを見たいので早く到着するに越したことはないですね。<br>（資料の都合というより所用があって午前入りできなかったのですが、午前中のセッションも聴きたかった）</p><p>会場である雅叙園は実はエントランスとは別の裏道があります。<br>目黒駅を出て雅叙園に向かう、あのヤバい坂に差し掛かる手前で左に曲がります。住宅地のような感じもある道ですが、気にせず進むと右にアマゾンジャパンさんのオフィスへ行く道が出てきます。<br>実はこれが裏道で、アマゾンジャパンさんのオフィスへ入り、すぐに右へ行くとなが～いエスカレーターが出てきます。これを降りると、エントランスから入って左手に見えてる庭園へ出ることができます。<br>あのヤバい坂は急で長距離なだけでなく、車もバシバシ通るので裏道(こっちも車は結構通るのですが)を使いたいところ、もちろん使わせてもらいました。（目黒駅に帰る場合はエスカレーターで登れるので、裏道のが断然いいですね）</p><h2 id="受付"><a href="#受付" class="headerlink" title="受付"></a>受付</h2><p>無事会場入りできたので次は受付です。</p><p>雅叙園は結婚式などでも使われる素敵な場所で、エントランスを入ってすぐに素晴らしい庭園とお洒落なレストラン街があります。<br><img src="/articles/assets/lulzneko/presentation/devsumi-2019/05.jpg" alt=""></p><p>はじめて来ると、IT イベントはやってなさそうな雰囲気に焦りますが、気にせず奥まで進むと、デブサミの看板のあるエスカレーターが出てくるのでビビらずに進むのが大事です。</p><p>エスカレーターを上がり２階へ着くと受付がありますが、発表者は３階まであがり、発表者受付に進みます。<br>こちらも “3F控室前の受付へお越しください。” とメールの案内にあります。</p><p>受付で、自分の名前を発表時間、lulzneko の場合ですと「15-B-6 サーバーレスで最高に楽しめるアプリ開発」といった感じで伝え、名刺１枚を渡します。</p><p>スピーカーパスをもらって、自分の名前を書きます。<br>せっかくなのですが名前を書いても、ぱっと見でわからないので印刷したアイコンの切り紙を持っていて、それも差し込んでいます。</p><p>受付が終わると、”講演開始30分前” までには控室にいるようにとの説明を受けます。</p><p>あとは時間までフリーなのでセッションを楽しんだり、控室で作業したりできます。<br>セッションは事前登録なしでもスピーカーパスで入ることができます。</p><p>ただし lulzneko は、リハーサルに参加してなかったので、流れの確認と接続チェックがあるので、まずは控室入りとなりました。</p><p>※ 発表者受付では入場者バッグは配布されていませんでしたが、２階の受付でスピーカーパスを見せたらもらえました♪</p><h2 id="控室-＆-流れの確認"><a href="#控室-＆-流れの確認" class="headerlink" title="控室 ＆ 流れの確認"></a>控室 ＆ 流れの確認</h2><p>セッション用に使っているのと同じ規模の部屋になります。</p><p>長机に椅子、電源、コーヒー、お茶、スナック、お弁当が用意されています。<br>電源が豊富に用意されているのがありがたいです（ACアダプター忘れましたが）。発表前に少し手直ししたり、作業したりすることがあり、電源がないとバッテリーの心配が出たりするので重要です。</p><p>スタッフの方より名前を呼ばれ、流れの確認に入ります。<br>スピーカー事前確認フォームで入力した内容を元に、会社名や名前、タイトルを確認します。進行の方が始まりに名前を呼んでくださるためですね。</p><p>続いて機材の確認で PC だけ、音声や映像の再生は不要、スマホを使うが接続の必要なしなどを確認し、ディスプレイへの接続チェックをします。<br>VAIO は HDMI、VGA どちらもいけるほか、接続問題もほぼなく助かってます。一度だけ HDMI はつながらなかったことがあったのですが、ケーブルが長すぎたと思われます。</p><p>続いて、バックアップの確認になります。<br>こちらも事前フォームで PDF を提出したものの確認になります。”必ず2/12（火）までにバックアップデーターを提供する。” こと案内があったのですが、当日の午前中に提出でした 🙇</p><p>PDF を提出はしているのですが、実は発表資料はウェブアプリでできています。（ラップのアプリを埋め込みで動かしたのは、この仕掛けだったりします）</p><p>発表用のバックアップとしては、ウェブアプリが必要なので Google Chrome でプレゼン URL へアクセスしてもらいました。<br>その際に URL をうまくお伝えできずに、テキストファイルを作って USB メモリーへコピーしたのですが、スタッフさんより「USB メモリー を PC へ接続して大丈夫ですか？」との確認があり、きちんとされてるなぁと。</p><p>そして電源の確認。<br>忘れてしまったことを素直に白状し、使わないようにしてバッテリーが大丈夫なこと説明しました。<br>スタッフさんを、とても悲しい表情にさせてしまいました。すみません 🙏</p><h2 id="発表者の移動動線"><a href="#発表者の移動動線" class="headerlink" title="発表者の移動動線"></a>発表者の移動動線</h2><p>最後に、発表時の流れの説明を受けます。<br>受付時に以下のようなカードをもらっており、こちらの説明です。<br><img src="/articles/assets/lulzneko/presentation/devsumi-2019/03.jpg" alt=""></p><p>雅叙園は結婚式などでも使われており、そのための裏動線が用意されているとのことです。すごい！</p><p>控室は図の「C会場 Ask the Speaker」の上の部屋になります。<br>その部屋のエスカレーター側入り口とは別の裏口から出て、エレベーターへ回ります。<br>そして２階に行き、各会場へ入るという流れになります。</p><p>確かにデブサミ級のイベントになると、参加人数も多いですし、入り口で事前登録のチェックなどをしているので、発表者が入り口から入ってくると都合が悪そうです。</p><p>このような観点からも会場選びとかされているのでしょうね。ザ・プリンス パークタワー東京 が IT系イベントで使われているのも、もしかしたら？</p><p>なお Ask the Speaker の受ける場合は、発表終了後に退出される参加者さんへ突して所定位置へ移動するとの説明を受けます。スタッフさんから「私がお客様を掻き分けて進むので、しっかり付いてきてください」とのことです。</p><p>まぁ、確かにメイン動線へ戻るためのルートはなさそうですし、早く Ask 席へ移動すること、またスタッフさんを次の発表者につけるためにも突るしかないのでしょう。</p><p>以上、説明を受けてフリーです。<br>コーヒーを堪能して心を落ち着け、セッションとブースへ！</p><h2 id="発表-30分前"><a href="#発表-30分前" class="headerlink" title="発表 30分前"></a>発表 30分前</h2><p>控室に待機し、発表準備に入ります。<br>スタッフさんから名前を呼ばれ、先ほど説明を受けた裏動線で移動開始です。</p><p>「B会場なので厨房を通ります。気を付けてください。」<br>「みなさま、ここを通る時は楽しそうにしてます。やっぱり珍しいんですかね。」<br>「昨日は厨房でケーキを見ていたら食べたくなって買いました。１階で売って、とてもおいしいですよ。」<br>「こちらで少々お待ちください。」</p><p>と、適切なナビを受けて会場裏に到着です。</p><p>倉庫のような場所の丸椅子で少々待機。30分前に移動してるとはいえ、20分の休憩があるので直前の発表の、ほぼ終了時点で待機場所到着です。</p><p>自分の資料を見直す時間もなく莫大な拍手が聞こえ「入ります。どうぞ！」の案内。</p><p>正面のすぐ横から入ってセッティング。<br>進行の方から名前等の最終確認を受け、発表用の「雅叙園ウォーター(秩父源流水)」をもらいます。<br><img src="/articles/assets/lulzneko/presentation/devsumi-2019/04.jpg" alt=""></p><p>そして、電源の確認。<br>また進行のスタッフさんを、とても悲しい表情にさせてしまいました。すみません 🙏</p><p>発表者ツールとしては、まず演台の下に正面投影用と同じ内容を表示するディスプレイがあります。<br>こちらへ事前に映しておき、切り替えたらすぐに表示されるようになっています。すごい。<br>（デモのときに QRコードをスマホで撮るためにしゃがんだのが、このディスプレイです）</p><p>客席正面の真ん中に大きなカウントダウン時計があります。演台の手元にもカウントダウン時計があります。<br>正面のは、とても大きく見やすくて助かりました。（手元のはなぜか動いてなかった）</p><p>マイクはワイヤレスで、ハンドマイクとピンマイクがあります。<br>持っているほうが安定するので、ハンドを選びました。</p><p>レーザーポインターもあります。<br>普段は投影画像を直接指さすのですが、さすがに届かないのでお借りしました。</p><p>発表用スライドの URL をツイート。</p><blockquote class="twitter-tweet" data-cards="hidden" data-lang="ja"><p lang="ja" dir="ltr">このあとの<a href="https://twitter.com/hashtag/devsumi?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#devsumi</a><a href="https://twitter.com/hashtag/devsumiB?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#devsumiB</a>【15-B-6】15:15 ～ の<br>「サーバーレスで最高に楽しめるアプリ開発」の スライドはこちらになります。<a href="https://t.co/UBni0lZamF" target="_blank" rel="noopener">https://t.co/UBni0lZamF</a></p>— lulzneko (@lulzneko)<a href="https://twitter.com/lulzneko/status/1096291110027124737?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月15日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="発表"><a href="#発表" class="headerlink" title="発表"></a>発表</h2><p>いざ、発表！<br>ご清聴ありがとうございました！！</p><div class="slide"><iframe src="https://riotz.works/slides/2019-devsumi"></iframe></div><p>たくさんのツイートありがとうございます！！<br><a href="https://togetter.com/li/1319506" target="_blank" rel="noopener">デブサミ2019【15-B-6】サーバーレスで最高に楽しめるアプリ開発 #devsumiB - Togetter</a></p><h2 id="Ask-the-Speaker"><a href="#Ask-the-Speaker" class="headerlink" title="Ask the Speaker"></a>Ask the Speaker</h2><p>お片づけをして、Ask 席へ向かって突ります。<br>スマホの片づけとかあったので、お待たせしてしまいました。すみません。</p><p>10名ぐらいの方に来ていただきました。ありがとうございます！！<br>いただきました質問はできる限り思い出してメモりましたので、別途まとめを書きます。</p><p>[2019.2.23 追記] こちら『<a href="https://riotz.works/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/">デブサミ 2019 Ask the Speaker で 頂いた QA まとめ</a>』にかきました。</p><p>何か気になることなどQAや、またフィードバックなどありましたら、Twitter<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ DM をいただければと。オープンになっているので、とくにデブサミに限らず気軽にいただければと。</p><h2 id="おわり"><a href="#おわり" class="headerlink" title="おわり"></a>おわり</h2><p>発表用スライドの URL を再度ツイート。</p><p>これまでは発表前だけだったのですが、ある<a href="https://twitter.com/yoshitaku_jp/status/1083203625822806016" target="_blank" rel="noopener">Twitter の 投票</a>で、発表後にスライドを共有してほしいというのが１番だったので再度ツイートするようにしました。遅くなってしまったので、お片づけ時にツイートすべきでした。反省。<br>（発表前は２番だけど、発表時に手元へあるといいこともあるので）</p><blockquote class="twitter-tweet" data-cards="hidden" data-lang="ja"><p lang="ja" dir="ltr">devsumi devsumiB 【15-B-6】「サーバーレスで最高に楽しめるアプリ開発」発表終了。<br>ご清聴ありがとうございました。Ask も 来ていただき、ありがとうございます。<br>先ほどの資料はこちらになります。気になる点などのQAやフィードバックなどありましたらお気軽にDMください。<a href="https://t.co/UBni0lZamF" target="_blank" rel="noopener">https://t.co/UBni0lZamF</a></p>— lulzneko (@lulzneko)<a href="https://twitter.com/lulzneko/status/1096309561730859008?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年2月15日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>エゴサして、Like、RT、Follow－、バッテリー切れ…</p><hr><p>以上、発表者の一日でした。</p><p>色々しでかし気味なヤバい一日でしたが、無事発表を終えることができました。</p><p>いろいろなイベントで話をする機会をいただいておりますが、スタッフさんとの濃密なやり取りや、裏動線を使った移動などははじめてで、これはぜひ伝えたいなと思い書いた次第です。</p><p>文才があったら発表者目線な読み物にしたかったのですが、ムリかったので淡々と描く形になりました。<br>発表者サイドではありますが、舞台裏がどうなっていたのか少しでも伝わりましたら幸いです。</p><p>次回は、2019年2月23日(土) 15:10～<a href="https://jawsdays2019.jaws-ug.jp/" target="_blank" rel="noopener">JAWS DAYS 2019</a>で『<a href="https://jawsdays2019.jaws-ug.jp/session/1120/" target="_blank" rel="noopener">AWS x JAMstack で構築・運用するサーバーレスなWeb Front</a>』のお話をします。 もしよろしければ、お越しください。</p><p>また、ちょっと来て話をしてよ、といったようなことなどありましたら、Twitter DM を<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>へ気軽にいただければ幸いです。<br>これまでの発表歴はこちら [[Slides | Riotz.works]<a href="https://riotz.works/slides]">https://riotz.works/slides]</a>(<a href="https://riotz.works/slides/">https://riotz.works/slides/</a>になります。</p><hr><p>聴きに来てくださり、ありがとうございました。<br>スタッフの皆さま、支援ありがとうございました。</p><p>そして、ここまで読んでくださり、ありがとうございます。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E7%99%BA%E8%A1%A8%E8%80%85%E3%81%AF%E3%80%81%E3%81%9D%E3%81%AE%E6%97%A5%E4%BD%95%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B%20-%20%E7%99%BA%E8%A1%A8%E3%81%AE%E8%88%9E%E5%8F%B0%E8%A3%8F%20DevSumi%202019%20%E7%B7%A8&url=https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E7%99%BA%E8%A1%A8%E8%80%85%E3%81%AF%E3%80%81%E3%81%9D%E3%81%AE%E6%97%A5%E4%BD%95%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B%20-%20%E7%99%BA%E8%A1%A8%E3%81%AE%E8%88%9E%E5%8F%B0%E8%A3%8F%20DevSumi%202019%20%E7%B7%A8" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/02/15/backstage-of-presentation-at-devsumi-2019-winter/" data-id="ckfm1lwxz00bl24nx0b6p3lzj" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Developers-Summit/" rel="tag">Developers Summit</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/27/made-presentation-about-enjoyment-of-serverless-at-devsumi-2019-winter/" title="デブサミ 2019 にて「サーバーレス開発の楽しさ」について発表をしました" rel="bookmark">デブサミ 2019 にて「サーバーレス開発の楽しさ」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/18/summary-of-qa-at-ask-the-speaker-of-devsumi-2019-winter/" title="デブサミ 2019 Ask the Speaker にて頂いた QA まとめ" rel="bookmark">デブサミ 2019 Ask the Speaker にて頂いた QA まとめ</a></h3></div></li></ul></div></footer></div></article><article id="post-how-jamstack-is-used-in-riotsworks" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" class="article-date"><time datetime="2019-01-28T15:00:00.000Z" itemprop="datePublished">2019-01-29</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/">Riots.works での JAMstack の利用</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/serverless/jamstack.jpg" alt=""></p><p>最近注目を集め始めている “JAMstack”、より良いパフォーマンス、より高いセキュリティ、より安価で簡単なスケーリング、より良質な開発者エクスペリエンスを提供するアーキテクチャ。</p><p>Riotz.works でも注目しており、実際に活用しています。今回は、この JAMstack を Riotz.works でどのように使っているかをご紹介します。</p><h2 id="Riotz-works-公式ウェブサイト"><a href="#Riotz-works-公式ウェブサイト" class="headerlink" title="Riotz.works 公式ウェブサイト"></a>Riotz.works 公式ウェブサイト</h2><p>公式ウェブサイトのトップページ<a href="https://riotz.works/">https://riotz.works</a>、Works ページ、Engineers ページが<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>で JAMstack なサイト作りをしています。</p><p><a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>は 2019年1月現在バージョン 0.4.5 で速いペースで開発が行われておりますが、必要な機能が未実装だったり、実行環境によってはさまざまな準備や設定が必要だったりします。<br><a href="https://www.staticgen.com/" target="_blank" rel="noopener">StaticGen</a>では 30位あたりになります。</p><p>数あるサイト・ジェネレーターから<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>を選んだのは、まずは Node.js で作られていること念頭に置きました。<br>これは Riotz.works では Node.js、主に TypeScript で開発を行っているため、スキルセットや開発環境を合わせたかったのがあります。</p><p>続いて<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>ベースであることを選びました。<br>こちらも開発が<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>ベースで行っているので合わせたかったものになります。</p><p>そうすると、比較的メジャーと思われる<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">GatsbyJS</a>や<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>などが落ちてしまいます。<br><a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">GatsbyJS</a>は非常に興味深いのですが、いつかは使ってみたいと思っていますが、今回は<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>ベースとしました。</p><p>選択肢としては<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>、<a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener">VuePress</a>、<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>、VueWebsite になります。</p><p><a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>はアプリ作成で使っていますが、ウェブサイトやブログ構築よりアプリ向けに感じます。<br>そうなると<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>公式である<a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener">VuePress</a>が最有力になりそうです。</p><p>もうひとつの<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>も調べたところ、<a href="https://gridsome.org/blog/2018/10/10/say-hello-to-gridsome" target="_blank" rel="noopener">“highly inspired by Gatsby.js”</a>とあり、また<a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a>ベースであることが、まさに私たちの考えと一致するものでした。</p><p>そしてデータソースを GraphQL で扱えるところが魅力的です。<br>入力ソースは基本的に Markdown を使いたいと考えていますが、エンジニアによっては CMS を使いたいケースもあるでしょう。このような複数のソースを GraphQL で扱えるのが助かります。</p><p><img src="/articles/assets/lulzneko/serverless/jamstack/10.png" alt=""></p><p>このような経緯から Riotz.works 公式ウェブサイトは<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>で構築することにしました。</p><p>ただし、これまでの開発経緯から Articles と Slides は<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>とは異なる技術を使っています。<br>リンクを踏むとヘッダーが異なるのはこのためです。<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>へ意向を考えてはいますが、なかなか着手できてない状況です。。</p><h2 id="Riotz-works-Articles-ページ"><a href="#Riotz-works-Articles-ページ" class="headerlink" title="Riotz.works Articles ページ"></a>Riotz.works Articles ページ</h2><p><a href="https://riotz.works/articles/">Articles</a>ページは、<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>で作られた JAMstack なサイトです。</p><p>この Articles こそ<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>が活用できる場所ではあるのですが、<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>が登場する以前に<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>で作ったものになり、いずれは<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>へ移行したいと考えてはいますが、<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsom</a>はまだ初期開発中で Category や Tags などのページを自前で作る必要があり、作りこみができてないです。（いずれ公式でサポートされるとは思うので待ちたいのもあり。。）</p><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>は<a href="https://www.staticgen.com/" target="_blank" rel="noopener">StaticGen</a>でもトップ５に入る人気のサイト・ジェネレーターです。</p><p>記事は Markdown で書けるので、エンジニア・フレンドリーといえるのではないでしょうか。<br>一方で表現力は落ちてしまう点がありますが、最後は HTML を直接書いて埋め込めるので、どうしても Markdown で表現しきれない部分は HTML でカバーできます。（あまりやりたくないので奥の手という感じですが）</p><p>ブログサイトをとても手軽に作ることができ、テーマも多数用意されているので好みのデザインにすることも簡単ですし、各種 Plugin もあるので簡単に拡張することもできます。</p><p>日本語の情報も多いので、比較的簡単にやりたいことや、困りごとを解決できます。</p><p>JAMstack なブログサイトをつくり始めるには、よい入口と言えるでしょう。</p><h2 id="Riotz-works-Slides-ページ"><a href="#Riotz-works-Slides-ページ" class="headerlink" title="Riotz.works Slides ページ"></a>Riotz.works Slides ページ</h2><p>[Slides](<a href="https://riotz.works/slides/">https://riotz.works/slides/</a>ページは、静的サイトではありますが完全に手組の HTML で、”構築済みの HTML” とはなっておらず、アクセスを受けてから JavaScript で HTML を構築しているので JAMstack なサイトではありません。</p><p>こちらは、Markdown ファイルをソースとしたプレゼンスライドを作れる<a href="https://remarkjs.com/" target="_blank" rel="noopener">remark.js</a>を使っています。</p><p>仕組みとしては事前に用意された Markdown ファイルを、スライド形式の HTML に変換して表示なので、JAMstack とは相性が良く、JAMstack なスライドシステムがあったら使いたいと考えています。</p><p>Markdown からスライドを作るライブラリとしては<a href="https://revealjs.com/" target="_blank" rel="noopener">reveal.js</a>と<a href="https://remarkjs.com/" target="_blank" rel="noopener">remark.js</a>ぐらいで、どちらも事前構築の HTML には対応しておらず、現時点では現状のままか、時間を作って自前開発をしたいところです。</p><p>JAMstack なスライドシステムがあったら使いたいと考えていますが、現時点ではなさそうなので、しばらくは現状のままでしょう。</p><p>スライドシステムについては時間を作って自前開発にチャレンジしたいとも思っています。<br>ソースは Markdown で書きたいのがありますし、カジュアルな勉強会ではリアルタイムなフィードバック機能を動かしてみたいなど、いろいろとやってみたいことがあります。</p><h2 id="ラップ、タップ、アップ-🎶"><a href="#ラップ、タップ、アップ-🎶" class="headerlink" title="ラップ、タップ、アップ 🎶"></a>ラップ、タップ、アップ 🎶</h2><p>最後にハッカソンで作った<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>ですが、こちらも JAMstack なアプリです。</p><p>技術としては<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>を使っていて SPA で静的サイトとして生成、ホスティングしています。（SSR、サーバサイドレンダリングにすると JAMstack ではなくなります）<br>これにより基本的な画面は “構築済みの HTML” となり、CDN に配置した際のメリットを出せます。</p><p>ラップ対戦のルーム作成はクライアントサイドのJavaScript から Web API を呼出しています。<br>また動画の中継と配信も JavaScript のライブラリからサービスを呼び出しています。</p><p>ハッカソンの 24時間という限られた時間の中で、フロントエンドとサーバサイドを分離し HTML をツールを使って生成する JAMstack のアーキテクチャがまさに活かせた瞬間といえるのではないでしょうか。</p><p>サーバサイドの機能が Web API 形式で提供されているため、ロジックの変更や UI の変更といったものが相互に依存せず最小限の修正で組み込みできました。</p><hr><p>JAMstack は公式ウェブサイトのような完全な静的サイトのほか、ブログやアナウンスなどのニュースといった緩やかな更新が発生するサイト、そしてアプリといったさまざまなサイトが実現でき、Riotz.works の中でも多様な使い方をしています。</p><p>とくに<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>のような、サイト・ジェネレーターで静的ホスティングなサイトを作っていて、Web API を呼び出しているようなケースは意外とあったりするのではないでしょうか。</p><p>実は JAMstack なサイトを作っていたけど、JAMstack のキーワードが知られてなく、そんな名前がついていたんだというケースがいろいろありそうです。（実は<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>作成時点では JAMstack の言葉は知らなかったです）</p><p>ただ、これだけ JAMstack な サイトと書いてきましたが 実はホスティングが GitHub Pages で、JAMstack ベスト プラクティスの CDN に 乗ってなかったりも。。</p><p>これまでの経緯から GitHub Pages を使ってて、またカスタムドメインを使っているほか、４サイト（リポジトリ）がのっかっているので一斉に引っ越しする必要があり、作業時間を作るのに苦慮しているためです。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Riots.works%20%E3%81%A7%E3%81%AE%20JAMstack%20%E3%81%AE%E5%88%A9%E7%94%A8&url=https://riotz.works/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Riots.works%20%E3%81%A7%E3%81%AE%20JAMstack%20%E3%81%AE%E5%88%A9%E7%94%A8" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/01/29/how-jamstack-is-used-in-riotsworks/" data-id="ckfm1lww6009n24nxd2d0c7ip" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Gridsome/" rel="tag">Gridsome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/01/made-presentation-about-jamstack-with-gridsome-at-javascript-matsuri/" title="初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました" rel="bookmark">初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/06/think-of-shifters-headlesscms-nize-on-shiftup-vol3/" title="Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる" rel="bookmark">Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/05/made-presentation-about-jamstack-at-shiftup-vol3/" title="Shiftup! JP_Getshifter Vol3！ にて「JAMstack なサーバーレス・ウェブフロント」について発表をしました" rel="bookmark">Shiftup! JP_Getshifter Vol3！ にて「JAMstack なサーバーレス・ウェブフロント」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/" title="JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました" rel="bookmark">JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました</a></h3></div></li></ul></div></footer></div></article><article id="post-JAMstack-an-architecture-to-realize-fine-web-front" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" class="article-date"><time datetime="2019-01-22T15:00:00.000Z" itemprop="datePublished">2019-01-23</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/">JAMstack、それはハイパフォーマンスなウェブフロントを実現するアーキテクチャ</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/serverless/JAMstack.jpg" alt=""></p><p>“JAMstack” と呼ばれる新しいウェブの開発手法で「より良いパフォーマンス」「より高いセキュリティ」「より安価で簡単なスケーリング」「より良質な開発者エクスペリエンス」を提供するアーキテクチャが注目を集め始めています。</p><p>JAMstack とは何か、どのように使い、どのようなメリットがあるのか、公式サイトの情報をもとに読み解きます。</p><h2 id="JAMstack-の定義"><a href="#JAMstack-の定義" class="headerlink" title="JAMstack の定義"></a>JAMstack の定義</h2><p><img src="/articles/assets/lulzneko/serverless/JAMstack/01.png" alt=""><br>オフィシャル・サイト<a href="https://JAMstack.org" target="_blank" rel="noopener">https://JAMstack.org</a>によると、以下の要素に基づく最新のウェブ開発アーキテクチャとされています。</p><ul><li>クライアントサイドのJavaScript</li><li>再利用可能なWeb API</li><li>構築済みの Markup (HTML)</li></ul><p>HTML に JavaScript そして Web API なので、ウェブフロントの開発をする場合によく使うであろう技術と言えるでしょう。</p><p>ここでは動的な要素をサーバーサイドで組み込んだ HTML などをレスポンスするのではなく、クライアントサイドのJavaScript から Web API を通じて取得/更新し、クライアントサイドでダイナミックに描画する方式、いわゆる REST API などを使ったウェブフロントの作り方を指しています。</p><p>そして Markup (HTML) の部分がポイントなのですが<strong>“prebuilt at deploy time”</strong>、デプロイ時に事前ビルドされているとしています。そして多くの場合、サイト・ジェネレーターなどを使って作ります。（ツールの紹介は<a href="#サイト・ジェネレーター">後述</a>）</p><p><img src="/articles/assets/lulzneko/serverless/JAMstack/02.png" alt=""><br><a href="https://speakerdeck.com/biilmann/the-jam-stack" target="_blank" rel="noopener">The JAM Stack</a>の<a href="https://speakerdeck.com/biilmann/the-jam-stack?slide=44" target="_blank" rel="noopener">44ページ目</a>のスライドにある、この図が JAMstack のアーキテクチャをシンプルに表現しています。<br>Git に Push されたコードから、ビルドツール(サイト・ジェネレーターなど)が動作し、Web API などのデータと組み合わせて、構築済みの HTML を生成、CDN へ配置して配信します。</p><h2 id="なぜ-JAMstack-なのか"><a href="#なぜ-JAMstack-なのか" class="headerlink" title="なぜ JAMstack なのか"></a>なぜ JAMstack なのか</h2><p>なぜ JAMstack、とくに構築済みの HTML をデプロイするのか。</p><p>公式サイトでは、大きく４つ「より良いパフォーマンス」「より高いセキュリティ」「より安価で簡単なスケーリング」「より良質な開発者エクスペリエンス」のメリットを上げています。</p><h3 id="より良いパフォーマンス"><a href="#より良いパフォーマンス" class="headerlink" title="より良いパフォーマンス"></a>より良いパフォーマンス</h3><p>最初のページを高速に表示するためには、HTML を事前に構築しておき CDN で配信することが最適です。<br>構築済みでない場合、高速に配信できる CDN を介することができず、また HTML を生成するための処理を待つことにもなります。</p><h3 id="より高いセキュリティ"><a href="#より高いセキュリティ" class="headerlink" title="より高いセキュリティ"></a>より高いセキュリティ</h3><p>サーバーサイドの処理をマイクロサービスとして API に抽象化されているため攻撃の対象となる部分を小さくできます。<br>また、事前に構築済みの HTML をデプロイしているため、HTML を処理するためのプロセスはオフラインにできることもメリットといえるでしょう。</p><h3 id="より安価で簡単なスケーリング"><a href="#より安価で簡単なスケーリング" class="headerlink" title="より安価で簡単なスケーリング"></a>より安価で簡単なスケーリング</h3><p>デプロイするものは構築済みの HTML となるため CDN に配置することができ、スケーリングすることが容易になります。<br>CDN が安価かは悩ましい部分はありますが「Web サーバ」と「AP サーバ」をスケールさせるために用意することを考えると、CDN だけでよいので簡単とはいえるでしょう。</p><h3 id="より良質な開発者エクスペリエンス"><a href="#より良質な開発者エクスペリエンス" class="headerlink" title="より良質な開発者エクスペリエンス"></a>より良質な開発者エクスペリエンス</h3><p>疎結合にすることで、よりターゲットを絞った開発とデバッグを可能とします。<br>構成を簡素化できることは開発者の精神衛生上よいといえるでしょう。</p><p>このようにロジックを Web API として分離し、フロントエンドを構築済みの HTML としておくことで、多くのメリットを享受できます。</p><h2 id="ベストプラクティス"><a href="#ベストプラクティス" class="headerlink" title="ベストプラクティス"></a>ベストプラクティス</h2><p>JAMstack なプロジェクトを構築する際に、いくつかのベストプラクティスを活用することでスタックのメリットを最大限に発揮できます。</p><h3 id="CDN-に全部配置されている"><a href="#CDN-に全部配置されている" class="headerlink" title="CDN に全部配置されている"></a>CDN に全部配置されている</h3><p>JAMstack なプロジェクトは、サーバサイドのコードに依存しないため、単一のサーバではなく分散して配置できます。<br>CDN から直接サービス提供することでスピードとパフォーマンスを発揮できます。アプリがネットワークにエッジまで配置されることで、より良いユーザー体験になります。</p><h3 id="すべてが-Git-に存在する"><a href="#すべてが-Git-に存在する" class="headerlink" title="すべてが Git に存在する"></a>すべてが Git に存在する</h3><p>JAMstack なプロジェクトは、誰もが<code>git clone</code>でき、必要な依存関係を<code>npm install</code>などのような標準的な手順でインストールし、プロジェクトをローカルで実行する準備ができているはずです。複製するデータベースも、複雑なインストールもありません。<br>これによってコントリビューターの負担を減らし、ステージングとテストのワークフローも簡略化されます。</p><h3 id="モダンなビルドツール"><a href="#モダンなビルドツール" class="headerlink" title="モダンなビルドツール"></a>モダンなビルドツール</h3><p>モダンなビルドツールの世界によるアドバンテージを受けましょう。<br>それは動きの速い世界でジャングル(無法地帯)を志向するかのようですが、未来のブラウザを待たずに最新のウェブ標準を使うことができるようになります。<br>それは現時点では Babel、PostCSS、webpack、そしてその仲間です。</p><h3 id="自動ビルド"><a href="#自動ビルド" class="headerlink" title="自動ビルド"></a>自動ビルド</h3><p>JAMstack のマークアップ(HTML) は、事前ビルドされているため、コンテンツの変更はビルドを実行するまで反映されません。このプロセスを自動化するとフラストレーションを軽減できます。<br>これを webhook で行うことも、自動的にパブリッシュするプラットフォームなどを使うこともできます。</p><h3 id="アトミックなデプロイ"><a href="#アトミックなデプロイ" class="headerlink" title="アトミックなデプロイ"></a>アトミックなデプロイ</h3><p>JAMstack なプロジェクトが非常に大きくなるにつれて、新しい変更のために数百ものファイルを再デプロイする必要があるかもしれません。 これらのファイルを一度にアップロードすると、プロセスの完了までの間に不整合を生じる可能性があります。 これを避けるに、すべてのファイルがアップロードされるまで変更が行われない「アトミックデプロイ」を実行できるシステムを使用します。</p><h3 id="キャッシュの即時無効化"><a href="#キャッシュの即時無効化" class="headerlink" title="キャッシュの即時無効化"></a>キャッシュの即時無効化</h3><p>ビルドからデプロイへのサイクルが定期的に行われるようになったら、デプロイの実行が反映されるようにします。CDN は側にキャッシュを消去できます。</p><h2 id="サイト・ジェネレーター"><a href="#サイト・ジェネレーター" class="headerlink" title="サイト・ジェネレーター"></a>サイト・ジェネレーター</h2><p>JAMstack のメリットはわかったとして、それでサイトを作るには「構築済みの HTML」が必要となってきます。<br>この構築済みの HTML は手組みの HTML を用意することではなくて、サイト・ジェネレーターを使うとされています。</p><p>主なサイト・ジェネレーターは、こちら<a href="https://www.staticgen.com/" target="_blank" rel="noopener">StaticGen</a>に列挙されています。<br><img src="/articles/assets/lulzneko/serverless/JAMstack/03.png" alt=""></p><p>有名どころとしては GitHub Pages でも使われている<a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a>などがあり、<a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>や<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>といったブログ構築用の静的ジェネレーターや<a href="https://nextjs.org/" target="_blank" rel="noopener">Next</a>,<a href="https://nuxtjs.org/" target="_blank" rel="noopener">Nuxt</a>といった<a href="https://reactjs.org/" target="_blank" rel="noopener">React</a>や<a href="https://jp.vuejs.org/" target="_blank" rel="noopener">Vue.js</a>のアプリ・フレームワークなどもあります。</p><p>JAMstack のコンテキストでは<a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener">Gatsby</a>、<a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener">VuePress</a>、<a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a>などを目にすることが多いようにも感じます。</p><h2 id="ヘッドレス-CMS"><a href="#ヘッドレス-CMS" class="headerlink" title="ヘッドレス CMS"></a>ヘッドレス CMS</h2><p>これはとくに JAMstack の要件ではないのですが、JAMstack なブログや情報発信サイトを作る際に使われるものです。</p><p>WordPress などの CMS はコンテンツを配信するための部分が含まれ、そのままホスティングすると JAMstack なサイトにはならないので、別の仕組みが必要となりますが、WordPress などのように優れたコンテンツを管理するための仕組みが欲しくなります。<br>そうしたニーズに応えるのが、このヘッドレス CMS です。最低限の UI でコンテンツを管理することができ、作成したコンテンツを API 経由などで提供し、上記サイト・ジェネレーターなどと組み合わせてサイトを作ります。</p><p>主なヘッドレス CMS は、こちら<a href="https://headlesscms.org/" target="_blank" rel="noopener">headlesCMS</a>に列挙されています。<br><img src="/articles/assets/lulzneko/serverless/JAMstack/04.png" alt=""></p><p>前半に Open source なヘッドレス CMS が並び、後半に Closed source があります。<br>またサービスとして提供されているものは、こちらの Closed source に含まれます。たとえば最近よく目にする<a href="https://www.contentful.com/" target="_blank" rel="noopener">Contentful</a>は Closed source になります。</p><p>サイト・ジェネレーターによっては、WordPress の REST API からコンテンツをとってきたり、ローカルの Markdown ファイルを使うこともできるので、サイト・ジェネレーターの機能と管理方法に合わせて選択します。</p><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><ul><li><a href="https://JAMstack.org/" target="_blank" rel="noopener">JAMstack | JavaScript, APIs, and Markup</a></li><li><a href="https://speakerdeck.com/biilmann/the-jam-stack" target="_blank" rel="noopener">The JAM Stack</a></li><li><a href="https://www.staticgen.com/" target="_blank" rel="noopener">StaticGen</a></li><li><a href="https://headlesscms.org/" target="_blank" rel="noopener">headlesCMS</a></li><li><a href="https://slides.com/masayakazama/what-is-JAMstack" target="_blank" rel="noopener">JAMstackってなんなのか問題に立ち向かう</a></li></ul><hr><p>実際のところ、Web API ベースなアプリ開発をしていると、意識はしてなくとも JAMstack なウェブフロントを作っているなぁというケースもあったりします。</p><p>さっくり言ってしまうと、そんな Web API ベースなアプリでウェブフロントを構築済みの HTML として CDN へ配置するものに、JAMstack の名前がついた感じになります。</p><p>名前がついたことで認識され、認識されることで広まる流れになっていくのではないでしょうか。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=JAMstack%E3%80%81%E3%81%9D%E3%82%8C%E3%81%AF%E3%83%8F%E3%82%A4%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%AA%E3%82%A6%E3%82%A7%E3%83%96%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%92%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3&url=https://riotz.works/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=JAMstack%E3%80%81%E3%81%9D%E3%82%8C%E3%81%AF%E3%83%8F%E3%82%A4%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%AA%E3%82%A6%E3%82%A7%E3%83%96%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%92%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/01/23/JAMstack-an-architecture-to-realize-fine-web-front/" data-id="ckfm1lwrq003624nx3r3ia845" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Gridsome/" rel="tag">Gridsome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/01/made-presentation-about-jamstack-with-gridsome-at-javascript-matsuri/" title="初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました" rel="bookmark">初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/06/think-of-shifters-headlesscms-nize-on-shiftup-vol3/" title="Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる" rel="bookmark">Shiftup! JP_Getshifter Vol3！ 振り返り、Shifterのヘッドレス CMS 化に思いを馳せる</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/05/made-presentation-about-jamstack-at-shiftup-vol3/" title="Shiftup! JP_Getshifter Vol3！ にて「JAMstack なサーバーレス・ウェブフロント」について発表をしました" rel="bookmark">Shiftup! JP_Getshifter Vol3！ にて「JAMstack なサーバーレス・ウェブフロント」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/" title="JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました" rel="bookmark">JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました</a></h3></div></li></ul></div></footer></div></article><article id="post-review-of-2018" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2018/12/31/review-of-2018/" class="article-date"><time datetime="2018-12-30T15:00:00.000Z" itemprop="datePublished">2018-12-31</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A/">ふりかえり</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2018/12/31/review-of-2018/">2018年の振り返り</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/review.jpg" alt=""></p><p>2018年最後のポスト、１年間の活動を振り返ります。</p><h3 id="サマリー"><a href="#サマリー" class="headerlink" title="サマリー"></a>サマリー</h3><ul><li>発表: ６回</li><li>記事: ３本</li><li>アプリ開発: ３本</li><li>ハッカソン: １回</li></ul><h3 id="発表-６回"><a href="#発表-６回" class="headerlink" title="発表 ６回"></a>発表 ６回</h3><h4 id="2018-02-Agile-amp-DevOps-勉強会-lulzneko-amp-lopburny"><a href="#2018-02-Agile-amp-DevOps-勉強会-lulzneko-amp-lopburny" class="headerlink" title="2018.02 Agile & DevOps 勉強会 - @lulzneko & @lopburny"></a>2018.02 Agile & DevOps 勉強会 -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a></h4><p>クローズドな Agile & DevOps 勉強会で<a href="https://riotz.works/slides/2018-agile-and-devopts-study">スマートデバイス と クラウドサービス を 自動パーソナライズする IoT バックエンド開発チームにおける Agile と DevOps プラクティス</a>の発表をしました。</p><p>タイトルが長くでピンとこないのは、オリジナルのタイトルは製品名が入っていたからで、公開に当たって製品名を外す必要があったからになります。</p><p>ベースとなる話は昨年の Serverlessconf Tokyo 2017 で発表した<a href="https://riotz.works/slides/2017-serverless-conf">ava チームが選択した TypeScript による AWS Lambda 開発</a>になり、Java で開発していたプラットフォームを TypeScript で開発しなおす大手術をしたプロジェクトではどのような Agile & DevOps でやっていたのかを話しました。</p><p>私たちとしては必要に駆られてのことでしたが、途中でプログラミング言語を切り替えるのは衝撃を受けたほか、そのようなことをできる人たちがいることに驚いたと言われ開発者として誇らしく感じ、そして必要なことであればどのような困難でも真正面から取り組んでいくスタイルはずっとキープしていきたいと改めて感じるイベントでした。</p><h3 id="2018-05-JJUG-CCC-2018-Spring-lulzneko"><a href="#2018-05-JJUG-CCC-2018-Spring-lulzneko" class="headerlink" title="2018.05 JJUG CCC 2018 Spring - @lulzneko"></a>2018.05 JJUG CCC 2018 Spring -<a href="/engineers/#lulzneko">@lulzneko</a></h3><p>日本最大のJavaコミュニティイベント JJUG CCC で<a href="https://riotz.works/slides/2018-jjug-ccc-spring">Java から TypeScript へ 切り替えて加速するサーバーレス開発</a>の発表をしました。</p><p>Java のコミュニティで「Java をやめて TypeScript を選びました」という主旨の発表になり、かなり緊張しながら入室したことを覚えています。<br>仕事では Java をずっとやってきて、よく勉強でお世話になっていた会に、このような立場で発表するとは思っていませんでした。</p><p>会場は満員御礼で立ち見でも聞いてくださる方も多く、そして熱心に耳を傾けてくださり発表者冥利に尽きる会でした。</p><p>内容については賛否両論、手厳しい指摘も上がっていましたが、新たなる可能性についての話につなげられたと思っています。</p><p>批判や厳しい指摘を恐れず、発信したいことはしっかり話す。そして議論へつなげ盛り上げることの大切さを実感できた会だと感じました。</p><p>発表について１つ反省点が、タイトルは「Java から TypeScript へ切り替えて加速する」としているのに、「Java と TypeScript の親和性」についての話になっていたなと。資料を書いているうちに、どんどんアイデアが膨らんでしまうのに気をつけねば。。</p><h3 id="2018-06-SPAJAM-2018-東京D予選-lulzneko-amp-lopburny-amp-javaponny"><a href="#2018-06-SPAJAM-2018-東京D予選-lulzneko-amp-lopburny-amp-javaponny" class="headerlink" title="2018.06 SPAJAM 2018 東京D予選 - @lulzneko & @lopburny & @javaponny"></a>2018.06 SPAJAM 2018 東京D予選 -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a>&<a href="/engineers/#javaponny">@javaponny</a></h3><p>日本最高峰のアプリクリエイター競技会 の スマートフォン アプリ ハッカソン SPAJAM。ハッカソンの内容については後述、ここでは発表パートについて。</p><p><a href="https://riotz.works/slides/2018-spajam-qualification">リアルタイム の 競演 と 参加型観戦 で 音楽を最高に楽しむ🎶 「ラップ、タップ、アップ」</a>で発表しました。</p><p>徹夜でアプリ開発をしたあとの発表会。体力的にも集中力的もかなり厳しかった。スライドに何を書くのかとても苦戦しました。</p><p>一方で話し始めるとランナーズハイならぬスピーカーズハイとでもいうような高揚感で、今までの発表の中で一番ノッていました。</p><p>発表の神様が降りてきてくださった、そんな発表でした。<br>このような発表を毎回できるように精進しようと心から思いました。</p><p>進行より東京D予選は最難関と言われていましたが、どのチームも素晴らしい発表をされており、最高の発表をライバルの立場として体験させてもらえたことに感謝です。</p><h3 id="2018-09-Serverlessconf-Tokyo-2018-lulzneko-amp-lopburny-amp-javaponny"><a href="#2018-09-Serverlessconf-Tokyo-2018-lulzneko-amp-lopburny-amp-javaponny" class="headerlink" title="2018.09 Serverlessconf Tokyo 2018 - @lulzneko & @lopburny & @javaponny"></a>2018.09 Serverlessconf Tokyo 2018 -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a>&<a href="/engineers/#javaponny">@javaponny</a></h3><p>サーバーレスアーキテクチャを用いたアプリケーション構築における知見の共有を目的とした、コミュニティ主導の技術カンファレンスで、<a href="https://riotz.works/slides/2018-serverless-conf">リアルタイム動画ラップ バトル アプリを 短時間で作り上げた完全サーバーレスな秘技</a>の発表をしました。</p><p>Serverlessconf Tokyo は Riotz.works の原点ともいえるイベントで、2017年のイベントで発表させていただいたのが Riotz.works の始まりになります。</p><p>SPAJAM で作ったアプリはフル・サーバーレスでできており、サーバーレスで戦ったからこそ、優秀賞を受賞することができたと思っています。<br>そのサーバーレスの素晴らしさをハッカソンの観点からお伝えできたのではないでしょうか。</p><p>今回の会場は東京タワーのスタジオで 25m プール １面分の超巨大スクリーンでの発表でした。</p><p>このような会場ははじめてで緊張したものの、発表する楽しさを強烈に実感できる場所でした。また、このような場所で発表に臨めるよう技術と活動をしっかり行っていこうと思いました。</p><h3 id="Vue-Fes-Japan-2018-Reject-Conference-lulzneko-amp-lopburny"><a href="#Vue-Fes-Japan-2018-Reject-Conference-lulzneko-amp-lopburny" class="headerlink" title="Vue Fes Japan 2018 Reject Conference - @lulzneko & @lopburny"></a>Vue Fes Japan 2018 Reject Conference -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a></h3><p>日本開催初の大規模 Vue.js カンファレンスで<a href="https://riotz.works/slides/2018-vue-fes-reject-con">Vue.js/Nuxt.js で 実現できた PWA の リアルタイム動画ラップ バトル アプリ</a>のリジェクトコンで発表しました。</p><p>プレイドさんのオフィスで開催され、芝生スペースの素敵な場所でした。<br>フロント系のイベントははじめての参加で、今まで参加してきたイベントとは雰囲気が違う感じを受けましたが、楽しさはかわらず、技術イベントはいいなぁと再認しました。</p><p>懇親会では多くの方々と話をする機会がありとても楽しかったです。</p><h3 id="東京-Node-学園祭-2018-lulzneko-amp-lopburny"><a href="#東京-Node-学園祭-2018-lulzneko-amp-lopburny" class="headerlink" title="東京 Node 学園祭 2018 - @lulzneko & @lopburny"></a>東京 Node 学園祭 2018 -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a></h3><p>年に一度、真剣に学んで楽しもう！ 日本最大のNode.jsカンファレンス！ で<a href="https://riotz.works/slides/2018-nodefest">Vue.js/Nuxt.js で 実現できた PWA の リアルタイム動画ラップ バトル アプリ</a>の発表をしました。</p><p>TypeScript でサーバーレスを推している身として Node.js の総本山ともいえるイベントでお話しできるのは最高の体験でした。</p><h2 id="記事-３本"><a href="#記事-３本" class="headerlink" title="記事 ３本"></a>記事 ３本</h2><ul><li><a href="https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/">API Gateway の WebSocket で チャット を 実装 w/Serverless Framework</a></li><li><a href="https://riotz.works/articles/lulzneko/2018/02/03/develop-hello-and-version-web-api-with-serverless-framework-and-typescript/">Serverless Framework と TypeScript で Hello ＆ Version の Web API を 実装</a></li><li><a href="https://riotz.works/articles/lulzneko/2018/02/01/beginning-serverless-dev-with-serverless-framework-and-typescript/">Serverless Framework と TypeScript で サーバレス開発事始め</a></li></ul><p>こちらは全然かけなかったので反省です。<br>とくに TypeScript のスターター記事を書き始めたのに２回で止まってしまった。</p><p>引き続き TypeScript でサーバーレスは推していきたいので、しっかり記事を書いて発信していくとともに、Nuxt.js や Gridsome などを使い始めているので、こちらも情報発信をやっていけるようにしたいです。</p><p>活動の仕方を見直して、記事を書く時間をしっかりとるようにしたいです。</p><h2 id="アプリ開発-３本"><a href="#アプリ開発-３本" class="headerlink" title="アプリ開発 ３本"></a>アプリ開発 ３本</h2><ul><li><a href="https://riotz.works">Riotz.works official web site</a></li><li><a href="https://riotz.works/rap-tap-app">ラップ、タップ、アップ 🎶</a></li><li>クローズド１本</li></ul><p>まだ公開できないプロトタイプが１本ありますが、３本作れたのはよかったです。</p><p>ラップはハッカソン制作作品ですが、少しずつ機能追加などもやっていて、引き続きいろいろな機能を追加したり、おもしいことを試せたらと思っています。</p><p>ウェブサイトは Gridsome を使ってリニューアルしました。 Slides と Articles の引っ越しはできていませんが、リニューアルで念願だった Works と Engineers が追加できました。<br>Gridsome は JAMstack としておもしいので、ちゃんと使いこなせるようにしつつ情報発信をしていきたいと感がています。</p><h2 id="ハッカソン-１回-lulzneko-amp-lopburny-amp-javaponny"><a href="#ハッカソン-１回-lulzneko-amp-lopburny-amp-javaponny" class="headerlink" title="ハッカソン １回 - @lulzneko & @lopburny & @javaponny"></a>ハッカソン １回 -<a href="/engineers/#lulzneko">@lulzneko</a>&<a href="/engineers/#lopburny">@lopburny</a>&<a href="/engineers/#javaponny">@javaponny</a></h2><p>SPAJAM の スマートフォン アプリ ハッカソン に 参加しました。<br>自分自身も、Riotz の メンバー 全員 で はじめてハッカソンに参加した記念すべきイベントでした。</p><p>５人でチーム編成のところ、Riotz は ３人とチャレンジングな参加でしたが、サーバーサイドはサーバーレスの武器を活かすことでチャレンジできる、そしてアプリ側もネイティブではなく敢えて PWA を使うことで持てる技術を最大限に生かせることで戦えると考えていました。</p><p>とはいえ日本最高峰のアプリクリエイター競技会を謳っているイベントであり、参加した東京D予選ドワンゴ会場は最難関の予選会場(進行談) とのことで、すごい人、すごいチームばかりでした。</p><p>午前のチームを超えて全体でのアイデアソンではポンポンすごいアイデアを出す方、発表の時間では今すぐ公開可能レベルのアプリ、TED 会場かと錯覚するプレゼン、参加者のとてつもないレベルに面食らいました。</p><p>当日発表のテーマ「音楽」に対して、メジャーからストリート、Google Home、Spotify に Tシャツ制作サービス連携、スマホのあらゆる機能活用と、想定しきれないありとあらゆるものがそろっていたと思っています。</p><p>Riotz.works は幸いにして「優秀賞」をいただけましたが、どのチームがとってもおかしくない、最難関の予選会場(進行談) だったのではないでしょうか。</p><p>そのような方々相手にアイデアと技術を競えたことに感謝です。<br>ハッカソンははじめての参加でしたが、このような最高に高揚し意地を張れる場所に、多く参加できるよう技術の研鑽と戦うマインドをキープしていきたいと思う場でした。</p><hr><p>この１年は Riotz.works が発足して、ほぼ１年と半分。</p><p>多くの場所でお話しさせていただきました。サーバーレスはアプリ開発にとって最強の武器」を標語に活動してきた自分たちの思いをたくさんをお伝えできたのかなと思っています。</p><p>一方で残していけるはずの記事がたくさん作れなかったことは反省です。<br>話をすること、文章を書くこと、どちらも凄く好きなのは、今文章を書いていて感じていますが、時間を作ることが下手だったのかなと。<br>この辺は来年に向けて改善をしっかり考えていきます。</p><p>よかったところを伸ばし、反省点を見直して次の年へ繋げられるよう頑張ります。</p><p>よいお年を。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2018/12/31/review-of-2018/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=2018%E5%B9%B4%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A&url=https://riotz.works/articles/lulzneko/2018/12/31/review-of-2018/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2018/12/31/review-of-2018/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2018/12/31/review-of-2018/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=2018%E5%B9%B4%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2018/12/31/review-of-2018/" data-id="ckfm1lwpd001c24nx1nco08sl" class="article-share-link">共有：</span></footer></div></article><article id="post-what-we-did-in-2018" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lopburny/photo.jpg"></div><div class="article-author">lopburny</div><a href="/articles/lopburny/2018/12/29/what-we-did-in-2018/" class="article-date"><time datetime="2018-12-28T15:00:00.000Z" itemprop="datePublished">2018-12-29</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A/">ふりかえり</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lopburny/2018/12/29/what-we-did-in-2018/">2018年の Riotz Works の活動を振り返る</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lopburny/img/what-we-did-in-2018-thumb.jpg" alt="" title="振り返り"></p><p>どうも、Riotz Works のうさぎ（<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>）です！</p><p>昨日、年内予定していた全ての用事が終わり、年末の連休に突入しました。僕は例年クリスマスが終わった時点でそわそわして集中力が持たなくなりますが、今年は色々あって今日からやっと休暇に入ります。</p><p>そして Riotz Works も結成から１年が経過し、個人的にはここ数年で最も忙しく過ごした１年で、充実できた１年だったと思います。</p><p>一方、反省点も多々あり、ちゃんと振り返って来年の活動に活かしたいという気持ちもあります。この記事は、そんな Riotz Works での活動を振り返り、発表では言えなかったこと、私が感じたことをつらつらと書いていきます。</p><h2 id="2018年のうちにやってきた発表"><a href="#2018年のうちにやってきた発表" class="headerlink" title="2018年のうちにやってきた発表"></a>2018年のうちにやってきた発表</h2><p><img src="/articles/assets/lopburny/img/riotz_works_slides_page_20181229.png" alt="" title="発表資料一覧"></p><p>※ 2018/12/29 時点</p><p>これ、ちょうど１年前は、たったの１行でした😂</p><p>まさかこのページが埋まるとは、想像していませんでしたが、何事もチャレンジしてみるもんですね。Riotz Works の活動は、今のところ仕事というわけではないので、メンバーの 100% ピュアなモチベーションでやってこれたのも効果的だったと思います。</p><h3 id="スマートデバイスとクラウドサービスを自動パーソナライズする-IoT-バックエンド開発チームにおける-Agile-と-DevOps-プラクティス"><a href="#スマートデバイスとクラウドサービスを自動パーソナライズする-IoT-バックエンド開発チームにおける-Agile-と-DevOps-プラクティス" class="headerlink" title="スマートデバイスとクラウドサービスを自動パーソナライズする IoT バックエンド開発チームにおける Agile と DevOps プラクティス"></a>スマートデバイスとクラウドサービスを自動パーソナライズする IoT バックエンド開発チームにおける Agile と DevOps プラクティス</h3><p>@Agile & DevOps 勉強会、 発表資料は<a href="https://riotz.works/slides/2018-agile-and-devopts-study#1">こちら</a></p><p>2月、<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>と<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>が発表しました。Riotz Works が結成して 1回目の発表が Serverlessconf Tokyo 2017 という大きくてパブリックな発表だったのに対して、今回（2回目）は Closed な勉強会だったので比較的緊張はしなかったです。</p><p>しかし、タイトルにもあるように、勉強会のテーマは Agile や DevOps といった開発プロセスなので、参加者のみなさんが必ずしも Web やクラウドに明るいわけではなく、様々なバックグラウンドを持つ人にどう伝わるか悩ましいところでした。</p><p>中盤の自分のパートが AWS に触れたことがない人には分かりにくい内容だったと自覚し、補足説明をたくさん入れるようにしましたが、本番では早口で突っ走るような話し方になっていたかもしれません。</p><p>発表後、「刺さる人には刺さった」というコメントをもらったときは嬉しかったです。</p><h3 id="Java-から-TypeScript-へ切り替えて加速するサーバーレス開発"><a href="#Java-から-TypeScript-へ切り替えて加速するサーバーレス開発" class="headerlink" title="Java から TypeScript へ切り替えて加速するサーバーレス開発"></a>Java から TypeScript へ切り替えて加速するサーバーレス開発</h3><p>@JJUG CCC 2018 Spring、 発表資料は<a href="https://riotz.works/slides/2018-jjug-ccc-spring#1">こちら</a></p><p>5月26日。<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>の単独発表です。</p><p>AWS Lambda は、リリース当初から現在に至るまで、Java ランタイムを選択すると必然的に Cold Start に悩まされることになります（Cold Start を無視してもいいケースなら問題になりません）。この問題に対するアプローチはいくつかあると思いますが、私たちのチームが身をもって実践してみたことで、「Java 開発者において、TypeScript は良い選択になり得る」というのがポイントになります。</p><p>発表会場が開始後すぐ埋まり、立ち見の方もいらっしゃるほど盛況でした。このアプローチに対するフィードバックは賛否両論ありましたが、みなさんにとって興味深い内容だったのではないかと思います。</p><h3 id="リアルタイムの共演と参加型観戦で音楽を最高に楽しむ🎶「ラップ、タップ、アップ」"><a href="#リアルタイムの共演と参加型観戦で音楽を最高に楽しむ🎶「ラップ、タップ、アップ」" class="headerlink" title="リアルタイムの共演と参加型観戦で音楽を最高に楽しむ🎶「ラップ、タップ、アップ」"></a>リアルタイムの共演と参加型観戦で音楽を最高に楽しむ🎶「ラップ、タップ、アップ」</h3><p>@SPAJAM 2018 東京D予選、 発表資料は<a href="https://riotz.works/slides/2018-spajam-qualification#1">こちら</a></p><p>6月16日~17日。今回はカンファレンスではなくハッカソンです。<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>、<a href="https://twitter.com/javaponny" target="_blank" rel="noopener">@javaponny</a>、<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>３人で出場しました。メンバー全員初めてのハッカソンで、Riotz Works としても初です。もともとこの SPAJAM というハッカソンには注目していて、Riotz Works 結成前から「出てみたい」と何度か話したことがありました。そして、思い切って、エントリーしたのです。</p><p>１日目の朝、そわそわしながら会場へ向かい、午前のアイディアソンを終えて、ハッカソンのテーマ（音楽）が発表されました。会場近くの築地市場で海鮮丼を食べながら、どうする？何作る？と議論をはじめ、私が思いついたのが、このラップバトルです。言ってみたものの、これどうやってつくるの、やばくね、みたいな感じでした💦</p><p>ラップバトルのサービスは世の中にいくつも存在しますが、僕はよりインタラクティブな演出がいいなと思ったのと、ラップバトルの「対戦」と「観戦」を 同時にかつリアルタイムにできる仕組みを作ることで差別化を図りました。いわば Twitch のゲーム実況ストリーマー同士が即座で対戦を始め、その様子をそれぞれのチャンネルで数百〜数千の人たちが観戦しながらコメントやヤジを飛ばす様子。そういうのが作りたかったです。</p><p>果たして作りきれるだろうか。。。午後から真面目に調査します。数時間ほどでなんとか SkyWay のサンプルを動かすことができました。夜になって会場を出た時点で、ようやく翌日の発表に向けた最も基本的な機能（リアルタイム動画ストリーミング）ができました。そして、夜も気を抜くことはできません。オールナイトで作業して30分ほど仮眠を取り、発表直前まで開発を進めた結果、なんとかデモができるところまで作れました。</p><p>結果は・・・なんと、優秀賞をいただきました！！</p><p>今でもあの感動を忘れられません。恐らく今年起きた出来事の中で最強のインパクトでした。。</p><p>そして帰りに飲んだビールは間違いなく今年飲んできたビールの中で最高の味でした。😂</p><p>残念ながら SPAJAM の本選に出ることはできませんでしたが、次はもっと進みたいと思います！！</p><h3 id="リアルタイム動画ラップバトルアプリを短時間で作り上げた完全サーバーレスな被疑"><a href="#リアルタイム動画ラップバトルアプリを短時間で作り上げた完全サーバーレスな被疑" class="headerlink" title="リアルタイム動画ラップバトルアプリを短時間で作り上げた完全サーバーレスな被疑"></a>リアルタイム動画ラップバトルアプリを短時間で作り上げた完全サーバーレスな被疑</h3><p>@Serverlessconf Tokyo 2018、 発表資料は<a href="https://riotz.works/slides/2018-serverless-conf#1">こちら</a></p><p>9月29日。<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>、<a href="https://twitter.com/javaponny" target="_blank" rel="noopener">@javaponny</a>、<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>３人で発表しました。Serverlessconf Tokyo での発表は、去年に続き２回目となります。夏のハッカソンの余韻がまだ残っていて、この発表の準備にも気合が入りました。特に、会場スクリーンのアスペクト比が 48:9 という、ものすごく大きくて迫力のある会場だったため、わくわくしつつもかなり緊張していました😂</p><p>気合を入れて会場に着き、生でみる会場の広さとスクリーンの迫力にびっくりしながら、デモの準備をしました。ちゃんと動くのを確認してこれはいける！と思ったんですが、本番では開始とともにデモが固まって動かないことに。そういうことにならないよう、開始１０分前からアプリを立ち上げた状態で待機したのですが、なぜか開始のタイミングで 僕のスマホが固まってしまったんです。えーーー、なんで。。。ショック。。。とパニックになってしまった僕は、落ち着いて話すことができず、発表中に焦りを出してしまった気がして反省しています。</p><p>当時<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>が言っていたように、「デモが動かないことは、よくあることですね」と、一旦落ち着いて進めていき、メンバーが対応してくれることを待つべきだったことを学びました。</p><p>幸い、メンバーが対応してくれたおかげて、発表中にデモが復旧し、ハッカソンで作ったアプリを披露することができました。また、サーバーレス関連の色んな方々とお話ができて、他の発表についても、どれもすごく勉強になったので、貴重なイベントでした。</p><h3 id="Vue-js-Nuxt-js-で実現できた-PWA-なリアルタイム動画ラップバトルアプリ"><a href="#Vue-js-Nuxt-js-で実現できた-PWA-なリアルタイム動画ラップバトルアプリ" class="headerlink" title="Vue.js/Nuxt.js で実現できた PWA なリアルタイム動画ラップバトルアプリ"></a>Vue.js/Nuxt.js で実現できた PWA なリアルタイム動画ラップバトルアプリ</h3><p>@Vue Fes Japan 2018 Reject Conference、 発表資料は<a href="https://riotz.works/slides/2018-vue-fes-reject-con#1">こちら</a></p><p>11月10日。<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>と<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>が発表しました。前回の Serverlessconf ではバックエンドの内容がメインでしたが、今回はフロントエンドにフォーカスした話です。元々、Vue Fes Japan そのものにエントリーしましたが、枠が非常に限られていたらしく、採用にはならずとも魅力的な内容だということで、 Reject Conference に参加させていただくことになりました。</p><p>Riotz Works のメンバーは、全員フロントエンド以外の領域を得意としています。ですが、フロントエンド／バックエンドの領域にこだわらず、思いついたことは自ら形にしていくことが大事だと思っていますし、ハッカソンでものを作っていく中で、人の目にダイレクトに届くUIの重要性と楽しさに気づいてしまったので、もっと極めたいなと思っています。</p><p>今回の発表は、今まで数を重ねてきたこともあり自信持ってできた気がして、懇親会でも色んな方々とお話させていただき、個人的に最も楽しくできた発表でした。</p><h3 id="Vue-js-Nuxt-js-と-TypeScript-で実現する-PWA-なリアルタイム動画ラップバトルアプリ〜フル-Node-js-エコシステムで戦ったモバイルアプリのハッカソン〜"><a href="#Vue-js-Nuxt-js-と-TypeScript-で実現する-PWA-なリアルタイム動画ラップバトルアプリ〜フル-Node-js-エコシステムで戦ったモバイルアプリのハッカソン〜" class="headerlink" title="Vue.js/Nuxt.js と TypeScript で実現する PWA なリアルタイム動画ラップバトルアプリ〜フル Node.js エコシステムで戦ったモバイルアプリのハッカソン〜"></a>Vue.js/Nuxt.js と TypeScript で実現する PWA なリアルタイム動画ラップバトルアプリ〜フル Node.js エコシステムで戦ったモバイルアプリのハッカソン〜</h3><p>@東京Node学園祭2018、 発表資料は<a href="https://riotz.works/slides/2018-nodefest#1">こちら</a></p><p>11月23日。<a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">@lulzneko</a>と<a href="https://twitter.com/lopburny" target="_blank" rel="noopener">@lopburny</a>が発表しました。今回も話のネタそのものは変わらないですが、Riotz Works が Node.js を使い始めて、2018年をどう過ごしたかという集合体のような内容です。またサーバーサイド（Node.js）→フロントエンド（Vue.js）→Node.js環境全般 という流れができたのと、Node.js コミュニティでの発表ということで胸が熱くなりました。</p><p>発表も比較的慣れてきたところで順調に進みましたが、React 界隈の方々が多く、前回よりは重い空気になることもありました。ですが発表の順番が最後で、たくさんの方々に聞いていただき、たくさんフィードバックをもらえたので、かなり手応えのあったイベントでした。</p><h3 id="2018年を振り返って、よかったこと"><a href="#2018年を振り返って、よかったこと" class="headerlink" title="2018年を振り返って、よかったこと"></a>2018年を振り返って、よかったこと</h3><p>あえて２点にしぼると、こんな感じです。</p><ul><li>ハッカソンに出て、アイディアを形にできたこと</li><li>次々と発表が決まり、絶え間なくイベントに参加できたこと</li></ul><h3 id="2018年を振り返って、反省したいこと"><a href="#2018年を振り返って、反省したいこと" class="headerlink" title="2018年を振り返って、反省したいこと"></a>2018年を振り返って、反省したいこと</h3><p>たくさんありますが、これも２点にしぼります。Riotz Works というより個人的な話ですね。</p><ul><li>タスクの優先順位を考慮した、自分のリソース管理</li><li>発表以外のアウトプットができていない点</li></ul><p>当たり前な話ですが、何らかの活動を継続して進めていくためには、自分の体力・時間などのリソース管理を上手にできることが重要なポイントかなと思います。</p><p>僕は思いつきとその時のモチベーションに左右されやすいタイプで、できないことも意地を張って挑戦し続けたりするので、無駄にした時間が結構ありました。目標やコミットしたことに対して確実に結果を出すためには、もっと冷静に自分を見直して、シビアにならないといけないですね。</p><p>あと、もっとブログ書きたかったのですが、上記のリソース管理ができなかったせいか、できていません。書きたい話は結構あります。2019年からばんばん出して行きたいと思います。</p><h3 id="終わりに"><a href="#終わりに" class="headerlink" title="終わりに"></a>終わりに</h3><p>ちょっと長くなってしまいましたが、いかがだったでしょうか。<br>Riotz Works は 2019年も楽しく活動していきたいと思います。みなさん良いお年を〜</p><p class="article-author-footer">Author:<strong>lopburny</strong><a href="https://github.com/lopburny" class="article-link-github" target="_blank" title="GitHub @lopburny"></a><a href="https://twitter.com/lopburny" class="article-link-twitter" target="_blank" title="Twitter @lopburny"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lopburny/2018/12/29/what-we-did-in-2018/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=2018%E5%B9%B4%E3%81%AE%20Riotz%20Works%20%E3%81%AE%E6%B4%BB%E5%8B%95%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B&url=https://riotz.works/articles/lopburny/2018/12/29/what-we-did-in-2018/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lopburny/2018/12/29/what-we-did-in-2018/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lopburny/2018/12/29/what-we-did-in-2018/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=2018%E5%B9%B4%E3%81%AE%20Riotz%20Works%20%E3%81%AE%E6%B4%BB%E5%8B%95%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lopburny/2018/12/29/what-we-did-in-2018/" data-id="ckfm1lwmz000024nx2j739rcp" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/2018%E5%B9%B4/" rel="tag">2018年</a></li></ul></footer></div></article><article id="post-implement-chat-using-websocket-of-api-gateway-with-serverless-framework" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" class="article-date"><time datetime="2018-12-21T15:00:00.000Z" itemprop="datePublished">2018-12-22</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9/">サーバーレス</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/">API Gateway の WebSocket でチャットを実装 w/Serverless Framework</a></h1></header><div class="article-entry" itemprop="articleBody"><p><img src="/articles/assets/lulzneko/serverless/serverless.jpg" alt="" title="サーバーレス"></p><p>この記事は<a href="https://qiita.com/advent-calendar/2018/serverless" target="_blank" rel="noopener">Serverless Advent Calendar 2018</a>の 22日目になります。</p><p>AWS re:Invent で発表された API Gateway の WebSocket 対応、ついに利用できるようになりました！<br>WebSocket がサーバーレスで簡単に利用できるようになるとアプリの幅も広がり、いろいろなことができるようになります。<br>さっそく API Gateway の WebSocket を試してみます。</p><p>※ 今回 Serverless Framework の serverless-websockets-plugin を使いますが 2018年12月現在、暫定の実装になるとのことです。API Gateway の WebSocket 対応が AWS CloudFormation で未サポートのため Serverless Framework 本体には含まれず Plugin になっているとのこと。正式版では構文など変わる可能性があることに注意が必要です。</p><p>しかしながら “With all that out of the way, play with our new presents!” ということで、楽しんでみましょう！</p><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 8.10.0</li><li>Yarn 1.12.3</li><li>TypeScript 3.2.2</li><li>Serverless Framework 1.35.1</li><li>Serverless Websockets Plugin 1.0.0</li></ul><p><strong>参考情報</strong></p><ul><li><a href="https://aws.amazon.com/jp/blogs/news/announcing-websocket-apis-in-amazon-api-gateway/" target="_blank" rel="noopener">[発表]Amazon API GatewayでWebsocketが利用可能</a></li><li><a href="https://serverless.com/blog/api-gateway-websockets-example/" target="_blank" rel="noopener">Using API Gateway WebSockets with the Serverless Framework</a></li><li><a href="https://github.com/serverless/serverless-websockets-plugin" target="_blank" rel="noopener">serverless/serverless-websockets-plugin</a></li></ul><h2 id="WebSocket-について"><a href="#WebSocket-について" class="headerlink" title="WebSocket について"></a>WebSocket について</h2><p>HTTP ベースの Web API ではサーバーに対して接続、リクエストを送り、処理結果のレスポンスを受け取り、切断終了の流れになります。<br>必要に応じて、このリクエスト/レスポンスのやり取りを繰り返す形になります。</p><p>それに対して WebSocket はサーバーに接続後、コネクションを維持したまま双方向でメッセージを送ることができます。<br>これは通常のリクエスト/レスポンスに当たるやり取りのほかに、サーバー側から任意のタイミングでメッセージを送れます。</p><p>たとえば私たちがハッカソンで作った「<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>」では、演奏者へのフィードバックとして「👍」を送ることができ、その数をリアルタイムでカウントする機能があります。</p><p>この「👍」をリアルタイムでカウントする部分を HTTP ベースの Web API で作るとすると、アプリから「👍」の数を取得する API を繰り返し「リクエスト/レスポンス」して受け取る必要が出てきます。<br>仮に数に変化がなかったとしてもアプリ側は知るすべがないので、繰り返し「👍」の数を取得しに行かなければなりません。</p><p>WebSocket が使える場合、コネクションは維持したまま必要な時に「👍」の数をサーバー側がアプリへメッセージを送ることができるようになります。<br>「👍」の数に変化がなかった場合は維持されているコネクションの中にメッセージが流れないだけでアプリはとくに何もする必要はありません。変化があった時だけサーバーが教えてくれるので、それに応じてアプリの表示を変えるだけになります。</p><p>これにより不要なリクエスト/レスポンスを減らせるほか、よりリアルタイムに近い状態で変化を受け取ることができるようになります。<br>HTTP ベースでは「リクエスト/レスポンス」で受け取り、次のリクエストを出すまでの間にあった変化は結果しか受け取れません。５だった「👍」を次のリクエスト/レスポンスでは 10になっているかもしれません。</p><p>WebSocket では状態の変化を断続的に返すことも可能になるので、５、６、７… とメッセージを返せます。</p><p>これにより、よりスムーズに描画を変えていくことができるようになります。<br>これはチャットのようなコミュニケーションや金融などの取引の価格情報などに使うことができます。</p><p>今回<a href="https://aws.amazon.com/jp/api-gateway/" target="_blank" rel="noopener">API Gateway</a>がこの WebSocket に対応したので、その使い方をチャットを実装することで確認します。<br>(WebSocket でチャットは定番すぎますが、「👍」のカウントだとさみしいですからね)</p><p>※「<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a>」では、API Gateway がまだ WebSocket が扱えなかったので、<a href="https://firebase.google.com/docs/database/" target="_blank" rel="noopener">Firebase Realtime Database</a>を使って実現しています。</p><h2 id="Node-js-プロジェクトの準備"><a href="#Node-js-プロジェクトの準備" class="headerlink" title="Node.js プロジェクトの準備"></a>Node.js プロジェクトの準備</h2><p>Serverless Framework のボイラープレートを使って、TypeScript の Node.js プロジェクトを作成します。</p><p>プロジェクトのディレクトリを作成しプロジェクトのひな型を作ります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~$ mkdir samples-apigateway-websocket-chat</span><br><span class="line">username@pc:~$ cd samples-apigateway-websocket-chat</span><br><span class="line">username@pc:~/samples-apigateway-websocket-chat$</span><br><span class="line"></span><br><span class="line">username@pc:~/samples-apigateway-websocket-chat$ npx serverless create --template aws-nodejs-typescript</span><br><span class="line">Serverless: Generating boilerplate...</span><br><span class="line">(省略)</span><br><span class="line">Serverless: Successfully generated boilerplate for template: "aws-nodejs-typescript"</span><br><span class="line">Serverless: NOTE: Please update the "service" property in serverless.yml with your service name</span><br></pre></td></tr></table></figure><p>続いて Serverless Framework をローカルで追加し、AWS SDK と WebSocket クライアント wscat、必要なパッケージを最新化してインストールします。<br>Serverless Framework はグローバルに追加して使うようですが、複数人開発でグローバルのを使っているとバージョンの違いなどでトラブルがあったので<code>package.json</code>で明示して、それを使うようにしているためです。サクッと試すにはグローバルでもよいでしょう。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn add -D serverless serverless-websockets-plugin wscat</span><br><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn upgrade --latest</span><br><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn add aws-sdk</span><br></pre></td></tr></table></figure><p><code>package.json</code>をプロジェクトに合わせて修正します。<br>主に<code>name</code><code>description</code><code>author</code>あたりを合わせるとよいでしょう。<br>また、作成しているのはアプリケーションなのでモジュール公開の防止のために<code>"private": true</code>を設定しておくとよいでしょう。private の詳細は、こちらの<a href="https://docs.npmjs.com/files/package.json#private" target="_blank" rel="noopener">package.json | npm Documentation</a>をご確認ください。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"samples-apigateway-websocket-chat"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: {</span><br><span class="line">    <span class="attr">"aws-sdk"</span>: <span class="string">"^2.382.0"</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"devDependencies"</span>: {</span><br><span class="line">    <span class="attr">"@types/aws-lambda"</span>: <span class="string">"8.10.17"</span>,</span><br><span class="line">    <span class="attr">"@types/node"</span>: <span class="string">"^10.12.18"</span>,</span><br><span class="line">    <span class="attr">"serverless"</span>: <span class="string">"^1.35.1"</span>,</span><br><span class="line">    <span class="attr">"serverless-webpack"</span>: <span class="string">"^5.1.1"</span>,</span><br><span class="line">    <span class="attr">"serverless-websockets-plugin"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"source-map-support"</span>: <span class="string">"^0.5.6"</span>,</span><br><span class="line">    <span class="attr">"ts-loader"</span>: <span class="string">"^5.3.2"</span>,</span><br><span class="line">    <span class="attr">"typescript"</span>: <span class="string">"^3.2.2"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.5.0"</span>,</span><br><span class="line">    <span class="attr">"wscat"</span>: <span class="string">"^2.2.1"</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"Riotz.works (https://riotz.works)"</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"MIT"</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="Serverless-Framework-の設定"><a href="#Serverless-Framework-の設定" class="headerlink" title="Serverless Framework の設定"></a>Serverless Framework の設定</h2><p><code>serverless.yml</code>を編集し Serverless Framework の設定を行います。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">service:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">samples-apigateway-websocket-chat</span></span><br><span class="line"></span><br><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-webpack</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-websockets-plugin</span></span><br><span class="line"></span><br><span class="line"><span class="attr">provider:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">aws</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">${</span> <span class="string">opt:stage,</span> <span class="string">'dev'</span> <span class="string">}</span></span><br><span class="line">  <span class="attr">region:</span> <span class="string">${</span> <span class="string">opt:region,</span> <span class="string">'us-west-2'</span> <span class="string">}</span></span><br><span class="line">  <span class="attr">runtime:</span> <span class="string">nodejs8.10</span></span><br><span class="line">  <span class="attr">iamRoleStatements:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">      <span class="attr">Action:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">execute-api:ManageConnections</span></span><br><span class="line">      <span class="attr">Resource:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">arn:aws:execute-api:*:*:**/@connections/*</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">      <span class="attr">Action:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:Scan</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:PutItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:UpdateItem</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">dynamodb:DeleteItem</span></span><br><span class="line">      <span class="attr">Resource:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">Fn::GetAtt:</span> <span class="string">[</span> <span class="string">ChatConnectionsTable,</span> <span class="string">Arn</span> <span class="string">]</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">DYNAMODB_CONNECTIONS:</span></span><br><span class="line">      <span class="attr">Ref:</span> <span class="string">ChatConnectionsTable</span></span><br><span class="line">  <span class="attr">websocketApiName:</span> <span class="string">${self:service.name}-${self:provider.stage}</span></span><br><span class="line">  <span class="attr">websocketApiRouteSelectionExpression:</span> <span class="string">$request.body.action</span></span><br><span class="line"></span><br><span class="line"><span class="attr">functions:</span></span><br><span class="line">  <span class="attr">connect:</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">handler.connect</span></span><br><span class="line">    <span class="attr">events:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">websocket:</span></span><br><span class="line">          <span class="attr">routeKey:</span> <span class="string">$connect</span></span><br><span class="line">  <span class="attr">disconnect:</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">handler.disconnect</span></span><br><span class="line">    <span class="attr">events:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">websocket:</span></span><br><span class="line">          <span class="attr">routeKey:</span> <span class="string">$disconnect</span></span><br><span class="line">  <span class="attr">defaultMessage:</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">handler.defaultMessage</span></span><br><span class="line">    <span class="attr">events:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">websocket:</span></span><br><span class="line">          <span class="attr">routeKey:</span> <span class="string">$default</span></span><br><span class="line">  <span class="attr">sendMessage:</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">handler.sendMessage</span></span><br><span class="line">    <span class="attr">events:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">websocket:</span></span><br><span class="line">          <span class="attr">routeKey:</span> <span class="string">sendMessage</span></span><br><span class="line"></span><br><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">ChatConnectionsTable:</span></span><br><span class="line">      <span class="attr">Type:</span> <span class="string">AWS::DynamoDB::Table</span></span><br><span class="line">      <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">TableName:</span> <span class="string">${self:service.name}-connections-${self:provider.stage}</span></span><br><span class="line">        <span class="attr">AttributeDefinitions:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">ConnectionId</span></span><br><span class="line">            <span class="attr">AttributeType:</span> <span class="string">S</span></span><br><span class="line">        <span class="attr">KeySchema:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">AttributeName:</span> <span class="string">ConnectionId</span></span><br><span class="line">            <span class="attr">KeyType:</span> <span class="string">HASH</span></span><br><span class="line">        <span class="attr">ProvisionedThroughput:</span></span><br><span class="line">          <span class="attr">ReadCapacityUnits:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">WriteCapacityUnits:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">SSESpecification:</span></span><br><span class="line">          <span class="attr">SSEEnabled:</span> <span class="literal">True</span></span><br><span class="line">        <span class="attr">StreamSpecification:</span></span><br><span class="line">          <span class="attr">StreamViewType:</span> <span class="string">NEW_AND_OLD_IMAGES</span></span><br></pre></td></tr></table></figure><p><code>plugins</code>に API Gateway WebSocket を使うための<code>serverless-websockets-plugin</code>を追加します。</p><p><code>iamRoleStatements</code>では、API Gateway の WebSocket API を呼び出すための<code>execute-api:ManageConnections</code>に許可を与えます。<br>また WebSocket に接続しているクライアントのコネクションを管理するための DynamoDB が必要なので、DynamoDB に関する許可も与えます。</p><p>30行目、31行目の<code>websocketApiName</code>と<code>websocketApiRouteSelectionExpression</code>は、serverless-websockets-plugin の設定になります。<code>websocketApiName</code>は管理用にわかりやすい名前を設定しておくとよいでしょう。</p><p><code>functions</code>は WebSocket のイベントとアクションに合わせて定義を行います。<br><code>events</code>に<code>websocket</code>が追加でき、<code>websocketApiRouteSelectionExpression</code>に設定された Key の値と<code>routeKey</code>の文字列のマッチングによって起動する Lambda を振り分けています。<br><code>$connect</code><code>$disconnect</code>は WebSocket の接続と切断に対応します。また<code>$default</code>はマッチするアクションがない場合に呼び出されます。<br>最後の<code>sendMessage</code>が WebSocket で受け取るメッセージのキーになります。具体的には<code>{ "action":"sendMessage", "data":"hello world" }</code>のような JSON の<code>action</code>に入る文字列のマッチングになります。</p><p><code>resources</code>は WebSocket のコネクション管理用 DynamoDB を定義しています。<br>今回は最低限の<code>ConnectionId</code>だけを管理します。名前など無しの完全に匿名のメッセージだけのチャットになります。(WebSocket の動きと実装を試すってことで💦)</p><h2 id="AWS-Lambda-の実装"><a href="#AWS-Lambda-の実装" class="headerlink" title="AWS Lambda の実装"></a>AWS Lambda の実装</h2><p><code>handler.ts</code>に処理を実装します。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { APIGatewayEventRequestContext, APIGatewayProxyEvent, APIGatewayProxyHandler, APIGatewayProxyResult } <span class="keyword">from</span> <span class="string">'aws-lambda'</span>;</span><br><span class="line"><span class="keyword">import</span> { ApiGatewayManagementApi, DynamoDB } <span class="keyword">from</span> <span class="string">'aws-sdk'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> APIGatewayProxyEventWithWebSocket <span class="keyword">extends</span> APIGatewayProxyEvent {</span><br><span class="line">  requestContext: APIGatewayEventRequestContextWithWebSocket</span><br><span class="line">}</span><br><span class="line"><span class="keyword">interface</span> APIGatewayEventRequestContextWithWebSocket <span class="keyword">extends</span> APIGatewayEventRequestContext {</span><br><span class="line">  domainName: <span class="built_in">string</span>,</span><br><span class="line">  connectionId: <span class="built_in">string</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apigateway = ({ domainName, stage }): <span class="function"><span class="params">ApiGatewayManagementApi</span> =></span> <span class="keyword">new</span> ApiGatewayManagementApi({ endpoint: <span class="string">`<span class="subst">${domainName}</span>/<span class="subst">${stage}</span>`</span> });</span><br><span class="line"><span class="keyword">const</span> dynamodb = <span class="keyword">new</span> DynamoDB.DocumentClient();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect: APIGatewayProxyHandler = <span class="keyword">async</span> (event: APIGatewayProxyEventWithWebSocket): <span class="built_in">Promise</span>&lt;Result> => {</span><br><span class="line">  <span class="built_in">console</span>.debug(<span class="string">'Starting Lambda handler: event=%s'</span>, <span class="built_in">JSON</span>.stringify(event));</span><br><span class="line">  <span class="keyword">await</span> dynamodb.put({ TableName: process.env.DYNAMODB_CONNECTIONS, Item: { ConnectionId: event.requestContext.connectionId }}).promise();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="string">'Connected'</span>);</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> disconnect: APIGatewayProxyHandler = <span class="keyword">async</span> (event: APIGatewayProxyEventWithWebSocket): <span class="built_in">Promise</span>&lt;Result> => {</span><br><span class="line">  <span class="built_in">console</span>.debug(<span class="string">'Starting Lambda handler: event=%s'</span>, <span class="built_in">JSON</span>.stringify(event));</span><br><span class="line">  <span class="keyword">await</span> dynamodb.delete({ TableName: process.env.DYNAMODB_CONNECTIONS, Key: { ConnectionId: event.requestContext.connectionId }}).promise();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="string">'Disconnected'</span>);</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> defaultMessage: APIGatewayProxyHandler = <span class="keyword">async</span> (event: APIGatewayProxyEventWithWebSocket): <span class="built_in">Promise</span>&lt;Result> => {</span><br><span class="line">  <span class="built_in">console</span>.debug(<span class="string">'Starting Lambda handler: event=%s'</span>, <span class="built_in">JSON</span>.stringify(event));</span><br><span class="line">  <span class="keyword">const</span> params: ApiGatewayManagementApi.Types.PostToConnectionRequest = {</span><br><span class="line">    ConnectionId: event.requestContext.connectionId,</span><br><span class="line">    Data: <span class="string">'Error: Invalid action type'</span></span><br><span class="line">  };</span><br><span class="line">  <span class="keyword">await</span> apigateway(event.requestContext).postToConnection(params).promise();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="string">'Error: Invalid action type'</span>, <span class="number">500</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sendMessage: APIGatewayProxyHandler = <span class="keyword">async</span> (event: APIGatewayProxyEventWithWebSocket, context, callback): <span class="built_in">Promise</span>&lt;Result> => {</span><br><span class="line">  <span class="built_in">console</span>.debug(<span class="string">'Starting Lambda handler: event=%s'</span>, <span class="built_in">JSON</span>.stringify(event));</span><br><span class="line">  <span class="keyword">const</span> connections = <span class="keyword">await</span> dynamodb.scan({ TableName: process.env.DYNAMODB_CONNECTIONS, ProjectionExpression: <span class="string">'ConnectionId'</span> }).promise();</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(connections.Items.map(<span class="keyword">async</span> ({ ConnectionId }) => {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">      <span class="keyword">const</span> params: ApiGatewayManagementApi.Types.PostToConnectionRequest = {</span><br><span class="line">        ConnectionId: ConnectionId,</span><br><span class="line">        Data: <span class="built_in">JSON</span>.parse(event.body).data</span><br><span class="line">      };</span><br><span class="line">      <span class="keyword">await</span> apigateway(event.requestContext).postToConnection(params).promise();</span><br><span class="line">    } <span class="keyword">catch</span> (e) {</span><br><span class="line">      <span class="keyword">if</span> (e.statusCode === <span class="number">410</span>) {</span><br><span class="line">        <span class="keyword">await</span> dynamodb.delete({ TableName: process.env.DYNAMODB_CONNECTIONS, Key: { ConnectionId: ConnectionId }}).promise();</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }));</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="string">'OK'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Result <span class="keyword">implements</span> APIGatewayProxyResult {</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> body: <span class="built_in">string</span>, <span class="keyword">public</span> statusCode: <span class="built_in">number</span> = 200</span>) {}</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>4行目～10行目の interface 宣言ですが、こちらは API Gateway の WebSocket 対応の TypeScript 型定義がまだ入っていないので補完するために宣言しています。<code>requestContext</code>に入ってくる<code>domainName</code>と<code>connectionId</code>が必要なため追加しています。型定義が更新されたら不要となります。</p><p>13行目<code>ApiGatewayManagementApi</code>のインスタンスを取得する関数ですが、API Gateway から WebSocket のメッセージを返す際に<code>endpoint</code>が必要となり、これが<code>domainName</code>と<code>stage</code>から決まってきます。固定値の場合はよいのですが、今回のように動的に決まってくる場合は<code>requestContext</code>から受け取った<code>domainName</code>と<code>stage</code>が必要なため毎回インスタンスを生成しています。</p><p>16行目～58行目で<code>serverless.yml</code>に定義した Lambda のエントリーポイントと実装があります。</p><p><code>connect</code>と<code>disconnect</code>は WebSocket の「接続/切断」の際に呼び出されます。<br>接続時に<code>connectionId</code>を DynamoDB へ保存し、切断時に削除しています。切断は呼び出されないこともあるので、注意が必要です。</p><p><code>defaultMessage</code>は WebSocket で受け取ったメッセージに対応するアクションがなかった場合に呼び出されます。ここでは “Error: Invalid action type” をクライアントに返しています。<br>WebSocket でメッセージを返すには<code>ApiGatewayManagementApi</code>の<code>postToConnection()</code>を呼び出します。その際にクライアントの<code>connectionId</code>が必要となります。<br>この関数のようにメッセージを送ってきたクライアントだけにメッセージを送る場合は<code>requestContext</code>の<code>connectionId</code>が使えるので、それを使ってエラーメッセージを返します。</p><p>最後の<code>sendMessage</code>は、チャットのコメントを送る処理になります。リアルタイムに複数クライアントへメッセージを送る WebSocket を使う処理の肝となる部分です。<br>複数クライアントにメッセージを返すには、メッセージを送るべきクライアントすべての<code>connectionId</code>が必要となり、それぞれに<code>ApiGatewayManagementApi#postToConnection()</code>を行う必要があります。<br>つまり API Gateway が接続中のクライアントを知ってくれてるわけではないので、自前で管理する必要があり、そのために DynamoDB を用意しているものになります。</p><p>今回は全員参加の簡単な実装なので、DynamoDB のコネクション管理テーブルをスキャンし、全件に対して<code>ApiGatewayManagementApi#postToConnection()</code>を呼び出しています。（なんか、もっとスマートな実装できないかなぁ）</p><p><code>ApiGatewayManagementApi#postToConnection()</code>を呼び出す際に、コネクションが切断されているクライアントがありえます。先ほど「切断は呼び出されないこともあるので、注意が必要です。」と書きました通り、クライアントが切断されてもイベントが呼び出されないケースもあります。そのため DynamoDB への削除されず<code>connectionId</code>が残るケースもありえます。その場合<code>statusCode</code>が<code>410</code>のエラーが投げられるので、そのエラーが投げられた場合は DynamoDB から該当する<code>connectionId</code>を削除しておき再発防止しておきます。</p><h2 id="デプロイ-＆-実行！"><a href="#デプロイ-＆-実行！" class="headerlink" title="デプロイ ＆ 実行！"></a>デプロイ ＆ 実行！</h2><p>デプロイは Serverless Framework がしっかりやってくれるので、以下のコマンドで行えます。<br>あらかじめ AWS の Access Key の用意とプロファイルを設定しておきます。(デフォルト・プロファイルでない場合は<code>--aws-profile [your profile name]</code>と利用するプロファイル名を<code>--aws-profile</code>で指定します)</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn serverless deploy</span><br><span class="line">(省略)</span><br><span class="line">Serverless: Deploying Websockets API named "samples-apigateway-websocket-chat-dev"...</span><br><span class="line">Serverless: Websockets API named "samples-apigateway-websocket-chat-dev" with ID "6ovkt8XX" has been deployed.</span><br><span class="line">Serverless:   Websocket URL: wss://6ovkt8XX.execute-api.us-west-2.amazonaws.com/dev/</span><br><span class="line">Done in 137.90s.</span><br></pre></td></tr></table></figure><p>デプロイが完了すると、コマンドの実行結果に WebSocket の URL が出力されます。<br>その URL に対して<code>wscat</code>で接続し API Gateway WebSocket の動きを確認します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn wscat -c wss://6ovkt8XX.execute-api.us-west-2.amazonaws.com/dev/</span><br><span class="line">connected (press CTRL+C to quit)</span><br><span class="line"><span class="meta">></span></span><br></pre></td></tr></table></figure><p>接続できると<code>></code>で入力待ちになります。<code>{ "action":"sendMessage", "data":"hello world" }</code>とメッセージを送ると、チャットのコメントが帰ってきます。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~/samples-apigateway-websocket-chat$ yarn wscat -c wss://6ovkt8XX.execute-api.us-west-2.amazonaws.com/dev/</span><br><span class="line">connected (press CTRL+C to quit)</span><br><span class="line"><span class="meta">></span><span class="bash"> { <span class="string">"action"</span>:<span class="string">"sendMessage"</span>, <span class="string">"data"</span>:<span class="string">"hello world"</span> }</span></span><br><span class="line">&lt; hello world</span><br><span class="line"><span class="meta">></span></span><br></pre></td></tr></table></figure><p>複数のコンソールから接続すると、送ったコメントがすべてのコンソールに流れてきます。<br>WebSocket でリアルタイムに複数クライアントへメッセージが遅れていることが確認できます。</p><p>チャットとは名ばかりのコメントだけを送りあうだけの実装(しかも wscat によるコマンドライン)でしたが、API Gateway WebSocket の実装がつかめました。</p><p>Serverless Framework は今後の AWS CloudFormation 対応によって変わってくる部分がありますが、こんなに簡単に設定できるのでとても助かります。</p><p>WebSocket が簡単に利用できるようになったので、いろいろなアプリづくりに生かせそうで楽しみです。</p><hr><p>では、ハッピー・サーバーレス・ライフ！ ハッピー・ホリデー！！</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=API%20Gateway%20%E3%81%AE%20WebSocket%20%E3%81%A7%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%82%92%E5%AE%9F%E8%A3%85%20w/Serverless%20Framework&url=https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=API%20Gateway%20%E3%81%AE%20WebSocket%20%E3%81%A7%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%82%92%E5%AE%9F%E8%A3%85%20w/Serverless%20Framework" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2018/12/22/implement-chat-using-websocket-of-api-gateway-with-serverless-framework/" data-id="ckfm1lwp4001824nxg7j4anjh" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Serverless-Framework/" rel="tag">Serverless Framework</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/02/01/beginning-serverless-dev-with-serverless-framework-and-typescript/" title="Serverless Framework と TypeScript でサーバレス開発事始め" rel="bookmark">Serverless Framework と TypeScript でサーバレス開発事始め</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/24/serverless-weather-report-slack-bot-sora-kagami/" title="サーバレスな天気レポートの Slack ボット、「空鏡」" rel="bookmark">サーバレスな天気レポートの Slack ボット、「空鏡」</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/17/automatically-swich-environment-variables-to-working-directory-of-shell/" title="Shell の作業ディレクトリごとに自動で環境変数を設定する" rel="bookmark">Shell の作業ディレクトリごとに自動で環境変数を設定する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2017/12/07/csv-batch-can-also-realized-with-serverless-impl-using-lambda/" title="CSV ファイルのバッチ連携も AWS Lambda でサーバーレス" rel="bookmark">CSV ファイルのバッチ連携も AWS Lambda でサーバーレス</a></h3></div></li></ul></div></footer></div></article><nav id="page-nav"><a class="extend prev" rel="prev" href="/articles/page/7/">&amplaquo; 戻る</a><a class="page-number" href="/articles/">1</a><span class="space">…</span><a class="page-number" href="/articles/page/6/">6</a><a class="page-number" href="/articles/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/articles/page/9/">9</a><a class="extend next" rel="next" href="/articles/page/9/">次へ &ampraquo;</a></nav></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title category">カテゴリ</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/">お知らせ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A/">ふりかえり</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%82%A2%E3%83%97%E3%83%AA/">アプリ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9/">サーバーレス</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3/">ハッカソン</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF-OSS-Friday/">プルリク / OSS-Friday</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">レポート</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E6%9B%B8%E8%A9%95/">書評</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E9%96%8B%E7%99%BA/">開発</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/">開発環境</a><span class="category-list-count">14</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title tag">タグ</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/2018%E5%B9%B4/" rel="tag">2018年</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Asana/" rel="tag">Asana</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Auth0/" rel="tag">Auth0</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Blog/" rel="tag">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Bot/" rel="tag">Bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Browser/" rel="tag">Browser</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Chart-js/" rel="tag">Chart.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/CircleCI/" rel="tag">CircleCI</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Cookie/" rel="tag">Cookie</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Developers-Summit/" rel="tag">Developers Summit</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Git/" rel="tag">Git</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Gridsome/" rel="tag">Gridsome</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JAWS-DAYS/" rel="tag">JAWS DAYS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Lint/" rel="tag">Lint</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Material-Design/" rel="tag">Material Design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Netlify/" rel="tag">Netlify</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Node-js/" rel="tag">Node.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/OpenAPI/" rel="tag">OpenAPI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/PWA/" rel="tag">PWA</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/SPAJAM/" rel="tag">SPAJAM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Serverless-Framework/" rel="tag">Serverless Framework</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Shifter/" rel="tag">Shifter</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Slack/" rel="tag">Slack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Stripe/" rel="tag">Stripe</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Swagger/" rel="tag">Swagger</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Visual-Studio-Code/" rel="tag">Visual Studio Code</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Vue-js/" rel="tag">Vue.js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Vuetify/" rel="tag">Vuetify</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Web/" rel="tag">Web</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/WebAPI/" rel="tag">WebAPI</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/WordPress/" rel="tag">WordPress</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/draw-io/" rel="tag">draw.io</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%81%8A%E7%B5%B5%E3%81%8B%E3%81%8D%E3%83%84%E3%83%BC%E3%83%AB/" rel="tag">お絵かきツール</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%E5%9B%B3/" rel="tag">システム構成図</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/" rel="tag">セキュリティ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%83%84%E3%83%BC%E3%83%AB/" rel="tag">ツール</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title tagcloud">タグクラウド</h3><div class="widget tagcloud"><a href="/articles/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/" style="font-size:10px">セキュリティ</a><a href="/articles/tags/WebAPI/" style="font-size:11.82px">WebAPI</a><a href="/articles/tags/HTTP/" style="font-size:10.91px">HTTP</a><a href="/articles/tags/Git/" style="font-size:13.64px">Git</a><a href="/articles/tags/Browser/" style="font-size:12.73px">Browser</a><a href="/articles/tags/Web/" style="font-size:13.64px">Web</a><a href="/articles/tags/Chart-js/" style="font-size:13.64px">Chart.js</a><a href="/articles/tags/TypeScript/" style="font-size:16.36px">TypeScript</a><a href="/articles/tags/Bot/" style="font-size:10px">Bot</a><a href="/articles/tags/JAWS-DAYS/" style="font-size:11.82px">JAWS DAYS</a><a href="/articles/tags/Cookie/" style="font-size:12.73px">Cookie</a><a href="/articles/tags/Vuetify/" style="font-size:11.82px">Vuetify</a><a href="/articles/tags/Visual-Studio-Code/" style="font-size:12.73px">Visual Studio Code</a><a href="/articles/tags/WordPress/" style="font-size:13.64px">WordPress</a><a href="/articles/tags/CSS/" style="font-size:10px">CSS</a><a href="/articles/tags/Swagger/" style="font-size:10.91px">Swagger</a><a href="/articles/tags/Serverless-Framework/" style="font-size:15.45px">Serverless Framework</a><a href="/articles/tags/Stripe/" style="font-size:10px">Stripe</a><a href="/articles/tags/Nuxt-js/" style="font-size:18.18px">Nuxt.js</a><a href="/articles/tags/Netlify/" style="font-size:10.91px">Netlify</a><a href="/articles/tags/Vue-js/" style="font-size:11.82px">Vue.js</a><a href="/articles/tags/Asana/" style="font-size:11.82px">Asana</a><a href="/articles/tags/AWS/" style="font-size:13.64px">AWS</a><a href="/articles/tags/Slack/" style="font-size:10px">Slack</a><a href="/articles/tags/draw-io/" style="font-size:10px">draw.io</a><a href="/articles/tags/Shell/" style="font-size:10px">Shell</a><a href="/articles/tags/CircleCI/" style="font-size:12.73px">CircleCI</a><a href="/articles/tags/Lint/" style="font-size:13.64px">Lint</a><a href="/articles/tags/Blog/" style="font-size:10px">Blog</a><a href="/articles/tags/JAMstack/" style="font-size:20px">JAMstack</a><a href="/articles/tags/JavaScript/" style="font-size:11.82px">JavaScript</a><a href="/articles/tags/Auth0/" style="font-size:10px">Auth0</a><a href="/articles/tags/HTML/" style="font-size:12.73px">HTML</a><a href="/articles/tags/%E3%81%8A%E7%B5%B5%E3%81%8B%E3%81%8D%E3%83%84%E3%83%BC%E3%83%AB/" style="font-size:10px">お絵かきツール</a><a href="/articles/tags/SPAJAM/" style="font-size:10px">SPAJAM</a><a href="/articles/tags/Developers-Summit/" style="font-size:11.82px">Developers Summit</a><a href="/articles/tags/Shifter/" style="font-size:13.64px">Shifter</a><a href="/articles/tags/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%E5%9B%B3/" style="font-size:10px">システム構成図</a><a href="/articles/tags/Node-js/" style="font-size:13.64px">Node.js</a><a href="/articles/tags/DynamoDB/" style="font-size:13.64px">DynamoDB</a><a href="/articles/tags/GitHub/" style="font-size:10.91px">GitHub</a><a href="/articles/tags/Hexo/" style="font-size:19.09px">Hexo</a><a href="/articles/tags/%E3%83%84%E3%83%BC%E3%83%AB/" style="font-size:10px">ツール</a><a href="/articles/tags/Gridsome/" style="font-size:16.36px">Gridsome</a><a href="/articles/tags/2018%E5%B9%B4/" style="font-size:10px">2018年</a><a href="/articles/tags/PWA/" style="font-size:14.55px">PWA</a><a href="/articles/tags/OpenAPI/" style="font-size:10.91px">OpenAPI</a><a href="/articles/tags/Material-Design/" style="font-size:10.91px">Material Design</a><a href="/articles/tags/AWS-Lambda/" style="font-size:17.27px">AWS Lambda</a></div></div><div class="widget-wrap"><h3 class="widget-title popular">よく読まれている投稿</h3><div class="widget"><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" title="Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する" rel="bookmark">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2018/12/29/what-we-did-in-2018/" title="2018年の Riotz Works の活動を振り返る" rel="bookmark">2018年の Riotz Works の活動を振り返る</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/07/05/hosting-static-web-page-on-aws-with-s3-and-cloudfront/" title="AWS で静的ウェブサイトをホスティングするための構成（S3 + CloudFront）" rel="bookmark">AWS で静的ウェブサイトをホスティングするための構成（S3 + CloudFront）</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/09/20/introduce-iso-8601-time-interval-spec/" title="ISO 8601 形式で特定の期間を指定する方法" rel="bookmark">ISO 8601 形式で特定の期間を指定する方法</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/08/17/describe-bearer-scheme-in-openapi-3/" title="OpenAPI (Swagger) 3.0 で Bearer トークンの使用を定義する" rel="bookmark">OpenAPI (Swagger) 3.0 で Bearer トークンの使用を定義する</a></h3></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title recent">最近の投稿</h3><div class="widget"><ul><li><a href="/articles/lulzneko/2019/12/31/review-of-2019/">2019年の振り返り</a></li><li><a href="/articles/lulzneko/2019/12/24/first-website-with-shifter-webhooks-and-gridsome-on-netlify/">Shifter Webhooks と Gridsome で作る、最初のウェブサイト on Netlify</a></li><li><a href="/articles/lulzneko/2019/10/07/ideal-as-a-mock-server-of-webapi-jsonboxio/">Web API のモックサーバーとしても活躍、jsonbox.io</a></li><li><a href="/articles/lopburny/2019/10/07/review-my-blog-mentoring-experience/">ブログメンタリングを受けて学んだことと振り返り</a></li><li><a href="/articles/lopburny/2019/09/29/book-review-of-developing-secure-web-applications/">Web アプリのセキュリティ基礎知識を学習できる『体系的に学ぶ 安全なWebアプリケーションの作り方』を読んだ</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title archive">アーカイブ</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/12/">2019.12</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/10/">2019.10</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/09/">2019.9</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/08/">2019.8</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/07/">2019.7</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/06/">2019.6</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/05/">2019.5</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/04/">2019.4</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/03/">2019.3</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/02/">2019.2</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/01/">2019.1</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2018/12/">2018.12</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2018/02/">2018.2</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2017/12/">2017.12</a><span class="archive-list-count">2</span></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">© Since 2017<a href="https://riotz.works/">Riotz.works</a><br>投稿や発言は私的なものであり、所属する企業や組織には関係ありません。</div></div></footer></div><nav id="mobile-nav"><a class="mobile-nav-link home" href="/">Home</a><a class="mobile-nav-link slide" href="/slides">Slides</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/articles/fancybox/jquery.fancybox.css"><script src="/articles/fancybox/jquery.fancybox.pack.js"></script><script src="/articles/js/script.js"></script></div><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js?t=1601267971694").then(function(){console.log("ServiceWorker Register Successfully.")}).catch(function(e){console.error(e)})</script></body></html>