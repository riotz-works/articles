<!doctype html><html><head><meta charset="utf-8"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109297390-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-109297390-1")</script><title>Articles | Riotz.works</title><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="Fun and joy engineering activities articles by members of Riotz.works."><meta property="og:type" content="website"><meta property="og:title" content="Articles | Riotz.works"><meta property="og:url" content="https://riotz.works/articles/page/5/index.html"><meta property="og:site_name" content="Articles | Riotz.works"><meta property="og:description" content="Fun and joy engineering activities articles by members of Riotz.works."><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://riotz.works/articles/assets/logo.png"><meta property="article:author" content="Riotz.works"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://riotz.works/articles/assets/logo.png"><meta name="twitter:creator" content="@riotz_works"><link rel="alternate" href="/articles/atom.xml" title="Articles | Riotz.works" type="application/atom+xml"><link rel="icon" href="/articles/assets/favicon.ico"><link href="//fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css?family=M+PLUS+Rounded+1c&display=swap&subset=japanese" rel="stylesheet"><link href="//unicons.iconscout.com/release/v1.0.0/css/unicons.css" rel="stylesheet"><link rel="stylesheet" href="/articles/css/style.css"><meta name="generator" content="Hexo 4.1.1"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/articles/" id="logo"><img src="/articles/assets/riotz.png"></a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a><a class="main-nav-link home" href="/">Home</a><a class="main-nav-link slide" href="/slides">Slides</a></nav><nav id="sub-nav"><a id="nav-github-link" class="nav-icon" href="https://github.com/riotz-works" target="_blank" rel="noopener" title="GitHub @riotz_works"></a><a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/riotz_works" target="_blank" rel="noopener" title="Twitter @riotz_works"></a><a id="nav-rss-link" class="nav-icon" href="/articles/atom.xml" title="RSSフィード"></a><a id="nav-search-btn" class="nav-icon" title="検索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"></button><input type="hidden" name="sitesearch" value="https://riotz.works/articles"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-review-of-k9us-blog-mentee-8th-week" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" class="article-date"><time datetime="2019-05-25T15:00:00.000Z" itemprop="datePublished">2019-05-26</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A/">ふりかえり</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/">ブログメンティふりかえり８週目</a></h1></header><div class="article-entry" itemprop="articleBody"><p><a href="https://twitter.com/kakakakakku" target="_blank" rel="noopener">カック@ブロガー / k9u(@kakakakakku)さん</a>にブログメンターについていただき８週間。隔週予定のふりかえりが遅れてしまいましたがまとめます。</p><p><img src="/articles/assets/lulzneko/seminar/blog-mentor/mentor.jpg" alt=""></p><script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script><p>最初のころのふりかえりは「日々学び」でしたが、最近は激動の１ヶ月になってきたように感じます。<a href="https://twitter.com/search?q=%23%E3%83%96%E3%83%AD%E3%82%B0%E3%83%A1%E3%83%B3%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0&src=typd" target="_blank" rel="noopener">#ブログメンタリング</a>、人生をも変えてしまうのか！？(大袈裟なｗ)</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/04/01/k9us-blog-mentoring-to-lulzneko/">ブログメンティ始まる</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/04/09/review-of-k9us-blog-mentee-first-week/">ブログメンティふりかえり１週目</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/04/28/review-of-k9us-blog-mentee-4th-week/">ブログメンティふりかえり４週目</a></li><li><strong>ブログメンティふりかえり８週目</strong>(本記事)</li></ul><h2 id="ブログメンティーとしての目標設定"><a href="#ブログメンティーとしての目標設定" class="headerlink" title="ブログメンティーとしての目標設定"></a>ブログメンティーとしての目標設定</h2><p>技術系記事を以下のペースで公開する(※ このシリーズの記事は記載するがカウント外)</p><ul><li>週１回を必達とする</li><li>週２回を目標として設定する</li></ul><p>以下の記事を書き目標を達成することができました。</p><p>５週目</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/">Asana を Google Chrome でアプリウィンドウ化する</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/">Asana を Nativefier でアプリ化する</a></li></ul><p>６週目</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA のベースアプリをTypeScript対応する</a></li></ul><p>７週目</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/">Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/">TypeScript プロジェクト用サンドボックスで簡単コード検証</a></li></ul><p>８週目</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/">SPAJAM 2019 東京A予選 - ハッカソン戦記</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/">ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/">ga-analytics に Node.js 10 以上対応のプルリクを送る</a></li></ul><h2 id="各種メトリクスの推移と考察"><a href="#各種メトリクスの推移と考察" class="headerlink" title="各種メトリクスの推移と考察"></a>各種メトリクスの推移と考察</h2><p>毎週日曜日に以下のメトリクスを取得しています。こちらは達成数値のノルマとかではなく、推移を見ていただいています。</p><h3 id="記事数"><a href="#記事数" class="headerlink" title="記事数"></a>記事数</h3><p>せっかくなので追加しました。(投稿数は目標設定カウント数のみ)<br><canvas id="post" width="400" height="100"></canvas></p><script>new Chart(document.getElementById("post").getContext("2d"),{type:"line",data:{labels:["開始時","１週目","２週目","３週目","４週目","５週目","６週目","７週目","８週目"],datasets:[{label:"トータル",data:[21,25,28,31,33,36,38,40,43],backgroundColor:["rgba(200, 200, 200, .1)"]},{label:"投稿数",data:[0,3,2,3,2,2,2,2,3],backgroundColor:["rgba(255,   0,   0, .2)"]}]}})</script><table><thead><tr><th align="left"></th><th align="right">開始時</th><th align="right">１週目</th><th align="right">２週目</th><th align="right">３週目</th><th align="right">４週目</th><th align="right">５週目</th><th align="right">６週目</th><th align="right">７週目</th><th align="right">８週目</th></tr></thead><tbody><tr><td align="left">トータル</td><td align="right">21</td><td align="right">25</td><td align="right">28</td><td align="right">31</td><td align="right">33</td><td align="right">36</td><td align="right">38</td><td align="right">40</td><td align="right">43</td></tr><tr><td align="left">投稿数</td><td align="right">-</td><td align="right">3</td><td align="right">2</td><td align="right">3</td><td align="right">2</td><td align="right">2</td><td align="right">2</td><td align="right">2</td><td align="right">3</td></tr></tbody></table><h3 id="週間-PV"><a href="#週間-PV" class="headerlink" title="週間 PV"></a>週間 PV</h3><p>Google Analitycs で取得しています。<br><canvas id="pv" width="400" height="100"></canvas></p><script>new Chart(document.getElementById("pv").getContext("2d"),{type:"line",data:{labels:["開始時","１週目","２週目","３週目","４週目","５週目","６週目","７週目","８週目"],datasets:[{label:"全体",data:[232,478,355,276,305,171,309,420,700],backgroundColor:["rgba(200, 200, 200, 0.1)"]},{label:"/articles",data:[82,241,242,199,205,138,185,181,271],backgroundColor:["rgba(255, 100, 100, 0.2)"]},{label:"@lulzneko",data:[78,203,225,174,191,126,168,160,241],backgroundColor:["rgba(255,   0,   0, 0.2)"]}]}})</script><table><thead><tr><th align="left"></th><th align="right">開始時</th><th align="right">１週目</th><th align="right">２週目</th><th align="right">３週目</th><th align="right">４週目</th><th align="right">５週目</th><th align="right">６週目</th><th align="right">７週目</th><th align="right">８週目</th></tr></thead><tbody><tr><td align="left">全体</td><td align="right">232</td><td align="right">478</td><td align="right">355</td><td align="right">276</td><td align="right">305</td><td align="right">171</td><td align="right">309</td><td align="right">420</td><td align="right">700</td></tr><tr><td align="left">/articles</td><td align="right">82</td><td align="right">241</td><td align="right">242</td><td align="right">199</td><td align="right">205</td><td align="right">138</td><td align="right">185</td><td align="right">181</td><td align="right">271</td></tr><tr><td align="left">@lulzneko</td><td align="right">78</td><td align="right">203</td><td align="right">225</td><td align="right">174</td><td align="right">191</td><td align="right">126</td><td align="right">168</td><td align="right">160</td><td align="right">241</td></tr></tbody></table><h3 id="はてなブックマーク数"><a href="#はてなブックマーク数" class="headerlink" title="はてなブックマーク数"></a>はてなブックマーク数</h3><p><a href="https://hatebu-checker.net/url/" target="_blank" rel="noopener">サイト内の合計はてブ数を表示するツール｜はてブチェッカー</a>で取得しています。<br><canvas id="hatena" width="400" height="100"></canvas></p><script>new Chart(document.getElementById("hatena").getContext("2d"),{type:"line",data:{labels:["開始時","１週目","２週目","３週目","４週目","５週目","６週目","７週目","８週目"],datasets:[{label:"全体",data:[29,29,30,30,30,30,30,31,31],backgroundColor:["rgba(200, 200, 200, 0.1)"]},{label:"/articles",data:[10,10,11,11,11,11,11,12,12],backgroundColor:["rgba(255, 100, 100, 0.2)"]},{label:"@lulzneko",data:[10,10,11,11,11,11,11,12,12],backgroundColor:["rgba(255,   0,   0, 0.2)"]}]}})</script><table><thead><tr><th align="left"></th><th align="right">開始時</th><th align="right">１週目</th><th align="right">２週目</th><th align="right">３週目</th><th align="right">４週目</th><th align="right">５週目</th><th align="right">６週目</th><th align="right">７週目</th><th align="right">８週目</th></tr></thead><tbody><tr><td align="left">全体</td><td align="right">29</td><td align="right">29</td><td align="right">30</td><td align="right">30</td><td align="right">30</td><td align="right">30</td><td align="right">30</td><td align="right">31</td><td align="right">31</td></tr><tr><td align="left">/articles</td><td align="right">10</td><td align="right">10</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">12</td><td align="right">12</td></tr><tr><td align="left">@lulzneko</td><td align="right">10</td><td align="right">10</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">11</td><td align="right">12</td><td align="right">12</td></tr></tbody></table><h3 id="Twitter-フォロワー数"><a href="#Twitter-フォロワー数" class="headerlink" title="Twitter フォロワー数"></a>Twitter フォロワー数</h3><p><a href="https://twitter.com/lulzneko" target="_blank" rel="noopener">lulzneko (ラルズネコ)(@lulzneko) | Twitter</a>を見ています。</p><p><canvas id="twitter" width="400" height="100"></canvas></p><script>new Chart(document.getElementById("twitter").getContext("2d"),{type:"line",data:{labels:["開始時","１週目","２週目","３週目","４週目","５週目","６週目","７週目","８週目"],datasets:[{label:"@lulzneko",data:[158,169,170,171,172,174,176,183,184],backgroundColor:["rgba(0, 0, 0, 0)"],borderColor:["rgba(170,   0,   0, 0.2)"]}]}})</script><table><thead><tr><th align="left"></th><th align="right">開始時</th><th align="right">１週目</th><th align="right">２週目</th><th align="right">３週目</th><th align="right">４週目</th><th align="right">５週目</th><th align="right">６週目</th><th align="right">７週目</th><th align="right">８週目</th></tr></thead><tbody><tr><td align="left">@lulzneko</td><td align="right">158</td><td align="right">169</td><td align="right">170</td><td align="right">171</td><td align="right">172</td><td align="right">174</td><td align="right">176</td><td align="right">183</td><td align="right">184</td></tr></tbody></table><h2 id="気づき、学び"><a href="#気づき、学び" class="headerlink" title="気づき、学び"></a>気づき、学び</h2><h3 id="習慣化と継続性"><a href="#習慣化と継続性" class="headerlink" title="習慣化と継続性"></a>習慣化と継続性</h3><p>ブログを書くというのはとても大変。だからこそ習慣化して継続することが大事なんだなと改めて気づきます。<br>そうした中で、最初に20個のテーマを考えて、また新しいことがあったらテーマを追加していくこと、リストを更新し続けることが大切です。それによって、いつでも書くことができる状態をキープできます。基本的なことですが、テーマリストを持っていないと書き始めるハードルが上がってしまい、書く手も止まりがちになるので重要なんだなと。</p><p>また、今月は仕事が忙しく、加えてハッカソン、発表とスケジュールが厳しい状況でした。そうした中で重量級な記事だとつらくなるので状況に合わせた記事を考えることなども教わりました。継続していくにはどうするのか、記事を書くだけでなく考えることも大事だと気づかされます。こういった状況に合わせた記事のテーマを考える宿題をいただいているのですが、まだ考え中。。。難しい。</p><p>また、お話(DM)していると自然と話を膨らませてくださり、テーマリストがスゴイ量になっていきます。このような発想の膨らませ方、考え方をもっと身に付けたいです。</p><h3 id="プレゼンについても教わる！"><a href="#プレゼンについても教わる！" class="headerlink" title="プレゼンについても教わる！"></a>プレゼンについても教わる！</h3><p><a href="https://twitter.com/kakakakakku" target="_blank" rel="noopener">カック@ブロガー / k9u(@kakakakakku)さん</a>、登壇歴もスゴくプレゼンについても色々と教えてくれました。<a href="https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/">SPAJAM 2019 東京A予選</a>に参加した際には少しは実践できたかなと思いますが、教えていただいた内容を振り返りつつ、この後の発表に臨みたいです。</p><ul><li>サーバーレスなウェブフロントを実現する JAMstack -<a href="https://serverless.connpass.com/event/130509/" target="_blank" rel="noopener">Serverless Meetup Tokyo #12</a></li><li>Gridsome で作る JAMstack なサーバーレス Web Front -<a href="https://javascript-fes.doorkeeper.jp/events/90894" target="_blank" rel="noopener">初夏のJavaScript祭 in メンバーズキャリア</a></li></ul><p>教えていただいた資料</p><ul><li><a href="https://kakakakakku.hatenablog.com/entry/2017/05/08/085023" target="_blank" rel="noopener">プレゼンをするときに意識していること - kakakakakku blog</a></li><li><a href="https://kakakakakku.hatenablog.com/entry/2017/05/30/092247" target="_blank" rel="noopener">個人的な Keynote ベストプラクティス 2017 - kakakakakku blog</a></li><li><a href="https://kakakakakku.hatenablog.com/entry/2018/12/30/022732" target="_blank" rel="noopener">2018年 : 登壇を振り返る - kakakakakku blog</a></li></ul><p>そして、カックさんのプレゼンが見れるのはこちら！</p><div class="iframely-embed"><div class="iframely-responsive" style="height:140px;padding-bottom:0"><a href="https://devlove.wixsite.com/devlovex" target="_blank" rel="noopener" data-iframely-url="//cdn.iframe.ly/VVcSlii?iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script><h3 id="OSS-活動"><a href="#OSS-活動" class="headerlink" title="OSS 活動"></a>OSS 活動</h3><p>これは前回までのふりかえりでも「コミュニティへの貢献」と書きましたが、OSS などのプロダクトを利用させていただいているなかで貢献していきましょうというのは、お話をしている中でとてもメッセージを感じます。</p><p>メンターについていただいた当初からプルリクを出してみようや、<a href="https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/">ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる</a>では、記事の改修部分をオリジナルへ還元することの話も上がりました。</p><p>そうしたことから、せっかくなので OSS 活動について考えて行動すること始めてみようかなと。<br>日中に OSS の活動をすることは難しいので多くのことはできないかもしれませんが、まずは意識する日を明確に設けるということで Open Source Friday をやってみます。</p><div class="iframely-embed"><div class="iframely-responsive" style="height:140px;padding-bottom:0"><a href="https://opensourcefriday.com/?locale=ja" target="_blank" rel="noopener" data-iframely-url="//cdn.iframe.ly/9ZTFI5J?iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script><h3 id="書評をやってない"><a href="#書評をやってない" class="headerlink" title="書評をやってない"></a>書評をやってない</h3><p>書評というと硬い感じですが、書籍紹介をやっていない。本を読むのは好きなのですが最近なかなか時間が取れていない。どんどん積読してしまっています。これはテコ入れをして、ブログメンティー中にしかりと書きたいです。カックさんより「書評は書く人によって全然良さが違いますもんね！」とのことで、しっかり見てもらいたいです。テーマは決まっているので「時間を作る」をしっかりやっていきます。</p><hr><p>以上、８週目の振り返りです。</p><p>わずかとはいえ OSS 活動に手を出し始める宣言となり、まったく考えてなかったような活動まで始めるとは、まさに冒頭で書きました “<a href="https://twitter.com/search?q=%23%E3%83%96%E3%83%AD%E3%82%B0%E3%83%A1%E3%83%B3%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0&src=typd" target="_blank" rel="noopener">#ブログメンタリング</a>、人生をも変えてしまうのか！？” ですね。</p><p>新しいことに挑戦するきっかけをいただいたり、自分の可能性を広げたりとブログを通じて、とても良い変化が起きていると思います。引き続き良い変化を良い活動、良いアウトプットへつなげていけるように頑張ります。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E3%83%96%E3%83%AD%E3%82%B0%E3%83%A1%E3%83%B3%E3%83%86%E3%82%A3%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A%EF%BC%98%E9%80%B1%E7%9B%AE&url=https://riotz.works/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E3%83%96%E3%83%AD%E3%82%B0%E3%83%A1%E3%83%B3%E3%83%86%E3%82%A3%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A%EF%BC%98%E9%80%B1%E7%9B%AE" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" data-id="ckfm1lwy700bw24nx92za5vww" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Chart-js/" rel="tag">Chart.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Lint/" rel="tag">Lint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Visual-Studio-Code/" rel="tag">Visual Studio Code</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/28/review-of-k9us-blog-mentee-4th-week/" title="ブログメンティふりかえり４週目" rel="bookmark">ブログメンティふりかえり４週目</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" title="ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる" rel="bookmark">ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/10/add-hatena-bookmark-to-sns-share-link-of-hexo-used-in-blog/" title="ブログで使っている Hexo の SNS 共有リンクに「はてなブックマーク」を追加する" rel="bookmark">ブログで使っている Hexo の SNS 共有リンクに「はてなブックマーク」を追加する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/" title="JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました" rel="bookmark">JAWS DAYS 2019 にて「AWS x JAMstack なサーバーレス Web Front」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/20/pull-request-to-hexo-related-popular-posts-about-subpath-enablement/" title="hexo-related-popular-posts にサブパス対応のプルリクを送る" rel="bookmark">hexo-related-popular-posts にサブパス対応のプルリクを送る</a></h3></div></li></ul></div></footer></div></article><article id="post-pull-request-to-ga-analytics-about-support-nodejs10" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" class="article-date"><time datetime="2019-05-23T15:00:00.000Z" itemprop="datePublished">2019-05-24</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF-OSS-Friday/">プルリク / OSS-Friday</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/">ga-analytics に Node.js 10 以上対応のプルリクを送る</a></h1></header><div class="article-entry" itemprop="articleBody"><p>AWS Lambda が Node.js 10 に対応したので、Node.js 8 で作っていたプログラムの Node.js 10 対応を進めています。ところどころでエラーが出るので修正。このブログで使っているライブラリにも Node.js 10 で動かした時にエラーの出る部分があったのでプルリクを送りました。</p><p><img src="/articles/assets/lulzneko/develop/develop.jpg" alt=""></p><p>2019年5月現在、<a href="https://nodejs.org/ja/" target="_blank" rel="noopener">Node.js</a>の最新バージョンは v12 です。<a href="https://aws.amazon.com/jp/about-aws/whats-new/2019/05/aws_lambda_adds_support_for_node_js_v10/" target="_blank" rel="noopener">AWS Lambda が v10 に対応</a>。ようやくといった感じも受けますが、Node.js の LTS は v10 なので現行ともいえるでしょう。</p><p>Node.js のロードマップは、こちら<a href="https://nodejs.org/ja/about/releases/" target="_blank" rel="noopener">https://nodejs.org/ja/about/releases/</a><br><img src="/articles/assets/lulzneko/develop/pullreq/ga-analytics/01-001.svg" alt=""></p><p>AWS Lambda のバージョンアップに合わせて各プログラムのバージョンアップ対応をしています。その中で本ブログの Node.js バージョンを上げたところエラーが発生しました。せっかくなので修正とともにプルリクエストを上げます。<br>※ 本ブログは Static Site Generator の<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>を使っており、最近の Node.js v12 を使えますが、全体(= AWS Lambda を使ってるプロジェクト)に合わせて Node.js v8 を使っていました。今回も同様に v12 ではなく v10 にします。ただし検証と修正は v12 で動作するところまで確認。</p><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 8.10.0 / 10.15.3 / 12.3.0</li><li>sfarthin/ga-analytics 0.0.7</li></ul><h2 id="プルリクを出すことになった背景"><a href="#プルリクを出すことになった背景" class="headerlink" title="プルリクを出すことになった背景"></a>プルリクを出すことになった背景</h2><p>本ブログのプロジェクトを Node.js v10 で起動すると、以下のエラーが表示されます。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">username@pc:~/website$ yarn dev</span><br><span class="line">yarn run v1.15.2</span><br><span class="line">$ node -r dotenv/config node_modules/hexo-cli/bin/hexo server</span><br><span class="line">fs.js:126</span><br><span class="line">  throw new ERR_INVALID_CALLBACK(cb);</span><br><span class="line">  ^</span><br><span class="line"></span><br><span class="line">TypeError [ERR_INVALID_CALLBACK]: Callback must be a function.</span><br><span class="line">    at maybeCallback (fs.js:126:9)</span><br><span class="line">    at Object.writeFile (fs.js:1159:14)</span><br><span class="line">    at /home/username/website/node_modules/ga-analytics/module.js:89:6</span><br><span class="line">    at /home/username/website/node_modules/ga-analytics/module.js:69:7</span><br><span class="line">    at FSReqCallback.readFileAfterClose [as oncomplete] (internal/fs/.js:61:3)</span><br><span class="line">error Command failed with exit code 1.</span><br><span class="line">info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span><br></pre></td></tr></table></figure><p>プロジェクト配下の<code>node_modules/ga-analytics/module.js</code>の 89行目で<code>Callback must be a function.</code>とのこと。</p><p>インストールされた npm モジュール<a href="https://github.com/sfarthin/ga-analytics" target="_blank" rel="noopener"><code>ga-sfarthin/ga-analytics</code></a>にトラブルがあるようです。今回、直接インストールしたものではありませんが、ブログの人気記事リストを作る<a href="https://github.com/tea3/hexo-related-popular-posts" target="_blank" rel="noopener">tea3/hexo-related-popular-posts</a>plugin が使っています。</p><p>詳しくは、こちらの関連記事をご参照ください。</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/04/19/want-to-display-list-of-popular-posts-on-hexo-used-in-blog/">ブログで使っている Hexo に人気の記事リストを表示したい！</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/04/17/programmatically-access-google-analytics/">Google Analytics にプログラムでアクセスできるようにする</a></li></ul><p>問題を把握したところで重複レポートを避けるために GitHub Issue / Pull Request を確認します。どちらにも該当はありませんでした。</p><ul><li><a href="https://github.com/sfarthin/ga-analytics/issues" target="_blank" rel="noopener">Issues · sfarthin/ga-analytics</a></li><li><a href="https://github.com/sfarthin/ga-analytics/pulls" target="_blank" rel="noopener">Pull Requests · sfarthin/ga-analytics</a></li></ul><h2 id="エラーの原因特定"><a href="#エラーの原因特定" class="headerlink" title="エラーの原因特定"></a>エラーの原因特定</h2><p>では改修できるのか、プルリクを出せるか、ソースを確認します。(ファイル先頭の<code>require</code>と、後続処理も合わせて抜粋)<br>エラーログが指しているのは、下記抜粋の９行目<code>fs.writeFile(sessionFile, JSON.stringify(result));</code>です。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var googleapis 	= require('googleapis'),</span><br><span class="line">	OAuth2 		= googleapis.auth.OAuth2,</span><br><span class="line">	fs			= require("fs"),</span><br><span class="line">	_ 			= require("lodash"),</span><br><span class="line">	moment 		= require("moment");</span><br><span class="line"></span><br><span class="line">// ...(省略)</span><br><span class="line"></span><br><span class="line">		fs.writeFile(sessionFile, JSON.stringify(result));</span><br><span class="line"></span><br><span class="line">		oauth2Client.setCredentials({</span><br><span class="line">			access_token: result.access_token,</span><br><span class="line">			refresh_token: result.refresh_token</span><br><span class="line">		});</span><br></pre></td></tr></table></figure><p>この<code>fs.writeFile()</code>は Node.js の基本 API で、ファイルにデータを非同期処理で書き込みをします。非同期処理なので、ファイル書き込み処理が始まると完了を待たずに後続処理、ここでは<code>oauth2Client.setCredentials({})</code>へ進みます。<br>そしてファイルの書き込みが完了すると<code>fs.writeFile()</code>のコールバック関数が実行されます。</p><p>問題となっているエラーは<code>Callback must be a function.</code>です。ざっくり言うと「コールバックは<code>function(関数)</code>にして」です。</p><p>つまり<code>fs.writeFile()</code>にコールバックの関数を渡してほしいと。そして現状どうなっているかというと<code>fs.writeFile(sessionFile, JSON.stringify(result))</code>で、<strong>コールバック関数を渡していない</strong>です。<br>※ コールバック関数は第３または第４引数で渡します。</p><p><strong>参考情報</strong></p><ul><li><a href="https://nodejs.org/api/fs.html#fs_fs_writefile_file_data_options_callback" target="_blank" rel="noopener">File System | Node.js v12.3.1 Documentation</a></li></ul><h2 id="検証"><a href="#検証" class="headerlink" title="検証"></a>検証</h2><p>原因が分かったところで検証します。<br>今回は完全に独立したコードで検証できるので<a href="https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/">TypeScript プロジェクト用サンドボックスで簡単コード検証</a>の環境を使います。TypeScript プロジェクトですが、TypeScript は JavaScript のスーパーセットで JavaScript プロジェクトとしても動作します。検証は簡単に実行できれば、どのような環境でも大丈夫です。</p><p><code>index.ts</code>に以下のコードを書きます。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">fs.writeFile(<span class="string">'/tmp/test.txt'</span>, <span class="built_in">JSON</span>.stringify({ text: <span class="string">'test'</span>}));</span><br></pre></td></tr></table></figure><p>まずは、最新の環境 v12 で試します。<br>エラー内容は TypeScript になっていますが、エラーメッセージが出ています。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v12.3.0</span><br><span class="line">TypeError [ERR_INVALID_CALLBACK]: Callback must be a function. Received undefined</span><br></pre></td></tr></table></figure><p>私の環境 v10、メッセージが少し変わりましたがエラーです。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v10.15.3</span><br><span class="line">TypeError [ERR_INVALID_CALLBACK]: Callback must be a function</span><br></pre></td></tr></table></figure><p>これまでの環境 v8、動作します。<br>しかしながら<code>without callback is deprecated</code>、「コールバック無しは非推奨」の警告が出ています。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v8.16.0</span><br><span class="line">(node:242) [DEP0013] DeprecationWarning: Calling an asynchronous function without callback is deprecated.</span><br></pre></td></tr></table></figure><p>これでコールバック無しの呼出し方法が「v8 非推奨」が「v10 廃止、エラー」になったことがわかりました。<br>では、コールバック有りに修正すれば OK です。</p><p>検証用の<code>index.ts</code>では下記。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">fs.writeFile(<span class="string">'/tmp/test.txt'</span>, <span class="built_in">JSON</span>.stringify({ <span class="attr">text</span>: <span class="string">'test'</span>}), <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">  <span class="built_in">console</span>.error(err);</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>sfarthin/ga-analytics のコードでは下記(必要箇所のみ抜粋)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(sessionFile, <span class="built_in">JSON</span>.stringify(result), <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">	final_callback(err)</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>なお TypeScript で実装するとすぐにわかるのですが、型チェックエラーで引数が足らずコンパイルも実行もできないです。型チェック素晴らしいですね。<br><img src="/articles/assets/lulzneko/develop/pullreq/ga-analytics/01-002.png" alt=""></p><p>[補足]<br><a href="https://github.com/sfarthin/ga-analytics" target="_blank" rel="noopener"><code>sfarthin/ga-analytics</code></a>の最終更新は 2014-11-21 のバージョン 0.0.7 。当時は Node.js v6 (v8 のリリースは 2017-05-30)なので、非推奨もされてない時代です。<br>TypeScript の<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/node/v6/base.d.ts#L2765" target="_blank" rel="noopener">Node.js 定義</a>も<code>writeFile(filename: string, data: any, callback?: (err: NodeJS.ErrnoException | null) => void)</code>と<code>callback?</code>なのでオプショナルです。</p><p>それから５年間メンテが止まりつつも、実行環境で問題はなかったのかもしれません。v8 は非推奨でも動作するし、LTS でサポートもまた続いているので大きな影響が出てなかったのかもしれません。</p><h2 id="プルリクの作成"><a href="#プルリクの作成" class="headerlink" title="プルリクの作成"></a>プルリクの作成</h2><p>さっそくプルリクを作って送ります。<br><a href="https://github.com/sfarthin/ga-analytics" target="_blank" rel="noopener"><code>sfarthin/ga-analytics</code></a>のリポジトリから [Fork] で、自分のアカウントにフォークしてローカルへクローンします。<br>ボタンを押してクローンするだけなので今回は省略しますが、詳しい手順を確認したい場合はこちらをご参照ください。</p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/04/20/pull-request-to-hexo-related-popular-posts-about-subpath-enablement/#%E3%83%95%E3%82%A9%E3%83%BC%E3%82%AF%E3%81%97%E3%81%A6%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF%E4%BD%9C%E6%88%90%E3%81%AE%E7%92%B0%E5%A2%83%E7%94%A8%E6%84%8F">フォークしてプルリク作成の環境用意 - hexo-related-popular-posts にサブパス対応のプルリクを送る</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/03/13/pull-request-to-validate-typescript-about-installation-errors/#%E3%83%95%E3%82%A9%E3%83%BC%E3%82%AF%E3%81%97%E3%81%A6%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF%E4%BD%9C%E6%88%90%E3%81%AE%E7%92%B0%E5%A2%83%E7%94%A8%E6%84%8F">フォークしてプルリク作成の環境用意 - Validate TypeScript にインストールエラーの修正についてのプルリクを送る</a></li></ul><p>今回も単発のプルリクなので、１つしかない<code>master</code>ブランチへ直接コミットして上げてしまいます。<br>ただし、今回は注意点があります。</p><ul><li>インデントがタブ</li><li>空行もインデントされている</li><li>ファイル末尾に改行コードがない</li></ul><p>これを壊さないように変更しコミットする必要があります。<br>私の環境の Visual Studio Code と Eclipse は、すべて反対の設定になっているため難しいです。今回はコンソール WSL Ubuntu 18.04.1 LTS から<code>vi</code>で修正することにしました。しかし<code>vi</code>でもファイル末尾に改行コードを自動的に入れてくるので、保存する前に<code>:set binary noeol</code>を実行してから保存します。(お使いの vi/vim によって異なるかもしれません)<br><img src="/articles/assets/lulzneko/develop/pullreq/ga-analytics/01-003.png" alt=""></p><p>フォークした自分のリポジトリから [New pull request] ボタンでプルリクを作り送ります。<br><img src="/articles/assets/lulzneko/develop/pullreq/ga-analytics/01-004.png" alt=""></p><p>取り込まれますように 🙏</p><div class="iframely-embed"><div class="iframely-responsive" style="height:140px;padding-bottom:0"><a href="https://github.com/sfarthin/ga-analytics/pull/2" target="_blank" rel="noopener" data-iframely-url="//cdn.iframe.ly/teblWd5"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script><hr><p>Node.js のバージョンアップに伴いエラーが発生したのを修正するプルリクでした。今回はコーディング規約(明文化されてないけど読み取って)の部分で苦戦しました。普段のコミットも同じですが、本来変更したい部分と関係ないところに差分があると考えてしまいます。無用な差分が発生しないように変更してプルリクを出したいところです。(自分のプロジェクトだとつい許容してしまいますが、できればコミットを分けたいところ)</p><p>そして “<a href="https://opensourcefriday.com/" target="_blank" rel="noopener">オープンソース フライデー | 今週の金曜日は、利用しているお気に入りのソフトウエアを数時間助けてみよう。</a>“ に登録してみました。(typo してる。。。 ⇒ ×始めて見る　〇はじめてみる)</p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">ちょっとずつだけど、始めて見る<a href="https://t.co/6mPGDlJ6kq" target="_blank" rel="noopener">https://t.co/6mPGDlJ6kq</a><a href="https://t.co/BvRQ6KQwps" target="_blank" rel="noopener">pic.twitter.com/BvRQ6KQwps</a></p>— lulzneko (ラルズネコ) (@lulzneko)<a href="https://twitter.com/lulzneko/status/1131196885023088640?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年5月22日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>直近３ヶ月、本記事を含めて月１つのペースでプルリクを出していました。そして、ブログメンターの<a href="https://twitter.com/kakakakakku" target="_blank" rel="noopener">カック@ブロガー / k9u(@kakakakakku)さん</a>とお話をしている中で「自分が使っているプロダクトの Issues を修正するのは喜ばれることだし、自分も助かる。２倍嬉しい。」と勧められました。エラーの修正は必然なのでともかく、機能の追加改善などは自分のためだけでなくみんなのためにするべきです。前回の記事<a href="http://localhost:4000/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" target="_blank" rel="noopener">ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる</a>なども自分だけではなくプルリクで上げたほうが良かったです(後で上げます)。そうしたことから、”オープンソース フライデー” として、何かしらの OSS 活動を意識するような日にしたいと考えました。金曜日は OSS の取り組みを少しだけでもするようにします。</p><p><strong>参考情報</strong></p><ul><li><a href="https://opensourcefriday.com/?locale=ja" target="_blank" rel="noopener">オープンソース フライデー | 今週の金曜日は、利用しているお気に入りのソフトウエアを数時間助けてみよう。</a></li><li><a href="https://www.publickey1.jp/blog/17/open_soruce_friday_github.html" target="_blank" rel="noopener">「Open Source Friday」をGitHubが提唱。金曜日は自分の好きなオープンソースに貢献しよう － Publickey</a></li><li><a href="https://gihyo.jp/dev/column/newyear/2018/start-oss-development?page=1" target="_blank" rel="noopener">OSS（オープンソースソフトウェア）の開発に参加したいあなたへ：新春特別企画｜gihyo.jp … 技術評論社</a></li></ul><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=ga-analytics%20%E3%81%AB%20Node.js%2010%20%E4%BB%A5%E4%B8%8A%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF%E3%82%92%E9%80%81%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=ga-analytics%20%E3%81%AB%20Node.js%2010%20%E4%BB%A5%E4%B8%8A%E5%AF%BE%E5%BF%9C%E3%81%AE%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF%E3%82%92%E9%80%81%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/24/pull-request-to-ga-analytics-about-support-nodejs10/" data-id="ckfm1lwxb00aw24nx0uz24kfk" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Node-js/" rel="tag">Node.js</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/05/summary-of-oss-friday-activities-in-2019-05/" title="OSS-Friday 活動 - 2019年5月まとめ" rel="bookmark">OSS-Friday 活動 - 2019年5月まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/02/03/develop-hello-and-version-web-api-with-serverless-framework-and-typescript/" title="Serverless Framework と TypeScript で Hello ＆ Version の Web API を実装" rel="bookmark">Serverless Framework と TypeScript で Hello ＆ Version の Web API を実装</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/02/01/beginning-serverless-dev-with-serverless-framework-and-typescript/" title="Serverless Framework と TypeScript でサーバレス開発事始め" rel="bookmark">Serverless Framework と TypeScript でサーバレス開発事始め</a></h3></div></li></ul></div></footer></div></article><article id="post-add-article-title-to-sns-share-link-of-hexo-used-in-blog" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" class="article-date"><time datetime="2019-05-21T15:00:00.000Z" itemprop="datePublished">2019-05-22</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/">ブログで使っている Hexo の SNS 共有リンクに記事タイトルを入れる</a></h1></header><div class="article-entry" itemprop="articleBody"><p>本ブログで使っている Hexo および、デフォルトのテーマ landscape。とても汎用的で便利ですが、汎用性が高い反面細かいところは自分で作りこむ余地が多くあります。記事の下にある SNS 共有リンクについて、記事タイトルを入れる強化をはかります。</p><p><img src="/articles/assets/lulzneko/serverless/hexo/hexo.png" alt=""></p><p>これまで「<a href="https://riotz.works/articles/lulzneko/2019/04/11/improve-sns-shared-links-usability-of-hexo-used-in-blog/">SNS 共有リンクをダイアログから展開</a>」したり、「<a href="https://riotz.works/articles/lulzneko/2019/04/10/add-hatena-bookmark-to-sns-share-link-of-hexo-used-in-blog/">はてなブックのリンクを追加</a>」したりと強化してきました。<br>今回、ブログメンターの<a href="https://twitter.com/kakakakakku" target="_blank" rel="noopener">カック@ブロガー / k9u(@kakakakakku)さん</a>から、ツイートボタンにタイトルが入ってないことを教えていただき、確認したところ URL だけが入っていることが確認できました。この部分を改善します。</p><h2 id="現在の状態"><a href="#現在の状態" class="headerlink" title="現在の状態"></a>現在の状態</h2><p>まずは現在の状態を確認します。<br>記事の下まで行って [共有] リンクから [Twitter のアイコン] をクリックします。[リンクをあなたのフォロワーに共有する] ダイアログが表示されて、確かに URL だけが入っています。<br><img src="/articles/assets/lulzneko/serverless/hexo/04-01.png" alt=""></p><p>このままでは、いくら URL が Twitter Card で展開されるとはいえ、ただの URL をツイートしただけになってしまいます。また一生懸命考えて付けたタイトルは(使ってくれるかは別として)できればツイートにのっけてもらいたいものです。要改修です。</p><h2 id="改修する場所を探して修正"><a href="#改修する場所を探して修正" class="headerlink" title="改修する場所を探して修正"></a>改修する場所を探して修正</h2><p>ソースの改修する場所を探します。<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>の landscape テーマが生成している部分で、自分で書いてないので思い当たる箇所はありません。Chrome DevTools の力を借りることにします。</p><p>[共有] の [Twitter アイコン] を右クリックして [検証] を選択します。<br>Chrome DevTools が表示され<code>&lt;a></code>タグがハイライトされます。その中から全文検索用のキーワードを考えます。今回は<code>class</code>属性の<code>article-share-twitter</code>で検索すると良さそうです。<br><img src="/articles/assets/lulzneko/serverless/hexo/04-02.png" alt=""></p><p>Visual Studio Code で全文検索したところ<code>article.ejs</code>がかかりました。(残りは自分の記事と、スタイルシート)<br><img src="/articles/assets/lulzneko/serverless/hexo/04-03.png" alt=""></p><p>該当箇所を確認すると以下のコードになっています。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="https://twitter.com/intent/tweet?url=&lt;%- post.permalink %>" class="article-share-twitter" target="_blank" title="Twitter">&lt;/a></span><br></pre></td></tr></table></figure><p><code>https://twitter.com/intent/tweet</code>に、パラメーターで記事の URL を渡しているだけのようです。ここにタイトルの文字列が入れば OK ということで、Twitter の URL の仕様を確認します。</p><p><a href="https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/guides/web-intent.html" target="_blank" rel="noopener">Web Intent — Twitter Developers</a>によると、クエリーパラメーター<code>text</code>で、UTF-8 および URL エンコードされた文章を設定すれば良さそうです。また、表示されるダイアログではテキストが選択された状態になり、ユーザーが削除や編集しやすいようになっているとのこと。</p><p>他にも<code>hashtags</code>などがありますが、今回はブログ記事をツイートしてもらうためのボタンであり、何かのハッシュタグを付けてアクションするようなアプリではないので使わないことにします。この辺は投稿者さんの任意ですね。</p><p><strong>参考情報</strong></p><ul><li><a href="https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/overview" target="_blank" rel="noopener">Guides — Twitter Developers</a></li><li><a href="https://developer.twitter.com/en/docs/twitter-for-websites/tweet-button/guides/web-intent.html" target="_blank" rel="noopener">Web Intent — Twitter Developers</a></li></ul><p>改修して、下記にします。<br>クエリーパラメーター<code>text=&lt;%- encodeURI(post.title) %></code>で URL(URI) エンコードされたタイトルを入れています。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="https://twitter.com/intent/tweet?text=&lt;%- encodeURI(post.title) %>&url=&lt;%- post.permalink %>" class="article-share-twitter" target="_blank" title="Twitter">&lt;/a></span><br></pre></td></tr></table></figure><h2 id="できた！"><a href="#できた！" class="headerlink" title="できた！"></a>できた！</h2><p><img src="/articles/assets/lulzneko/serverless/hexo/04-04.png" alt=""></p><p>よく見るような感じになりました。</p><hr><p>今回は、ちょっとライトな感じの記事です。あえて書くまでもないような感じもありましたが、フレームワークやライブラリなどを使っている場合に、自分が作ってない部分の修正方法についての記事はあまりないのかなと思うと、せっかくだから残しておくことにします。(といっても、この記事をググるのは難しそうですが)</p><p>現在はデフォルトテーマに頼っていますが、ちゃんとしたボタンを記事の前後に配置したり、ボタンにカウントを表示したりしたいです。テーマもデフォルトでなく変えたいところですが、なかなか手が回らない。。。時間をとって、コツコツと改善ですね。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=%E3%83%96%E3%83%AD%E3%82%B0%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%20Hexo%20%E3%81%AE%20SNS%20%E5%85%B1%E6%9C%89%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AB%E8%A8%98%E4%BA%8B%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=%E3%83%96%E3%83%AD%E3%82%B0%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%20Hexo%20%E3%81%AE%20SNS%20%E5%85%B1%E6%9C%89%E3%83%AA%E3%83%B3%E3%82%AF%E3%81%AB%E8%A8%98%E4%BA%8B%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/22/add-article-title-to-sns-share-link-of-hexo-used-in-blog/" data-id="ckfm1lwrc002o24nx2ixp73e7" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Visual-Studio-Code/" rel="tag">Visual Studio Code</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/28/review-of-k9us-blog-mentee-4th-week/" title="ブログメンティふりかえり４週目" rel="bookmark">ブログメンティふりかえり４週目</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/26/review-of-k9us-blog-mentee-8th-week/" title="ブログメンティふりかえり８週目" rel="bookmark">ブログメンティふりかえり８週目</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/10/add-hatena-bookmark-to-sns-share-link-of-hexo-used-in-blog/" title="ブログで使っている Hexo の SNS 共有リンクに「はてなブックマーク」を追加する" rel="bookmark">ブログで使っている Hexo の SNS 共有リンクに「はてなブックマーク」を追加する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/02/24/summary-of-qa-at-jawsdays2019/" title="JAWS DAYS 2019 にて頂いた QA まとめ" rel="bookmark">JAWS DAYS 2019 にて頂いた QA まとめ</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/20/pull-request-to-hexo-related-popular-posts-about-subpath-enablement/" title="hexo-related-popular-posts にサブパス対応のプルリクを送る" rel="bookmark">hexo-related-popular-posts にサブパス対応のプルリクを送る</a></h3></div></li></ul></div></footer></div></article><article id="post-spajam-2019-tokyo-a-pre-hackathon-chronicle" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" class="article-date"><time datetime="2019-05-19T15:00:00.000Z" itemprop="datePublished">2019-05-20</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3/">ハッカソン</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/">SPAJAM 2019 東京A予選 - ハッカソン戦記</a></h1></header><div class="article-entry" itemprop="articleBody"><p>モバイルアプリ・ハッカソンの SPAJAM 2019 東京A予選に参戦してきました。<br>２日間で開催され 24時間でのアプリ開発、本選をかけての熱いハッカソンの戦記です。</p><p><img src="/articles/assets/lulzneko/hackathon/spajam-2019-pre/spajam.png" alt=""></p><p>いろいろなアウトプットがある中で、ハッカソンはとても好きです。<br>アイデア、企画設計、開発、テスト・デバッグ、プレゼンテーション、文章、チームワーク、判断に決断などと、とても多くのスキルを限られた時間の中で全力投入して形を作り上げ、それを強力なライバルたちと競い、そして打ち解けあう。</p><p>自分が発想をできないようなアイデアを見せてもらったり、新しい技術を教えてもらったり、同じ技術でも使い方使いこなしを目の当たりにしてと、多くのことを学ばせてもらえます。</p><p>また、自分自身のスキル点検というかテストを受けるよう気持ちもあります。アイデアは衰えてないか、柔軟さを失ってないか、技術力はキープできてるか、新しいものを取り込めているかなど。</p><p>そんな楽しい時間を、今回は SPAJAM という全国の猛者が競い合うハッカソンで過ごさせてもらいました。どんなイベントなのか、どんな戦いだったのかを綴ります。</p><p>とても素晴らしいイベントなので興味を持っていただければと、そしてぜひ参加して熱い戦いを楽しみましょう。</p><h2 id="SJAPAM-概要"><a href="#SJAPAM-概要" class="headerlink" title="SJAPAM 概要"></a>SJAPAM 概要</h2><p><a href="https://spajam.jp/" target="_blank" rel="noopener">SPAJAM</a>とは “「温泉でハッカソン」を合言葉に、スキルを向上するための競技と交流の場を提供する国内最高峰のハッカソン -<a href="https://spajam.jp/#scene1" target="_blank" rel="noopener">What’s SPAJAM</a>“ です。</p><p>“国内最高峰” を謳うとおり、日本全国で予選を行い、予選を勝ち抜いたチームで本戦を行うという大規模なイベントです。2019年は全国６地域７会場で予選が行われています。</p><p>本戦入賞者には豪華な賞品が出ます！<br>2019年の最優秀賞は「深セン・上海スペシャルツアー」！！<br>副賞多数も多数で去年の実績は、こちら<a href="https://spajam.jp/2018/final/result/" target="_blank" rel="noopener">結果発表 ｜ SPAJAM2018公式サイト – 温泉でハッカソン</a></p><p>ハッカソンのテーマは当日発表され、そこから24時間かけてのハッカソン勝負となります。主なスケジュールは下記。<br>１日目</p><ul><li>開場: 開会（挨拶・趣旨説明・テーマ発表）</li><li>午前: アイデアソン</li><li>午後: ハッカソン</li></ul><p>２日目</p><ul><li>午前: ハッカソン</li><li>午後: プレゼン、審査＆表彰式</li></ul><p>メンバーは１チーム５人までで、自分たちでチームを作って参戦します。<br>あらかじめチームを作って参加できるので安心です。</p><p>なお、本選出場とならないと「温泉」は楽しめません。<br>予選は協賛企業さんのオフィスを使わせていただいての開催となります。今回の東京A予選は<a href="https://gu3.co.jp/" target="_blank" rel="noopener">株式会社gumi</a>さん、新宿中央公園のお隣でした。</p><h2 id="参戦経緯"><a href="#参戦経緯" class="headerlink" title="参戦経緯"></a>参戦経緯</h2><p>もちろん、ハッカソンが好きで楽しみたいから！<br>というものありますが 2018年 SPAJAM 東京D予選で優秀賞を手にするも、本選出場ならずのリベンジ戦でもあります！！</p><p>その際の発表資料と作品は、こちら。</p><p>発表資料:<a href="https://riotz.works/slides/2018-spajam-qualification">リアルタイムの競演と参加型観戦で音楽を最高に楽しむ「ラップ､タップ､アップ🎶」</a></p><div class="slide"><iframe src="https://riotz.works/slides/2018-spajam-qualification"></iframe></div><p>作品:<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a></p><iframe src="https://riotz.works/rap-tap-app/" width="320" height="480"></iframe><p>そしてなんと、2018 東京D予選で最優秀賞を取った方が、メンバー構成は違えど今年も同じ会場という偶然。<br>さらに、現在私が受けているブログメンタリングの同期さん(他のハッカソンで優勝経験あり)も同じ会場！<br>強敵すぎるライバルたちとの、熱いハッカソンとなりました。</p><p>そして我らがチーム。</p><blockquote class="twitter-tweet" data-cards="hidden" data-lang="ja"><p lang="ja" dir="ltr">SPAJAM 東京A予選に参戦！「<a href="https://t.co/qxwHfPkw32" target="_blank" rel="noopener">https://t.co/qxwHfPkw32</a>、進撃 の PWA」始動！！<a href="https://twitter.com/hashtag/PWA?src=hash&ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#PWA</a>でモバイルアプリハッカソン、今年こそ完全勝利を手に。</p>— lulzneko (ラルズネコ) (@lulzneko)<a href="https://twitter.com/lulzneko/status/1127799462053568512?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年5月13日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">SPAJAM 参戦決った。頑張るしかない。楽しみ！！</p>— うさぎ / Riotz.works (@lopburny)<a href="https://twitter.com/lopburny/status/1127806513098121217?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年5月13日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>２人。。。そう、２人、通称「ねこ」と「うさぎ」で参戦です。<br>ふざけてたり、あまくみてるわけでなく。年明けからチーム編成とか、とくにデザイナーさんを探そうとか、たくさん考えていました。ところが「イベントでの発表の連続」「仕事のピーク」「ブログメンティー開始」とか、いろいろしてたら〆切前日💦</p><p>でも「あきらめたらそこで試合終了だよ」ですよね。たとえ２人でも本戦、全国制覇の夢はあきらめられません！参戦です！！</p><h2 id="テーマ"><a href="#テーマ" class="headerlink" title="テーマ"></a>テーマ</h2><p><img src="/articles/assets/lulzneko/hackathon/spajam-2019-pre/01.jpg" alt=""><br>テーマ「NEWS」。毎度ざっくりではありますが、今回は硬い。硬いなぁ。<br>聞いた瞬間に一瞬眩暈がしました。難しい。</p><p>なお、テーマについての説明はありません。<br>どうとらえ、どのような作品にするのかは参加者にゆだねられています。審査項目の１つ “テーマ性（テーマに沿って利用者と共感できる価値を提供できているか）-<a href="https://spajam.jp/2019/entry/" target="_blank" rel="noopener">予選概要 ｜ SPAJAM2019</a>“ がありますが、説明できればオーケーです。</p><p>今回、アイドルグループも連想されますが審査基準を満たせればオーケーだと思われます。実際に2018年本戦では “モビリティというテーマから、調味料が動くに発想を転換した点 -<a href="https://spajam.jp/2018/final/result/" target="_blank" rel="noopener">結果発表 ｜ SPAJAM2018</a>“ 他が評価され審査員特別賞を受賞されたチームがありました。</p><p>某アイドルグループの連想、やってみたかったですが詳しくないのでやめました。今考えても、いいアイデアが浮かばないので、ムリは良くないです。ハッカソン中の中間インタビューでは「某アイドルグループ」のアイデアを考えているチームもありましたが、最終発表では発表がなかったので断念してしまったのかな。見たかったので残念です。</p><h2 id="アイデアソン"><a href="#アイデアソン" class="headerlink" title="アイデアソン"></a>アイデアソン</h2><p>まずは全体でアイデアソンです。みんなで、いろいろなアイデアを出して思考の枠を広げます。こちらのフレームワーク、すごくいいですよね。<br><img src="/articles/assets/lulzneko/hackathon/spajam-2019-pre/02.jpg" alt=""></p><p>アイデアソンは各チームのテーブルで行い、時に他チームのアイデアを見て歩くようなスタイルで行いました。</p><p>最初に、この１日で心が動いたことについてのワーク。<br>あったことを書き、その時の感情を顔の絵文字キャラで表現し、気持ちを書く。何人か発表して共有。</p><p>私は「今朝、熊野神社でお参りをした。」「ハッカソンではやる気持ちが静まり落ち着いた。」でした。顔の絵文字キャラは、絵心がなさ過ぎてヤバいものを書いてしまいました。ヤバすぎるので貼るのはやめておきます。</p><p>続いてテーマ「ニュース」について、イメージや思いついたことなどを付箋で書き出し。その後、各チームのテーブルを回って共有。ニュース番組名や話題の人などいろいろ出ていました。</p><p>もう一度最初のワークのフォーマットで、テーマについて喜怒哀楽の表現。それをもって、４人の参加者とアイデア交換＆インタビュー。皆さん色々な発想をされていてすごかったです。「協賛の<a href="https://www.ai-j.jp/" target="_blank" rel="noopener">株式会社エーアイ</a>さん、提供の<a href="https://www.ai-j.jp/about/" target="_blank" rel="noopener">高品質音声合成エンジンAITalk®</a>＋ Vtuber」といったアイデアなども出ていました、</p><p>そこから上記スライドのフォーマットで、より具体化。発表して共有という流れになります。</p><p>まずは「共創」の考えで、たくさんのアイデアが出ますのでアイデアが浮かばずに終了ということはないので、安心して参加できます。</p><p>去年はアイデアソンの時間はチームとばらけて作業し、できあがった資料や喜怒哀楽シートなどが張り出されていましたが、今年はチームでやり張り出しはなかったです。張り出したほうがいいのに、どうしたんだろう。聞けばよかった。(実際に去年の予選で優秀賞とったチームが、最後まで張り出しをみて悩んでギリギリでアイデアが作れたと発表してました)</p><h2 id="ハッカソン！"><a href="#ハッカソン！" class="headerlink" title="ハッカソン！"></a>ハッカソン！</h2><p>アイデアソンが終わったらハッカソン開始。ここからは「競争」です。<br>ちょうど、お昼なので各チーム食事へ向かいながらアイデアを検討。私たちもファミレスに入ってアイデア練り。幸いにも昼食時点で方向性も決まり、会場に戻ってすぐにコーディングへ。２人だから、どんどん進めないと間に合いません。</p><p>午後はひたすらコーディングを進めましたが、何も準備してないし、人手も足りないのでベース部分の作成で時間をとってしまいました。基本的には慣れている Nuxt.js PWA と AWS Lambda で Web API の構成です。</p><p>開場は20時まで、それ以降はメンバーの家なり宿泊施設なりで作業です。複数日での開催は宿泊をどうするのか考えておく必要があります。また SPAJAM 本戦は会場が宿泊施設で主催者提供です。(♨ 温泉いいなぁ！)</p><p>予想されていたことではありましたが、結局徹夜。ちゃんと寝ないと体にこたえるので良くないのだけど。</p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">ハッカソンの徹夜開発のおともは #22 「Trello があるので眠れない」 でした 😆<a href="https://t.co/hjwarZksHw" target="_blank" rel="noopener">https://t.co/hjwarZksHw</a></p>— lulzneko (ラルズネコ) (@lulzneko)<a href="https://twitter.com/lulzneko/status/1130317980523409408?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">2019年5月20日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>意識高いポッドキャストで、意識(こっちの場合は睡眠不足による意識不明のほうの意識)を失わないよう高める感じで。とても面白かったです。夜間の開発とかはポッドキャスト(ラジオがやってるならラジオも)が良さそうです。</p><p>そして夜明け頃に問題発生！肝心の機能が AWS Lambda で処理しきれない😱<br>各種パラメーターを最大にしても時間内に処理が終わらない。急遽 DynamoDB Streams を併用する方向に転換するも、こちらも処理しきれず。</p><p>やりたかったことは形態素解析です。処理能力不足なのか、情報量が多いのか、設定が悪いのか、とにかく処理時間がかかって機能させられませんでした。タイミング的にも、人手的にも厳しい状況でした。悔しいな。(今後、ちゃんと調査して再実装します。お金の力でクラウドとかに逃げる手もありますが、それだとサービスの継続が厳しいので難しいところです。)</p><p>この時点でプレゼン資料は未着手なので、泣く泣く私はプレゼン側へ作業転換となりました。まだ他にも必要な機能が残っており「うさぎ」１人での実装では間に合わない部分が出てしまうことに。</p><h2 id="発表！「📰NEWʑ-Link」！！"><a href="#発表！「📰NEWʑ-Link」！！" class="headerlink" title="発表！「📰NEWʑ Link」！！"></a>発表！「📰NEWʑ Link」！！</h2><p>できあがった作品は「パーソナルニュースの配信と交換によって爆速で仲良くなるアプリ「📰NEWʑ Link」」です！！</p><div class="slide"><iframe src="https://riotz.works/slides/2019-spajam-qualification"></iframe></div>https://riotz.works/slides/2019-spajam-qualification<p>テーマ「NEWS」に対して、私たちは「個人がニュースを発信し、嬉しい楽しいの思いを広げてつなげていきたい」というコンセプトに設定しました。「１億総メディア時代」個人がニュースを発信、その中でもパーソナルで嬉しくなるニュースを扱いたいと考えました。</p><p>スライド２ページ目ですが、ここ１週間のことなのですが、見ててほっこり、見てるこっちに嬉しくなるような TL が流れてました。世の中には楽しいパーソナルなニュースがあふれています。</p><p>そのニュースをつなげ、嬉しい楽しいの輪が広がり、そしてまた新しいニュースが生み出され発信されていく。そんな世界観を作り出すアプリです。</p><p>そしてお互いの興味が重なる部分、それが共感であり、人は同じようなことに共感している人と仲良くなりやすいというのがあります。そこに着目し、お互いのニュースを交換し共通点を見つけ出して表示することで親密度を上げらられ、仲良くなるきっかけを作り出せるのではないかと考えました。</p><p>こちらは、まだ打ち解けきれてないところで使ったり、グループに初対面の人が入った時や、会議や研修のアイスブレイクなどを想定しています。このニュースの交換は当初<a href="https://developer.mozilla.org/ja/docs/Web/API/MozNFC" target="_blank" rel="noopener">Web NFC</a>を使う予定でしたが、時間切れとなってしまい QR コードとなりました。<br>(ちょうど別件で Web NFC が欲しくて勉強する予定でしたが、ぶつけ本番となってしまった)</p><p>アーキテクチャは以下ですが、詳細記事を書きます。</p><ul><li>Nuxt.js の PWA。JAMstack になります。</li><li>サーバーサイドは AWS で、サーバーレス(API Gateway, AWS Lambda, DynamoDB)。</li></ul><h2 id="審査＆結果発表"><a href="#審査＆結果発表" class="headerlink" title="審査＆結果発表"></a>審査＆結果発表</h2><p>残念ながら、受賞には至りませんでした。</p><p>「NEWS」というテーマにアイデアが追い付かなかったのと、技術の引き出し不足でした。</p><p>何とかアイデアを絞り出しアプリを作ったものの、こうして振り返ると「個人がニュースを発信したくなる」としているのに、その仕掛けが入っていないと、すぐに思いつくレベルで練り切れてないのがわかります。いろいろなテーマに対しても柔軟に対応できる発想力をもっと鍛えねば。。。</p><p>最優秀賞は、去年の同じ予選の覇者さん。もう３回連続で予選最優秀賞なのだとか。すごい！！</p><p>そしてブログメンティーの同期さんは、優秀賞。すばらしい！！さすがハッカソンでの優勝経験者。すごいです。</p><p>また、他の参加者さんもステキな作品ばかりで、アイデアも実装力も感心感嘆するばかりでした。またどこかのハッカソンでお手合わせしましょう。２日間、ありがとうございました。</p><p><a href="https://spajam.jp/2019/entry/tokyo-a/" target="_blank" rel="noopener">東京A予選 -結果発表 ｜ SPAJAM2019公式サイト – 温泉でハッカソン</a></p><div class="iframely-embed"><div class="iframely-responsive" style="height:140px;padding-bottom:0"><a href="https://spajam.jp/2019/entry/tokyo-a/" target="_blank" rel="noopener" data-iframely-url="//cdn.iframe.ly/bCDpwga?iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script><h2 id="写真"><a href="#写真" class="headerlink" title="写真"></a>写真</h2><p><img src="/articles/assets/lulzneko/hackathon/spajam-2019-pre/03.jpg" alt=""><br>左上、新宿中央公園と三連ビル。<br>中央、勝利のビル！？見た時に勝利を確信したけど、みんな見てるって。<br>右上、会場案内。<br>下段、協賛のモンテールさん提供のお菓子。ごちそうさまでした！</p><hr><p>最高に楽しい２日間！！。レベルの高い人たちと戦うことができ楽しかったし、賞は取れなかったけど、現在持てる力はすべて投入できました。</p><p>反省点は多々あるものの、総じて満足のいく結果でした。<br>また次のハッカソンで反省点を活かし、さらなる技術力をつけて来年の SPAJAM にも挑戦します！！</p><p>ぜひハッカソンの場で一緒に楽しみましょう♪</p><p>また、アプリは早めに改修を終えて公開できるようにします。<br>技術パートについては、ブログにします。</p><hr><p>ところで、そもそも、このアプリ、ハッカソンへ参加する前に必要だったのではないだろうか 🤔<br>爆速で仲良くなって、SPAJAM のメンバーになってもらうために。。。 😇</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=SPAJAM%202019%20%E6%9D%B1%E4%BA%ACA%E4%BA%88%E9%81%B8%20-%20%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3%E6%88%A6%E8%A8%98&url=https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=SPAJAM%202019%20%E6%9D%B1%E4%BA%ACA%E4%BA%88%E9%81%B8%20-%20%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3%E6%88%A6%E8%A8%98" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/20/spajam-2019-tokyo-a-pre-hackathon-chronicle/" data-id="ckfm1lww4009k24nxbdiw9s4q" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/SPAJAM/" rel="tag">SPAJAM</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/15/use-of-vue-components-in-nuxtjs-and-cross-call-with-it/" title="Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする" rel="bookmark">Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/08/21/made-presentation-about-shifter-with-ssg-at-shiftup-vol5/" title="Shiftup! JP_Getshifter Vol5！ にて「Shifter ＋ SSG の世界」について発表をしました" rel="bookmark">Shiftup! JP_Getshifter Vol5！ にて「Shifter ＋ SSG の世界」について発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/01/made-presentation-about-jamstack-with-gridsome-at-javascript-matsuri/" title="初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました" rel="bookmark">初夏のJavaScript祭 in メンバーズキャリアにて「Gridsome で作る JAMstack なサーバーレス Web Front」の発表をしました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/03/demo-app-implementation-commentary-presented-at-javascript-matsuri/" title="初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説" rel="bookmark">初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説</a></h3></div></li></ul></div></footer></div></article><article id="post-easy-poc-with-sandbox-for-typescript-project" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" class="article-date"><time datetime="2019-05-16T15:00:00.000Z" itemprop="datePublished">2019-05-17</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E9%96%8B%E7%99%BA/">開発</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/">TypeScript プロジェクト用サンドボックスで簡単コード検証</a></h1></header><div class="article-entry" itemprop="articleBody"><p>TypeScript を使うと JavaScript のコードに型を導入することができ、コードの安全性や生産性を高めることができます。いっぽうで TypeScript は JavaScript にコンパイルしてから実行する必要があり、ちょっとしたコードの確認をするにしても一手間かかります。<br>そこで検証を簡単にするため、プロジェクト内のファイル変更を監視し、ファイルの変更があったら自動的に再コンパイル＆実行してくれる環境を作ります。</p><p><img src="/articles/assets/lulzneko/develop/develop.jpg" alt=""></p><p>TypeScript では、ちょっとしたコードを試したいときでも<code>tsc</code>でコンパイルして<code>node</code>で実行してと、コンソールでの作業が必要となります。コードの動きを試したかったり、ネットで見つけたおもしろいコードを動かしたいといっただけでも手間がかかります。<br>今回は TypeScript 用のサンドボックス・プロジェクトを用意して、手軽にコードを試せるようにします。(サンドボックスというとセキュリティモデル的な感じもしますが、今回はお砂場遊び的な感覚。最近はプレイグラウンドと言う？)</p><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 12.2.0</li><li>Yarn 1.15.2</li><li>TypeScript 3.4.5</li></ul><h2 id="TypeScript-プロジェクトの作成"><a href="#TypeScript-プロジェクトの作成" class="headerlink" title="TypeScript プロジェクトの作成"></a>TypeScript プロジェクトの作成</h2><p>いろいろなモジュールが組み合わさるので、順を追って作っていきます。<br>まずは基本となる TypeScript プロジェクトを作成します。</p><p>プロジェクトのディレクトリを作成し<code>/package.json</code>ファイルを作ります。(今回は<code>sandbox</code>という名前のディレクトリ)</p><ul><li><code>devDependencies</code>は、常に最新版のモジュールを使いたいためにバージョンは<code>"*"</code>としています。</li><li><code>scripts: clean</code>は、最新のモジュールを使いやすいように<code>node_modules</code>などを削除します。OS に依存しないよう<code>npx rimraf</code>で削除しています。<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"sandbox"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: {},</span><br><span class="line">  <span class="attr">"devDependencies"</span>: {</span><br><span class="line">    <span class="attr">"@types/node"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="attr">"typescript"</span>: <span class="string">"*"</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"scripts"</span>: {</span><br><span class="line">    <span class="attr">"clean"</span>: <span class="string">"npx rimraf yarn.lock node_modules dist"</span>,</span><br><span class="line">    <span class="attr">"setup"</span>: <span class="string">"yarn clean && yarn install --ignore-optional"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><p>同じくプロジェクト直下に<code>tsconfig.json</code>を作ります。<br>こちらは普段使う TypeScript の設定に合わせておくとよいでしょう。今回は<code>esnext</code>で最新仕様を使い、<code>"strict": true</code>でチェックを厳しくしています。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="string">"compilerOptions"</span>: {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Basic Options */</span></span><br><span class="line">    <span class="string">"target"</span>: <span class="string">"esnext"</span>,                       <span class="comment">/* Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017','ES2018' or 'ESNEXT'. */</span></span><br><span class="line">    <span class="string">"module"</span>: <span class="string">"esnext"</span>,                       <span class="comment">/* Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'. */</span></span><br><span class="line">    <span class="string">"outDir"</span>: <span class="string">"./dist"</span>,                       <span class="comment">/* Redirect output structure to the directory. */</span></span><br><span class="line">    <span class="string">"removeComments"</span>: <span class="literal">true</span>,                   <span class="comment">/* Do not emit comments to output. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strict Type-Checking Options */</span></span><br><span class="line">    <span class="string">"strict"</span>: <span class="literal">true</span>,                           <span class="comment">/* Enable all strict type-checking options. */</span></span><br><span class="line">    <span class="string">"noUnusedLocals"</span>: <span class="literal">true</span>,                   <span class="comment">/* Report errors on unused locals. */</span></span><br><span class="line">    <span class="string">"noUnusedParameters"</span>: <span class="literal">true</span>,               <span class="comment">/* Report errors on unused parameters. */</span></span><br><span class="line">    <span class="string">"noImplicitReturns"</span>: <span class="literal">true</span>,                <span class="comment">/* Report error when not all code paths in function return a value. */</span></span><br><span class="line">    <span class="string">"noFallthroughCasesInSwitch"</span>: <span class="literal">true</span>,       <span class="comment">/* Report errors for fallthrough cases in switch statement. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Module Resolution Options */</span></span><br><span class="line">    <span class="string">"moduleResolution"</span>: <span class="string">"node"</span>,               <span class="comment">/* Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6). */</span></span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"./"</span>,                          <span class="comment">/* Base directory to resolve non-absolute module names. */</span></span><br><span class="line">    <span class="string">"paths"</span>: { <span class="string">"~/*"</span>: [ <span class="string">"./src/*"</span> ] },        <span class="comment">/* A series of entries which re-map imports to lookup locations relative to the 'baseUrl'. */</span></span><br><span class="line">    <span class="string">"esModuleInterop"</span>: <span class="literal">true</span>,                  <span class="comment">/* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies 'allowSyntheticDefaultImports'. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Experimental Options */</span></span><br><span class="line">    <span class="string">"experimentalDecorators"</span>: <span class="literal">true</span>,           <span class="comment">/* Enables experimental support for ES7 decorators. */</span></span><br><span class="line">    <span class="string">"emitDecoratorMetadata"</span>: <span class="literal">true</span>,            <span class="comment">/* Enables experimental support for emitting type metadata for decorators. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Additional Options */</span></span><br><span class="line">    <span class="string">"forceConsistentCasingInFileNames"</span>: <span class="literal">true</span>, <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">    <span class="string">"newLine"</span>: <span class="string">"LF"</span>,                          <span class="comment">/* Use the specified end of line sequence to be used when emitting files: "crlf" (windows) or "lf" (unix). */</span></span><br><span class="line">    <span class="string">"resolveJsonModule"</span>: <span class="literal">true</span>,                <span class="comment">/* Allows for importing, extracting types from and generating .json files. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Specify library files to be included in the compilation. */</span></span><br><span class="line">    <span class="string">"lib"</span>: [</span><br><span class="line">      <span class="string">"esnext"</span></span><br><span class="line">    ]</span><br><span class="line">  },</span><br><span class="line">  <span class="string">"include"</span>: [ <span class="string">"./src/**/*.ts"</span>, <span class="string">"./test/**/*.ts"</span> ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>これで<code>/src</code>ディレクトリ以下の TypeScript ファイルをコンパイルして実行する環境ができました。<br><code>/src/index.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello World !'</span>);</span><br></pre></td></tr></table></figure><p>コンパイルして実行。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn tsc -p .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> node dist/index.js</span></span><br><span class="line">Hello World !</span><br></pre></td></tr></table></figure><h2 id="ts-node-で-TypeScript-を直接実行"><a href="#ts-node-で-TypeScript-を直接実行" class="headerlink" title="ts-node で TypeScript を直接実行"></a>ts-node で TypeScript を直接実行</h2><p>コンパイルの手間をなくして、TypeScript をコンソールから直接実行できるようにします。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add -D ts-node@* tsconfig-paths@*</span></span><br></pre></td></tr></table></figure><p><code>/package.json</code>に以下の<code>start</code>スクリプトを追加します。(<code>scripts</code>のみ抜粋)</p><ul><li><code>ts-node</code>で<code>src/index.ts</code>を実行。(以降、プログラム実行の起点は<code>index.ts</code>になります)</li><li>TypeScript の alias path を<code>ts-node</code>で使えるように<code>-r tsconfig-paths/register</code>を登録します。<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"scripts"</span>: {</span><br><span class="line">    <span class="attr">"clean"</span>: <span class="string">"npx rimraf yarn.lock node_modules dist"</span>,</span><br><span class="line">    <span class="attr">"setup"</span>: <span class="string">"yarn clean && yarn install --ignore-optional"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"ts-node -r tsconfig-paths/register src/index.ts"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><p>実行！新たに１行追加しましたが<code>tsc</code>なしで動作します。また先ほど作られた<code>dist</code>ディレクトリは削除して大丈夫です。<br><code>/src/index.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello World !'</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello TypeScript !!'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn start</span></span><br><span class="line">Hello World !</span><br><span class="line">Hello TypeScript !!</span><br></pre></td></tr></table></figure><h2 id="nodemon-でファイルの変更を検知して-TypeScript-を直接実行"><a href="#nodemon-でファイルの変更を検知して-TypeScript-を直接実行" class="headerlink" title="nodemon でファイルの変更を検知して TypeScript を直接実行"></a>nodemon でファイルの変更を検知して TypeScript を直接実行</h2><p>さらにファイルの変更を検出して、自動的に<code>ts-node</code>を実行できるようにします。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add -D nodemon@*</span></span><br></pre></td></tr></table></figure><p><code>/package.json</code>の<code>start</code>スクリプトを修正します。(<code>scripts</code>のみ抜粋)</p><ul><li><code>nodemon -w src</code>で、<code>nodemon</code>から起動し<code>src</code>ディレクトリを監視します</li><li><code>-x ts-node</code>で、<code>nodemon</code>から実行するプログラム<code>ts-node</code>を指定しています<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"scripts"</span>: {</span><br><span class="line">    <span class="attr">"clean"</span>: <span class="string">"npx rimraf yarn.lock node_modules dist"</span>,</span><br><span class="line">    <span class="attr">"setup"</span>: <span class="string">"yarn clean && yarn install --ignore-optional"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"nodemon -w src -x ts-node -r tsconfig-paths/register src/index.ts"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><p>実行！今回は<code>yarn start</code>から先に始めます。<br>先ほどまでの Hello World, TypeScript がコンソールに表示され、その後に<code>nodemon</code>が変更待ちをしている状態になります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn start</span></span><br><span class="line">...(省略)</span><br><span class="line">Hello World !</span><br><span class="line">Hello TypeScript !!</span><br><span class="line">[nodemon] clean exit - waiting for changes before restart</span><br></pre></td></tr></table></figure><p>ここで<code>/src/index.ts</code>を変更し、保存します。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello World !'</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello TypeScript !!'</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">'Hello Sandbox Project !!!'</span>);</span><br></pre></td></tr></table></figure><p>するとファイルの変更を検知して、コンソールに新しい結果が自動的に出力されます。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...(省略)</span><br><span class="line">[nodemon] restarting due to changes...</span><br><span class="line">[nodemon] starting `ts-node -r tsconfig-paths/register -r dotenv/config src/index.ts`</span><br><span class="line">Hello World !</span><br><span class="line">Hello TypeScript !!</span><br><span class="line">Hello Sandbox Project !!!</span><br></pre></td></tr></table></figure><h2 id="コードの検証で利用"><a href="#コードの検証で利用" class="headerlink" title="コードの検証で利用"></a>コードの検証で利用</h2><p>実際にコードの検証で使ってみます。</p><p>最近気になったのが、こちら<a href="https://qiita.com/kai_kou/items/b4ac2d316920e08ac75a" target="_blank" rel="noopener">ソート可能なUUID互換のulidが便利そう - Qiita</a>の記事。<br>よく UUID v4 でランダムな ID 発行を使っています。それに対してソート可能なランダムな ID 発行できるというのは興味深いです。記事は Python ですが Node.js/TypeScript にも<a href="https://github.com/ulid/javascript" target="_blank" rel="noopener">ulid/javascript</a>モジュールがあります。</p><p>モジュールを導入し、サンドボックス・プロジェクトを起動しておきます。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add uuid ulid</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn add -D @types/uuid</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn start</span></span><br></pre></td></tr></table></figure><p>単なるコンソール出力ですがコードを書いて保存するだけで結果が見れます。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { ulid } <span class="keyword">from</span> <span class="string">'ulid'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> uuid <span class="keyword">from</span> <span class="string">'uuid'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`ULID: <span class="subst">${ ulid() }</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`UUID: <span class="subst">${ uuid.v4() }</span>`</span>);</span><br></pre></td></tr></table></figure><p>ランダムな値を生成するので保存するたびに変わるのがわかります。<br>“また UUID との 128 ビット互換性” ですが、表現方法は異なるようです。ソートの必要があるかはシステム次第ですが、文字数が詰まるのは良さそうです。また TypeScript 対応されているのも Good！</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ULID: 01DB2S8RCY1EM7XBJG6P6A2KFE</span><br><span class="line">UUID: 67d6e72b-97d9-4a65-ac92-35c476e02f7b</span><br></pre></td></tr></table></figure><p>もうひとつ、こちら<a href="https://qiita.com/yagi_suke/items/2848c8981ea6d9f26587" target="_blank" rel="noopener">日付時刻操作ライブラリをmomentからdayjsへ乗り換えた - Qiita</a>の記事。</p><p>普段、日時を扱う場合には Moment.js を使っていますが、もっと軽量の<a href="https://github.com/iamkun/dayjs" target="_blank" rel="noopener">iamkun/dayjs</a>があるとのこと。<br>サーバサイドの開発では軽量に越したことはありませんがシビアに考えることは少ないですが、フロントでは大事なポイントです。</p><p>さっそくモジュールを導入し、サンドボックス・プロジェクトを起動しておきます。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add dayjs moment</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn start</span></span><br></pre></td></tr></table></figure><p>ここではコードをまとめて書いていますが、保存しながら書き足している感じで作業しています。コーディングしながら<code>Ctrl + S</code>して、コンソールが流れている間に次のコードといった感じです。<br>デフォルトのタイムゾーンとフォーマットが異なるものの、通常は ISO 文字列で使ったり、フォーマットのテンプレートを指定したりするので問題はないでしょう。2KB の軽さは魅力的です。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">'dayjs'</span>;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Day.js:    <span class="subst">${ dayjs() }</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Moment.js: <span class="subst">${ moment() }</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Day.js:    <span class="subst">${ dayjs().unix() }</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Moment.js: <span class="subst">${ moment().unix() }</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Day.js:    <span class="subst">${ dayjs().toISOString() }</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.debug(<span class="string">`Moment.js: <span class="subst">${ moment().toISOString() }</span>`</span>);</span><br></pre></td></tr></table></figure><p>徐々にコンソール出力が増えていくのを確認しながら、動きの差異などを確認しています。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Day.js:    Fri, 17 May 2019 13:52:02 GMT</span><br><span class="line">Moment.js: Fri May 17 2019 22:52:02 GMT+0900</span><br><span class="line">Day.js:    1558101122</span><br><span class="line">Moment.js: 1558101122</span><br><span class="line">Day.js:    2019-05-17T13:52:02.637Z</span><br><span class="line">Moment.js: 2019-05-17T13:52:02.637Z</span><br></pre></td></tr></table></figure><hr><p>以上、ちょっとしたコードの検証に使えるサンドボックス、お砂場プロジェクトでした。</p><p>このようなプロジェクトを１つ作っておくと、TypeScript で型を調べたり、新しいライブラリの使い方を確認したりといった際に便利です。</p><p>nodemon まで入ったところで Git にコミットしておくと、散らかってもクリーンな環境へ簡単に戻せます。<br>私は AWS Lambda で環境変数を使うことが多いので、さらに<a href="https://github.com/motdotla/dotenv" target="_blank" rel="noopener">motdotla/dotenv</a>も追加しています。また、TSLint もかけています。また Strict なコーディングの確認や練習のために<a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener">TSLint</a>も設定しています。（ESLint へ引っ越さないと💦）<br>ソースはこちら<a href="https://github.com/lulzneko/sandbox" target="_blank" rel="noopener">lulzneko/sandbox</a></p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=TypeScript%20%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%94%A8%E3%82%B5%E3%83%B3%E3%83%89%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%A7%E7%B0%A1%E5%8D%98%E3%82%B3%E3%83%BC%E3%83%89%E6%A4%9C%E8%A8%BC&url=https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=TypeScript%20%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%94%A8%E3%82%B5%E3%83%B3%E3%83%89%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%A7%E7%B0%A1%E5%8D%98%E3%82%B3%E3%83%BC%E3%83%89%E6%A4%9C%E8%A8%BC" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/17/easy-poc-with-sandbox-for-typescript-project/" data-id="ckfm1lwx100ai24nx1se643fr" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Lint/" rel="tag">Lint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/02/01/beginning-serverless-dev-with-serverless-framework-and-typescript/" title="Serverless Framework と TypeScript でサーバレス開発事始め" rel="bookmark">Serverless Framework と TypeScript でサーバレス開発事始め</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/24/serverless-weather-report-slack-bot-sora-kagami/" title="サーバレスな天気レポートの Slack ボット、「空鏡」" rel="bookmark">サーバレスな天気レポートの Slack ボット、「空鏡」</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/03/28/thinking-about-prefer-function-over-method-rule-of-tslint/" title="TSLint の prefer-function-over-method ルールについて悩む" rel="bookmark">TSLint の prefer-function-over-method ルールについて悩む</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2018/02/03/develop-hello-and-version-web-api-with-serverless-framework-and-typescript/" title="Serverless Framework と TypeScript で Hello ＆ Version の Web API を実装" rel="bookmark">Serverless Framework と TypeScript で Hello ＆ Version の Web API を実装</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/05/summary-of-oss-friday-activities-in-2019-05/" title="OSS-Friday 活動 - 2019年5月まとめ" rel="bookmark">OSS-Friday 活動 - 2019年5月まとめ</a></h3></div></li></ul></div></footer></div></article><article id="post-deploy-nuxtjs-pwa-base-app-to-github-pages" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" class="article-date"><time datetime="2019-05-12T15:00:00.000Z" itemprop="datePublished">2019-05-13</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/">Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする</a></h1></header><div class="article-entry" itemprop="articleBody"><p>Nuxt.js を使うことで手軽に PWA なアプリを作ることができます。そして開発した PWA を世に出すためには、サーバー環境へデプロイする必要があります。Nuxt.js を SPA の JAMstack な作りにしている場合は、ウェブサイトをホスティングできる環境であれば、どこでも大丈夫です。今回は GitHub Pages でホスティングをします。</p><p><img src="/articles/assets/lulzneko/develop/nuxtjs/nuxtjs.png" alt=""></p><p>前回までの実装で<a href="https://ja.nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>の<a href="https://developer.mozilla.org/ja/docs/Web/Progressive_web_apps" target="_blank" rel="noopener">PWA</a>with<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a>ができました。アプリとしての機能はまったくないですが、やはりデプロイして実際にスマートフォンからアクセスしてみたいところです。今回は簡単にデプロイできる GitHub Pages でホスティングします。また、一手間かかりますが CircleCI とも連携して、アプリのソース管理とホスティングを同じリポジトリで行い、ソースコードを変更したら自動的にビルド＆デプロイする方法も紹介します。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></li><li><a href="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></li><li><strong>Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする</strong>(本記事)</li></ul><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 12.2.0</li><li>Yarn 1.15.2</li><li>Nuxt.js 2.6.3</li><li>開始時のアプリソース<a href="https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.2" target="_blank" rel="noopener">https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.2</a></li></ul><h2 id="GitHub-Pages-へデプロイ"><a href="#GitHub-Pages-へデプロイ" class="headerlink" title="GitHub Pages へデプロイ"></a>GitHub Pages へデプロイ</h2><p><a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>は、ソースコード管理<a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a>のホスティングサービス<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>が提供する、ウェブサイト・ホスティングの機能です。<br>ユーザーや組織のウェブサイト、またはアプリなどのプロジェクト・ウェブサイトを公開できます。GitHub Pages はプログラムなどを実行できませんが、静的なサイトを手軽に公開できます。</p><p>まず GitHub にホスティング用のリポジトリを作成します。<br>[リポジトリ名] は、任意の名前です。 (今回は<code>pwa-base-app</code>としました)<br>※ プロジェクトサイトを想定しています。ユーザーまたは組織サイト(リポジトリ名が<code>username.github.io</code>のパターン)の場合は設定が異なるので各項目で注釈を入れます。ご注意ください。</p><p>リポジトリをクローンしてローカルの開発ディレクトリに、アプリのソースをコピーしておきます。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/20.png" alt=""></p><p>GitHub リポジトリの [Settings] から GitHub Pages を有効にします。</p><ul><li>[develop] は<code>master branch</code>を選択します<br><img src="/articles/assets/lulzneko/develop/nuxtjs/21.png" alt=""></li></ul><p><code>nuxt.config.ts</code>に以下の設定を追加します。(必要箇所のみ抜粋)</p><ul><li><code>build: publicPath</code>は、CSS や JS などが置かれるディレクトリでデフォルトの<code>_nuxt</code>の<code>_</code>始まりが GitHub Pages で使えないため変更します。(<code>_</code>で始まらなければ任意の文字列で大丈夫です)</li><li><code>router: base</code>は、GitHub Pages のプロジェクトサイトがサブパスのリポジトリ名に配置されるので<code>[リポジトリ名]</code>を設定します。<br>※ ユーザーまたは組織サイトの場合はドメイン直下に配置されるため<code>router: base</code>の設定は不要です<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config: NuxtConfiguration = {</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line"></span><br><span class="line">  build: {</span><br><span class="line">    publicPath: <span class="string">'/static/'</span>,</span><br><span class="line">    extend(config, ctx) {</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  router: {</span><br><span class="line">    base: <span class="string">'/pwa-base-app/'</span></span><br><span class="line">  },</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li></ul><p>GitHub Pages デプロイ用のモジュールを導入します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add -D gh-pages</span></span><br></pre></td></tr></table></figure><p>※ npm の場合<code>npm i -D gh-pages</code></p><p>デプロイの実行！<br>以下のコマンドでビルドとデプロイをします。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn build</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn gh-pages -d dist -b master -m <span class="string">'Update Site'</span></span></span><br></pre></td></tr></table></figure><p>コンソールに<code>Published</code>が表示されたら GitHub Pages の設定で表示されていた URL にアクセスします。(ちょっとタイムラグがあるかもしれません。表示されなかったら少し待って再アクセスしてください。)<br><img src="/articles/assets/lulzneko/develop/nuxtjs/22.png" alt=""></p><p>以上、簡単に GitHub Pages へデプロイでした。<br>毎回コマンドを打つ必要がありますが、GitHub Pages のリポジトリを用意するだけで簡単にホスティングできます。</p><h2 id="CircleCI-と連携した自動デプロイ"><a href="#CircleCI-と連携した自動デプロイ" class="headerlink" title="CircleCI と連携した自動デプロイ"></a>CircleCI と連携した自動デプロイ</h2><p>GitHub Pages へデプロイするのはコマンド１つで簡単ですが、開発中にちょくちょく実行するのは手間です。ソースがプッシュされたら自動でビルドしてデプロイしておいて欲しいです。これは CircleCI と GitHub を連携させることで実現できます。</p><p>ちょっと手間がかかりますが、設定を１回するだけで後はリポジトリにプッシュすると自動的にデプロイしておいてくれるので便利です。なにより「常にアクセス可能なプロトタイプ環境」が実現できるのでありがたいです。</p><h2 id="CircleCI-とは"><a href="#CircleCI-とは" class="headerlink" title="CircleCI とは"></a>CircleCI とは</h2><p><a href="https://circleci.jp/" target="_blank" rel="noopener">CircleCI</a>は Continuous Integration and Delivery と、サイトのタイトルにつけている通り CI(Continuous Integration)/CD(Continuous Delivery) の機能を提供するサービスです。<br>ソースコードの変更を受け、あらかじめ定義されたビルドやテスト、デプロイといったことを自動的に行ってくれます。無料で始められるので、CI/CD の入門や小規模なプロジェクトでも使いやすいですし、大規模なプロジェクトにもしかりと対応してくれます。</p><h3 id="GitHub-リポジトリにデプロイキーを追加"><a href="#GitHub-リポジトリにデプロイキーを追加" class="headerlink" title="GitHub リポジトリにデプロイキーを追加"></a>GitHub リポジトリにデプロイキーを追加</h3><p>GitHub に CircleCI からデプロイできるようにデプロイキーを追加します。<br>まず<code>ssh-keygen</code>で、パスフレーズなしの ECDSA キーペア(<code>~/deploy_key</code>と<code>~/deploy_key.pub</code>)を作ります。<br>※ すべての作業が終わったらローカルのキーペアファイルは削除します</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t ecdsa-sha2-nistp521 -C <span class="string">""</span> -f ~/deploy_key</span></span><br></pre></td></tr></table></figure><p>※ ECDSA が使えない場合は<code>ssh-keygen -t rsa -b 4096 -C "" -f ~/deploy_key</code></p><p>そして<code>~/deploy_key.pub</code>の内容を、GitHub リポジトリの [Settings] - [Deploy keys] に貼り付けます。</p><ul><li>[Title] は、あとでわかるようにします。(今回は CircleCI 用なので<code>CircleCI</code>としました)</li><li>[Key] は、<code>~/deploy_key.pub</code>の内容です。</li><li>[Allow write access]: チェックを付けます。これを忘れると CircleCI からプッシュできません。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/23.png" alt=""></li></ul><p>追加されたキーの<code>Fingerprint</code>をひかえておきます。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/24.png" alt=""></p><h3 id="プロジェクトの-npm-スクリプトを設定"><a href="#プロジェクトの-npm-スクリプトを設定" class="headerlink" title="プロジェクトの npm スクリプトを設定"></a>プロジェクトの npm スクリプトを設定</h3><p>プロジェクト直下<code>/package.json</code>に<code>deploy</code>スクリプトを追加します。<code>generate</code>の行末にカンマを忘れないようにします。(scripts のみ抜粋)<br>これにより先ほどのデプロイコマンドを<code>yarn deploy</code>だけで実行できるようになります。<code>[ci skip]</code>は CircleCI を動作させないためのコミットメッセージになります。<code>master</code>ブランチは GitHub Pages の公開用 HTML なので CI は使わないためです。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: {</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"nuxt"</span>,</span><br><span class="line">  <span class="string">"build"</span>: <span class="string">"nuxt build"</span>,</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"nuxt start"</span>,</span><br><span class="line">  <span class="string">"generate"</span>: <span class="string">"nuxt generate"</span>,</span><br><span class="line">  <span class="string">"deploy"</span>: <span class="string">"gh-pages -d dist -b master -m 'Update Site [ci skip]'"</span></span><br><span class="line">},</span><br></pre></td></tr></table></figure><h3 id="CircleCI-の設定ファイルを作成"><a href="#CircleCI-の設定ファイルを作成" class="headerlink" title="CircleCI の設定ファイルを作成"></a>CircleCI の設定ファイルを作成</h3><p>プロジェクト直下に<code>.circleci</code>ディレクトリ、そのディレクトリに<code>config.yml</code>ファイルを追加します。<br><code>/.circleci/config.yml</code>に以下の部分を環境に合わせて変更したものを書きます。</p><ul><li>58行目 [fingerprints]: 上記 GitHub に追加したデプロイキーの<code>Fingerprint</code></li><li>64行目 [user.name]: GitHub の<code>master</code>ブランチへプッシュするユーザーの名前 (コミットログ用、私は<code>CircleCI</code>を使うことが多いです)</li><li>65行目 [user.email]: GitHub の<code>master</code>ブランチへプッシュするユーザーメールアドレス (コミットログ用、自分または開発チームのメーリングリストなど)</li><li>21行目 [branches: only]: 後述の開発ブランチ名、今回は<code>develop</code>としました<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">2.1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">executors:</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="attr">working_directory:</span> <span class="string">~/workspace</span></span><br><span class="line">    <span class="attr">docker:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">circleci/node:12</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">/usr/share/zoneinfo/Asia/Tokyo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">commands:</span></span><br><span class="line">  <span class="attr">system_info:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">System</span> <span class="string">information</span></span><br><span class="line">          <span class="attr">command:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">echo</span> <span class="string">"Node $(node -v)"</span></span><br><span class="line">            <span class="string">echo</span> <span class="string">"Yarn v$(yarn -v)"</span></span><br><span class="line">  <span class="attr">setup:</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">restore_cache:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Restore</span> <span class="string">Yarn</span> <span class="string">Package</span> <span class="string">Cache</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">yarn-packages-{{</span> <span class="string">checksum</span> <span class="string">"yarn.lock"</span> <span class="string">}}</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Setup</span></span><br><span class="line">          <span class="attr">command:</span> <span class="string">yarn</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">save_cache:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Save</span> <span class="string">Yarn</span> <span class="string">Package</span> <span class="string">Cache</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">yarn-packages-{{</span> <span class="string">checksum</span> <span class="string">"yarn.lock"</span> <span class="string">}}</span></span><br><span class="line">          <span class="attr">paths:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">~/.cache/yarn</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">executor:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">system_info</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">checkout</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">setup</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">          <span class="attr">command:</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">store_artifacts:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">dist</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">persist_to_workspace:</span></span><br><span class="line">          <span class="attr">root:</span> <span class="string">~/workspace</span></span><br><span class="line">          <span class="attr">paths:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">./*</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">executor:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">attach_workspace:</span></span><br><span class="line">          <span class="attr">at:</span> <span class="string">~/workspace</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">add_ssh_keys:</span></span><br><span class="line">          <span class="attr">fingerprints:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">"[GitHub に追加したキーの Fingerprint]"</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">          <span class="attr">command:</span> <span class="string">|</span></span><br><span class="line">            <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">~/.ssh</span></span><br><span class="line">            <span class="string">ssh-keyscan</span> <span class="string">github.com</span> <span class="string">>></span> <span class="string">~/.ssh/known_hosts</span></span><br><span class="line">            <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">"[your name]"</span></span><br><span class="line">            <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">"[email@example.com]"</span></span><br><span class="line">            <span class="string">yarn</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">workflows:</span></span><br><span class="line">  <span class="attr">build-deploy-flow:</span></span><br><span class="line">    <span class="attr">jobs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">build:</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="attr">branches:</span></span><br><span class="line">              <span class="attr">ignore:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">deploy:</span></span><br><span class="line">          <span class="attr">requires:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">build</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="attr">branches:</span></span><br><span class="line">              <span class="attr">only:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">[開発ブランチ名]</span></span><br></pre></td></tr></table></figure></li></ul><p>ちょっと長いですがざっくり以下です。(個々の詳細は、こちら<a href="https://circleci.com/docs/ja/2.0/configuration-reference/#section=configuration" target="_blank" rel="noopener">CircleCI を設定する - CircleCI</a>をご確認ください)</p><ul><li><code>executors</code>で、実行環境を定義しています</li><li><code>commands</code>で、再利用可能な実行ステップ<code>system_info</code>と<code>setup</code>を定義しています</li><li><code>jobs</code>で、ワークフローから実行するジョブ<code>build</code>と<code>deploy</code>を定義しています</li><li><code>workflows</code>で、GitHub のブランチに応じて実行するジョブの定義をしています</li></ul><p><code>[開発ブランチ名]</code>にプッシュすると<code>build</code>ジョブに次いで<code>deploy</code>ジョブが実行されます。<br><code>build</code>ジョブの中心は、<code>yarn install</code>と<code>yarn build</code>の実行です。<br><code>deploy</code>ジョブの中心は、<code>yarn deploy</code>です。</p><h3 id="空ブランチへプッシュ"><a href="#空ブランチへプッシュ" class="headerlink" title="空ブランチへプッシュ"></a>空ブランチへプッシュ</h3><p>プロジェクトのディレクトリで以下のコマンドを実行します。今回は [ブランチ名] を<code>develop</code>としました。ブランチ名は、先に作成した<code>/.circleci/config.yml</code>と合わせる必要があります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout --orphan [ブランチ名]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"initial commit"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push -u origin [ブランチ名]</span></span><br></pre></td></tr></table></figure><p><code>git checkout --orphan</code>は、これまでのブランチとは関係のない空のブランチを作るオプションです。これにより<code>master</code>ブランチとはつながっていない<code>develop</code>の空ブランチが作られます。<br>ここに開発用のソースをコミットして GitHub へプッシュします。<br>GitHub でブランチが追加されていることが確認できます。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/25.png" alt=""></p><p>また [Insights] - [Network] では、<code>master</code>ブランチと途切れて<code>develop</code>ができていることが確認できます。(<code>master</code>ブランチは GitHub Pages 用で基本的にみることがないので [Settings] - [Branches] からデフォルトを<code>develop</code>にしておくと便利です)<br><img src="/articles/assets/lulzneko/develop/nuxtjs/26.png" alt=""></p><h3 id="CircleCI-にプロジェクトを追加"><a href="#CircleCI-にプロジェクトを追加" class="headerlink" title="CircleCI にプロジェクトを追加"></a>CircleCI にプロジェクトを追加</h3><p>CircleCI<a href="https://circleci.com/dashboard" target="_blank" rel="noopener">https://circleci.com/dashboard</a>へ GitHub のアカウントでログインします。<br>左のメニューから [➕ ADD PROJECTS] を選択します。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/27.png" alt=""></p><p>リポジトリが列挙されるので、今回のリポジトリ名の横 [Set Up Project] をクリックします。<br>設定と手順が書かれていますが、設定済みなので [Start building] をクリックします。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/28.png" alt=""></p><p>ワークフロー画面が表示され、しばらく待つとビルド失敗が表示されます。(デプロイキーを CircleCI に登録していないため)<br><img src="/articles/assets/lulzneko/develop/nuxtjs/29.png" alt=""></p><p>ワークフロー画面の左メニュー、プロジェクト名横の [⚙] 歯車アイコンをクリックします。<br>左メニューから [SSH Permissions] を選び、画面右の [Add SSH Key] ボタンをクリックします。<br>SSH Key 追加ダイアログが表示されるので情報を入力し、[Add SSH Key] ボタンをクリックします。</p><ul><li>[Hostname]:<code>github.com</code></li><li>[Private Key]:<code>~/deploy_key</code>ファイルの内容<br><img src="/articles/assets/lulzneko/develop/nuxtjs/30.png" alt=""></li></ul><p>再ビルドするので、先ほどのワークフローのビルド失敗画面から [Rerun] - [Rerun from beginning] をクリックします。<br>(左メニューアイコン２段目の WORKFLOWS です)<br><img src="/articles/assets/lulzneko/develop/nuxtjs/29.png" alt=""></p><p>以上で自動ビルド＆デプロイ、「CI/CD」の完成です！<br><code>develop</code>ブランチへプッシュするたびに CircleCI が自動的にビルドし、GitHub Pages へデプロイしてくれます。</p><h3 id="ローカルのキーペアファイルのクリーンアップ"><a href="#ローカルのキーペアファイルのクリーンアップ" class="headerlink" title="ローカルのキーペアファイルのクリーンアップ"></a>ローカルのキーペアファイルのクリーンアップ</h3><p>ビルドが通り、GitHub Pages でアプリが見れるようになったらローカルのキーペアファイル<code>~/deploy_key</code>と<code>~/deploy_key.pub</code>を削除します。<br>とくに秘密鍵側<code>~/deploy_key</code>は、リポジトリに書き込みができてしまうので注意してください。</p><h2 id="ソースコード"><a href="#ソースコード" class="headerlink" title="ソースコード"></a>ソースコード</h2><p>今回作成した部分までのソースを GitHub へアップしました。<br>(プロジェクトのソース管理の都合上、リポジトリ名<code>samples-pwa-base-app</code>、<code>source</code>ブランチになります。)<br><a href="https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.3" target="_blank" rel="noopener">https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.3</a></p><p>GitHub Pages にホスティングもしています。<br>(公開サイトは１つのため記事公開に合わせて変わり、本記事の内容とは異なります)<br><a href="https://riotz.works/samples-pwa-base-app/">https://riotz.works/samples-pwa-base-app/</a></p><hr><p>Nuxt.js アプリを、GitHub Pages へデプロイできるようになりました。<br>ホスティング先はいろいろ選べますが、小規模で手軽に扱いたい場合は GitHub Pages を使うと簡単です。</p><p>今回 CircleCI 連携をしました。今回のようなサンプルアプリでも CI/CD を使うことで簡単にホスティングできるようになるので便利ですし、本格的に使う場合はテストも CI で実行して早期にビルドエラーやテストの失敗を気づけるようにします。</p><p>私は CircleCI を好んで使っていますが、他にもさまざまなサービスがあるので環境にあったものを使うとよいでしょう。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Nuxt.js%20PWA%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%20GitHub%20Pages%20%E3%81%B8%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Nuxt.js%20PWA%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%20GitHub%20Pages%20%E3%81%B8%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" data-id="ckfm1lws7003k24nx0hs35p0a" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/CircleCI/" rel="tag">CircleCI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/GitHub/" rel="tag">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/PWA/" rel="tag">PWA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" title="Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する" rel="bookmark">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" title="Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る" rel="bookmark">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/15/use-of-vue-components-in-nuxtjs-and-cross-call-with-it/" title="Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする" rel="bookmark">Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/07/20/made-lt-about-Attendance-tec/" title="勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました" rel="bookmark">勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/03/demo-app-implementation-commentary-presented-at-javascript-matsuri/" title="初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説" rel="bookmark">初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説</a></h3></div></li></ul></div></footer></div></article><article id="post-typescripting-base-app-of-nuxtjs-pwa" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" class="article-date"><time datetime="2019-05-09T15:00:00.000Z" itemprop="datePublished">2019-05-10</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></h1></header><div class="article-entry" itemprop="articleBody"><p>Nuxt.js を使うことで簡単に PWA なアプリを作ることができます。そのアプリを作る際に TypeScript を使うとコードの品質を高めることができ、また複数人やチームでの開発生産性を向上させることができます。今回は Nuxt.js で作ったアプリに TypeScript を導入する方法を紹介します。</p><p><img src="/articles/assets/lulzneko/develop/nuxtjs/nuxtjs.png" alt=""></p><p>前回<a href="https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a>で、<a href="https://ja.nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>を使った<a href="https://developer.mozilla.org/ja/docs/Web/Progressive_web_apps" target="_blank" rel="noopener">PWA</a>のベースアプリを作りました。そのまま JavaScript で開発を進めることができますが、TypeScript を導入することで変数や関数に型定義が行えるようになり開発生産性や保守性を向上できます。今回のベースアプリはゼロから作っているので最初から入れてしまうのがよいでしょう。また TypeScript の関連モジュールを導入したとしても、必ずしも TypeScript の利用が必須ではなく、JavaScript で書いていって、TypeScript にできるところから適用していく段階的な利用も可能です。そのような観点からも入れてしまうのがよいでしょう。</p><p><strong>シリーズの記事</strong></p><ul><li><a href="https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></li><li><strong>Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</strong>(本記事)</li></ul><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 12.1.0</li><li>Yarn 1.15.2</li><li>Nuxt.js 2.6.3</li></ul><h2 id="TypeScript-とは"><a href="#TypeScript-とは" class="headerlink" title="TypeScript とは"></a>TypeScript とは</h2><p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a>は JavaScript に型とクラスを導入する AltJS のプログラミング言語で、JavaScript のスーパーセットです。クラスは ES6 で導入されたので TypeScript 固有ではなくなりましたが、やはり「型」の導入が TypeScript のメリットといえるでしょう。</p><p>型の例で、たとえば JavaScript で以下のようなコードがあったとします。<br>単純な足し算を想定したコードですが、型がないので引数に任意の値を投入できます。その結果、戻り値が想定外になることもあります。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =></span> {</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));               <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="string">"2"</span>));             <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, [ <span class="number">2</span> ]));           <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, { <span class="attr">value</span>: <span class="string">"2"</span> }));  <span class="comment">// 1[object Object]</span></span><br></pre></td></tr></table></figure><p>TypeScript では以下のようになります。<br>引数と戻り値に<code>:number</code>で、数値型を明示します。それにより数値でない引数を渡している部分はコンパイルエラーとなり実行コード(JavaScript)が生成できません。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = (a: <span class="built_in">number</span>, b: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =></span> {</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="string">"2"</span>));             <span class="comment">// error TS2345: Argument of type '"2"' is not assignable to parameter of type 'number'.</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, [ <span class="number">2</span> ]));           <span class="comment">// error TS2345: Argument of type 'number[]' is not assignable to parameter of type 'number'.</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, { value: <span class="string">"2"</span> }));  <span class="comment">// error TS2345: Argument of type '{ value: string; }' is not assignable to parameter of type 'number'.</span></span><br></pre></td></tr></table></figure><p>基本的には型定義が入っただけで書いていることに変わりはありません。またコンパイラや Lint の設定で、制約を強くしたり、甘くしたりできます。最初から使う場合はある程度強くできるでしょうし、途中から導入したり慣れていない場合などは徐々に強くしていくこともでき、状況に合わせて使えます。</p><p>このぐらいの関数でしたら型がなくてもとくに問題ないかもしれませんが、もっと大きなものや他の人が書いたコードなどになってくると話が異なります。関数の引数が何を期待しているのか、戻り値は何が返ってくるのか、型情報があるだけでだいぶ変わってきます。</p><p>そんな TypeScript ですが、最近はとくに注目されており Meetup イベントが東西で開催されます！抽選枠で、まだ応募可能です。<br>TypeScript Meetup #1 にエントリーしましたが、案内メールが来て一瞬で定数枠の 60 を超え、本記事執筆時点で 500 人を超えてます。スゴイ勢い！</p><ul><li><a href="https://typescript-jp.connpass.com/event/127747/" target="_blank" rel="noopener">TypeScript Meetup #1 - connpass</a></li><li><a href="https://kansaits.connpass.com/event/130120/" target="_blank" rel="noopener">kansai.ts #1 - connpass</a></li></ul><p>Riotz.works は、TypeScript で開発するチームなのですが、実はずっと Java で開発をしてきたチームでした。あるトラブルがあって TypeScript に舵を切り、以来 TypeScript で開発するチームとなったのですが、その際の発表資料がこちらになります。もしよかったらご参照ください。(いつかの Meetup の機会でお話しできるといいな)</p><div class="slide"><iframe src="https://riotz.works/slides/2017-serverless-conf"></iframe></div><h2 id="Nuxt-js-のプロジェクトに-TypeScript-を導入"><a href="#Nuxt-js-のプロジェクトに-TypeScript-を導入" class="headerlink" title="Nuxt.js のプロジェクトに TypeScript を導入"></a>Nuxt.js のプロジェクトに TypeScript を導入</h2><p>前回作成<a href="">Nuxt.js で PWA(Progressive Web Apps) のベースアプリ</a>に TypeScript を導入します。</p><h3 id="TypeScript-サポートのモジュールを追加"><a href="#TypeScript-サポートのモジュールを追加" class="headerlink" title="TypeScript サポートのモジュールを追加"></a>TypeScript サポートのモジュールを追加</h3><p>まずは TypeScript サポートのモジュールを追加します。プロジェクトのディレクトリで下記コマンドを実行します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add -D @nuxt/typescript ts-node</span></span><br></pre></td></tr></table></figure><p>※ npm の場合、<code>npm i -D @nuxt/typescript ts-node</code></p><h3 id="TypeScript-の設定ファイルを生成"><a href="#TypeScript-の設定ファイルを生成" class="headerlink" title="TypeScript の設定ファイルを生成"></a>TypeScript の設定ファイルを生成</h3><p>TypeScript の設定ファイル<code>tsconfig.json</code>を作成します。<br>※ この<a href="https://github.com/nuxt/nuxt.js/pull/4776" target="_blank" rel="noopener">feat(ts): auto generate tsconfig.json by kevinmarrec · Pull Request #4776 · nuxt/nuxt.js</a>プルリクがリリースされると<code>touch</code>しなくても済みそうですが、2019年5月現在、まだ事前に作成が必要です。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> touch tsconfig.json</span></span><br></pre></td></tr></table></figure><p>Nuxt.js 開発サーバーを起動し、tsconfig.json の定義を生成します。起動情報に<code>TypeScript support is enabled</code>が出ていることがわかります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn dev</span></span><br><span class="line">   ╭──────────────────────────────────────────╮</span><br><span class="line">   │                                          │</span><br><span class="line">   │   Nuxt.js v2.6.3                         │</span><br><span class="line">   │   Running in development mode (spa)      │</span><br><span class="line">   │   TypeScript support is enabled          │</span><br><span class="line">   │                                          │</span><br><span class="line">   │   Listening on: http://localhost:3000/   │</span><br><span class="line">   │                                          │</span><br><span class="line">   ╰──────────────────────────────────────────╯</span><br></pre></td></tr></table></figure><p><code>tsconfig.json</code>の内容が更新されます。JSON ファイルをモジュールとして扱える定義<code>resolveJsonModule</code>を追加します。これは追加したほうが便利なのと、後述の<code>nuxt.config.ts</code>で<code>package.json</code>を扱えるようにするためです。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="string">"compilerOptions"</span>: {</span><br><span class="line">    <span class="comment">// ...(省略)</span></span><br><span class="line">    <span class="string">"resolveJsonModule"</span>: <span class="literal">true</span>,</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>この定義は追加するプルリクと削除するプルリクが流れているようで、日付的には消すほうが最後なので自分で追加が必要そうです。<br>“Remove resolveJsonModule as , after little thoughts, we should not force it to users -<a href="https://github.com/nuxt/nuxt.js/pull/4842" target="_blank" rel="noopener">#4842</a>“ のだそうで、フレームワークのポリシーや考え方ですね。(なぜなのかは知りたかった)</p><ul><li><a href="https://github.com/nuxt/nuxt.js/pull/4776/commits/b0f475b6fca6e31e49a8674811719a44c045387f#diff-86a77182c8558eb2dc1eb2fc2fcef9c6R11" target="_blank" rel="noopener">feat(ts): auto generate tsconfig.json by kevinmarrec · Pull Request #4776 · nuxt/nuxt.js</a></li><li><a href="https://github.com/nuxt/nuxt.js/pull/4842/files#diff-96d6626cb8a1282050f1ed2f1163f3d6L11" target="_blank" rel="noopener">fix(ts): fix default<code>tsconfig.json</code>by kevinmarrec · Pull Request #4842 · nuxt/nuxt.js</a></li></ul><h3 id="Nuxt-js-の設定ファイルを-TypeScript-化"><a href="#Nuxt-js-の設定ファイルを-TypeScript-化" class="headerlink" title="Nuxt.js の設定ファイルを TypeScript 化"></a>Nuxt.js の設定ファイルを TypeScript 化</h3><p>続いて設定を TypeScript で書くため<code>nuxt.config.js</code>ファイルを<code>nuxt.config.ts</code>にリネームします。<br>ファイルの内容、先頭と最後を以下のように変更します。とくに<code>'./package.json'</code>の<code>.json</code>をつけ忘れないように注意します。この<code>package.json</code>を読み込むのに先ほどの<code>resolveJsonModule</code>が必要でした。</p><p><strong>変更前</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkg <span class="keyword">from</span> <span class="string">'./package'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>変更後</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> NuxtConfiguration <span class="keyword">from</span> <span class="string">'@nuxt/config'</span></span><br><span class="line"><span class="keyword">import</span> pkg <span class="keyword">from</span> <span class="string">'./package.json'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config: NuxtConfiguration = {</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config</span><br></pre></td></tr></table></figure><p>これにより設定ファイル内で<code>Ctrl + Space</code>などの入力補完が使えるようになります。</p><h2 id="ページやコンポーネントを-TypeScript-化"><a href="#ページやコンポーネントを-TypeScript-化" class="headerlink" title="ページやコンポーネントを TypeScript 化"></a>ページやコンポーネントを TypeScript 化</h2><p>プロジェクトが TypeScript 対応したので、ページやコンポーネントを TypeScript 化します。</p><p>今回はスクリプトベースで実装します。基本的な構文は下記です。</p><ul><li><code>&lt;script></code>タグに<code>lang="ts"</code>を追加して TypeScript として認識させます</li><li>全体に型定義を効かせるために<code>Vue.extend</code>を追加します</li><li><code>&lt;/script></code>タグ前の括弧閉じに ‘)’ を追加するのを忘れないよう注意します<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span></span><br><span class="line">})</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>></span></span><br></pre></td></tr></table></figure></li></ul><p>ベースアプリの<code>/pages/index.vue</code>は以下のようになります。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Logo <span class="keyword">from</span> <span class="string">'~/components/Logo.vue'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span></span><br><span class="line">  components: {</span><br><span class="line">    Logo</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>></span></span><br></pre></td></tr></table></figure><p>また、Visual Studio Code の Vue 拡張<a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur" target="_blank" rel="noopener">Vetur</a>を使っている場合<code>/components/Logo.vue</code>に以下の空実装コードを追加します。<br>(<code>nuxt</code>コマンドはエラーではないので、Vetur を使わない場合は追加しなくても大丈夫です)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({})</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>></span></span><br></pre></td></tr></table></figure><p><strong>Note</strong><br>公式ドキュメント<a href="https://ja.nuxtjs.org/guide/typescript/#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88" target="_blank" rel="noopener">TypeScript サポート - Nuxt.js</a>では、今回のようなスクリプトベースではなくクラスベースの “<a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="noopener">vue-property-decorator</a>を利用することを強くお薦め -<a href="https://ja.nuxtjs.org/guide/typescript/#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88" target="_blank" rel="noopener">公式サイト</a>“ しています。<br>しかしながらクラス構文にすると、実装方法が Vue.js/Nuxt.js とまったく異なってしまいます。今回は、これまでの実装経験やサイト、書籍を活かすためにスクリプトベースとしました。まったくゼロから勉強するとのことでしたらクラス構文を使うのも手かもしれません。</p><h2 id="カウンターを設置して-TypeScript-の実装を確認"><a href="#カウンターを設置して-TypeScript-の実装を確認" class="headerlink" title="カウンターを設置して TypeScript の実装を確認"></a>カウンターを設置して TypeScript の実装を確認</h2><p>TypeScript を導入したので実装を確認します。<br>トップページにボタンを設置し、クリックした数をカウントする簡単なアクションを追加します。</p><h3 id="絵文字ボタンとカウンターの導入"><a href="#絵文字ボタンとカウンターの導入" class="headerlink" title="絵文字ボタンとカウンターの導入"></a>絵文字ボタンとカウンターの導入</h3><p><strong><code>/pages/index.vue</code></strong>の [Documentation] と [GitHub] の下、<code>&lt;div class="links">&lt;/div></code>ブロックの直後に以下を追加します。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"actions"</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"addTada"</span> <span class="attr">class</span>=<span class="string">"button--action"</span>></span>🎉 {{ tada }}<span class="tag">&lt;/<span class="name">a</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"addSparkles"</span> <span class="attr">class</span>=<span class="string">"button--action"</span>></span>✨ {{ sparkles }}<span class="tag">&lt;/<span class="name">a</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"addThumbsup"</span> <span class="attr">class</span>=<span class="string">"button--action"</span>></span>👍 {{ thumbsup }}<span class="tag">&lt;/<span class="name">a</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"addHeart"</span> <span class="attr">class</span>=<span class="string">"button--action"</span>></span>🧡 {{ heart }}<span class="tag">&lt;/<span class="name">a</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"clear"</span> <span class="attr">class</span>=<span class="string">"button--grey"</span>></span>Clear<span class="tag">&lt;/<span class="name">a</span>></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>></span></span><br></pre></td></tr></table></figure><p>カウンター表示用のデータプロパティを追加します。(<code>data</code>のみ抜粋)</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line">  data() {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      tada: <span class="number">0</span>,</span><br><span class="line">      sparkles: <span class="number">0</span>,</span><br><span class="line">      thumbsup: <span class="number">0</span>,</span><br><span class="line">      heart: <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">})</span><br></pre></td></tr></table></figure><p><code>@click</code>で呼び出されるメソッドを追加します。(<code>methods</code>のみ抜粋)<br>各絵文字ボタンから呼び出されるメソッドは対応する変数をインクリメント、[Clear] は全変数を<code>0</code>に初期化します。各メソッドは TypeScript の型定義を導入し、戻り値<code>:void</code>と明示しています。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line">  methods: {</span><br><span class="line">    addTada: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.tada++</span><br><span class="line">    },</span><br><span class="line">    addSparkles: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.sparkles++</span><br><span class="line">    },</span><br><span class="line">    addThumbsup: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.thumbsup++</span><br><span class="line">    },</span><br><span class="line">    addHeart: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.heart++</span><br><span class="line">    },</span><br><span class="line">    clear: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.tada =  <span class="number">0</span></span><br><span class="line">      <span class="keyword">this</span>.sparkles = <span class="number">0</span></span><br><span class="line">      <span class="keyword">this</span>.thumbsup = <span class="number">0</span></span><br><span class="line">      <span class="keyword">this</span>.heart = <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></table></figure><p>以上で、絵文字ボタンを押すと各ボタン横のカウンターが増える動作となります。<br>カウンターぐらいだと型のメリットが感じられませんが、たとえば<code>clear</code>の初期化で<code>"0"</code>のような文字列を入れるとコンパイルエラーとなります。しっかり TypeScript の型チェックが効いています。</p><h3 id="カウンターのトータル回数、ロゴを回すアニメーションの導入"><a href="#カウンターのトータル回数、ロゴを回すアニメーションの導入" class="headerlink" title="カウンターのトータル回数、ロゴを回すアニメーションの導入"></a>カウンターのトータル回数、ロゴを回すアニメーションの導入</h3><p>カウンターの値を使ったアクションを作りたいので、各カウンターのトータルを計算し、その値の回数ロゴを回してみます。</p><p><strong><code>/pages/index.vue</code></strong>に、すべての絵文字カウンターの総計を持つ算術プロパティを追加します。(<code>computed</code>のみ抜粋)<br><code>counter()</code>メソッドを作り、戻り値は<code>number</code>型、すべての絵文字カウンターの合計です。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span><br><span class="line">  <span class="comment">// ...(省略)</span></span><br><span class="line">  computed: {</span><br><span class="line">    counter(): <span class="built_in">number</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.tada + <span class="keyword">this</span>.sparkles + <span class="keyword">this</span>.thumbsup + <span class="keyword">this</span>.heart</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">})</span><br></pre></td></tr></table></figure><p>ロゴを回転させるために、ロゴのコンポーネントへカウンターの値を渡します。<br>HTML テンプレートの<code>&lt;logo></code>タグに<code>v-bind:counter="counter"</code>属性を追加し<code>counter</code>の値をロゴのコンポーネントで使えるようにします。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logo</span> <span class="attr">v-bind:counter</span>=<span class="string">"counter"</span> /></span></span><br></pre></td></tr></table></figure><p><strong><code>/components/Logo.vue</code></strong>で、カウンターの値を受け取りロゴを回転する CSS を追加します。<br>ロゴ全体を回転させるため、現在の HTML テンプレートの実装部分を<code>&lt;div :style="rotation"></code>でラップします。<br>回転の CSS は<code>style</code>属性直接に、<code>rotation</code>プロパティ経由で設定します。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">"rotation"</span>></span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"VueToNuxtLogo"</span>></span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Triangle Triangle--two"</span> /></span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Triangle Triangle--one"</span> /></span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Triangle Triangle--three"</span> /></span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Triangle Triangle--four"</span> /></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>></span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>></span></span><br></pre></td></tr></table></figure><p>後は<code>counter</code>の値を使って CSS を作るだけですが、CSS アニメーションを再実行できるようにするため、一手間かけています。(スクリプト全文)</p><ul><li>親コンポーネント<code>/pages/index.vue</code>で絵文字ボタンを押されると、<code>props: counter</code>に新しい値がセットされます。それを<code>watch</code>で監視していて、変化があると<code>watch: counter</code>を呼び出します。</li><li><code>watch: counter</code>は、<code>data</code>プロパティにアニメーションの CSS をオブジェクトとして設定します。いったんアニメーション無し<code>{ animation: 'none' }</code>をセットし、10ミリ秒後に<code>{ animation:</code>rotate 1s linear 0s ${ value } forwards<code>}</code>をセットします。(アニメーション再実行のトリック)</li><li>最後に<code>computed: rotation</code>経由で作られた CSS オブジェクトを HTML テンプレートへ渡します。<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend({</span><br><span class="line">  props: {</span><br><span class="line">    counter: <span class="built_in">Number</span></span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      animation: {}</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    rotation: <span class="function"><span class="keyword">function</span>(<span class="params"></span>): <span class="title">object</span> </span>{</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.animation</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    counter: <span class="function"><span class="keyword">function</span>(<span class="params">value: <span class="built_in">number</span></span>): <span class="title">void</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.animation = { animation: <span class="string">'none'</span> }</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =></span> {</span><br><span class="line">        <span class="keyword">this</span>.animation = { animation: <span class="string">`rotate 1s linear 0s <span class="subst">${ value }</span> forwards`</span> }</span><br><span class="line">      }, <span class="number">10</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></table></figure></li></ul><p>だいぶ TypeScript の型が登場しました。<br><code>computed: rotation</code>では、戻り値が<code>object</code>で CSS の文字列ではないことがわかります。<br><code>watch: counter</code>では、引数が<code>number</code>型です。(フレームワークからの呼出し＆テンプレートリテラルなので型明示のメリットはあまりないですが)</p><p>なお、CSS のアニメーション定義は下記です。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> rotate {</span><br><span class="line">  0% {</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  100% {</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">360deg</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>このくらいの規模だと型定義によるメリットはまだまだありませんが、アニメーションのためのトリックとは言え色々と取り回ししているので、他人の書いたこんなコードが急に出てきたと思うと型情報ぐらいあると嬉しいのではないでしょうか。</p><h3 id="動作確認！"><a href="#動作確認！" class="headerlink" title="動作確認！"></a>動作確認！</h3><p><code>yarn dev</code>で開発サーバーを起動し、ブラウザで<code>http://localhost:3000/</code>へアクセスします。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/11.png" alt=""></p><p>※ 開発サーバーは常に立ち上げておいて大丈夫です。実際の開発に当たってはホットリロードを活用し、コードを保存するとブラウザが自動でリロードしてくれます。</p><h2 id="ソースコード"><a href="#ソースコード" class="headerlink" title="ソースコード"></a>ソースコード</h2><p>今回作成した部分までのソースを GitHub へアップしました。<br><a href="https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.2" target="_blank" rel="noopener">https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.2</a></p><p>GitHub Pages にホスティングもしました。<br>(公開サイトは１つのため記事公開に合わせて変わり、本記事の内容とは異なります)<br><a href="https://riotz.works/samples-pwa-base-app/">https://riotz.works/samples-pwa-base-app/</a></p><hr><p>ベースアプリを TypeScript 化できました。<br>今回のカウンターボタンぐらいだとコーディング量が増えるだけでメリットが感じられませんが、他の人が書いた共通ライブラリを使うときなどに型があることで助かることが増えてきます。</p><p>型を導入できたところで Lint も入れたいところですが、こちらの話はまた重いので別途書きます。<br>もし使たい場合は、公式ドキュメント<a href="https://ja.nuxtjs.org/guide/typescript/#eslint-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F-linting" target="_blank" rel="noopener">ESLint を使った Linting - TypeScript サポート - Nuxt.js</a>をご参照ください。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Nuxt.js%20PWA(Progressive%20Web%20Apps)%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92TypeScript%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Nuxt.js%20PWA(Progressive%20Web%20Apps)%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92TypeScript%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" data-id="ckfm1lwrz003h24nxasu28ikt" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/PWA/" rel="tag">PWA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" title="Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする" rel="bookmark">Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/15/use-of-vue-components-in-nuxtjs-and-cross-call-with-it/" title="Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする" rel="bookmark">Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" title="Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る" rel="bookmark">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/07/20/made-lt-about-Attendance-tec/" title="勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました" rel="bookmark">勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/03/demo-app-implementation-commentary-presented-at-javascript-matsuri/" title="初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説" rel="bookmark">初夏のJavaScript祭にて発表した Gridsome のサンプルアプリ実装解説</a></h3></div></li></ul></div></footer></div></article><article id="post-develop-base-app-for-pwa-with-nuxtjs" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" class="article-date"><time datetime="2019-05-08T15:00:00.000Z" itemprop="datePublished">2019-05-09</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/">Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</a></h1></header><div class="article-entry" itemprop="articleBody"><p>ウェブの技術を使い、またウェブサイトとしてホスティングしながらも、モバイルやデスクトップのアプリとして振る舞うことができる PWA。最近では Google Play Store でも配信できるようになったり、iOS での対応強化など話題に事欠きません。<br>そんな PWA を簡単に高速に開発することができる Nuxt.js を紹介するとともに、今後さまざまな機能を試すためのベースアプリを作ります。</p><p><img src="/articles/assets/lulzneko/develop/nuxtjs/nuxtjs.png" alt=""></p><p><strong>シリーズの記事</strong></p><ul><li><strong>Nuxt.js で PWA(Progressive Web Apps) のベースアプリを作る</strong>(本記事)</li><li><a href="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></li></ul><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit + WSL Ubuntu 18.04.1 LTS</li><li>Visual Studio Code</li><li>Node.js 12.2.0</li><li>Yarn 1.15.2</li><li>Nuxt.js 2.6.3</li></ul><h2 id="PWA-とは"><a href="#PWA-とは" class="headerlink" title="PWA とは"></a>PWA とは</h2><p><a href="https://developer.mozilla.org/ja/docs/Web/Progressive_web_apps" target="_blank" rel="noopener">PWA</a>は Progressive Web Apps の略称で、ウェブサイトをモバイルアプリとして使えるようにする仕組みです。さらに Google Chrome 67 からデスクトップアプリとしても動作させることができるようになりました。</p><p>アプリを PWA とすることで、以下のような機能が提供できます。</p><ul><li>端末にインストールしホームやデスクトップにアイコンを追加できる</li><li>ブラウザとは異なるネイティブアプリのような操作感</li><li>オフラインでも使えるように作ることができる</li><li>プッシュ通知を受け取ることができる</li><li>リンクやサイトへの埋め込みができる</li><li>自身の運営サイト、および Google Play Store から配信できる</li></ul><p>一方でデメリットもあります。</p><ul><li>OS(ブラウザ) により使える機能のサポートレベルが異なる</li><li>ネイティブ実装に対してブラウザでサポートしている機能が足りない (e.g. NFC, 2019年5月現在)</li></ul><p>主な PWA (アプリがない状態でブラウザを使いアクセスすると [ホームに追加] が表示される)</p><ul><li>Twitter -<a href="https://mobile.twitter.com/" target="_blank" rel="noopener">https://mobile.twitter.com/</a></li><li>日本経済新聞 -<a href="https://r.nikkei.com/" target="_blank" rel="noopener">https://r.nikkei.com/</a></li><li>こえのブログ -<a href="https://voice.ameba.jp/" target="_blank" rel="noopener">https://voice.ameba.jp/</a></li></ul><p>また私たち Riotz.works は、モバイルアプリのハッカソン<a href="https://spajam.jp/" target="_blank" rel="noopener">SPAJAM</a>2018(東京D予選) にて Nuxt.js<br>で PWA を作り優秀賞を獲得しました。「モバイルアプリ」の大会なので当然ですがネイティブアプリ開発のチームに対して、「唯一の PWA」として健闘し受賞に至りました。PWA スゴイ！</p><p>発表資料:<a href="https://riotz.works/slides/2018-spajam-qualification">リアルタイムの競演と参加型観戦で音楽を最高に楽しむ「ラップ､タップ､アップ🎶」</a></p><div class="slide"><iframe src="https://riotz.works/slides/2018-spajam-qualification"></iframe></div><p>作品:<a href="https://riotz.works/rap-tap-app/">ラップ、タップ、アップ 🎶</a><br>[バトルを募集する] ボタンから [対戦者] の [QRコード] または [URL] をスマホに渡しエントリー ＆ カメラ付き PC は [対戦者] ラベル右の [入場] アイコンからエントリーで、ラップバトルの中継が行えます。PWA のため<code>&lt;iframe></code>で埋め込みもでき実際に動作させられます。スマホアプリなのにこういったことができるのも PWA のメリットになります。</p><iframe src="https://riotz.works/rap-tap-app/" width="320" height="480"></iframe><h2 id="Nuxt-js-とは"><a href="#Nuxt-js-とは" class="headerlink" title="Nuxt.js とは"></a>Nuxt.js とは</h2><p><a href="https://ja.nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>は、Vue.js を使ったアプリの開発を支援するフレームワークです。”Vue.js アプリケーションの開発を楽しくするために必要なすべての設定が揃っています -<a href="https://ja.nuxtjs.org/" target="_blank" rel="noopener">Nuxt.js</a>“ と謳う通り Vue.js で開発する際に必要となる、さまざまなライブラリや設定があらかじめ構築済みで、簡単にアプリ開発が始められるフレームワークです。</p><p>開発できるアプリは３パターンあります。</p><ul><li>サーバーレンダリング - Universal SSR(Server Side Rendering)</li><li>シングルページアプリ - SPA(Single Page Applications)</li><li>静的サイト(プレレンダリング)</li></ul><p>SSR と JAMstack の両方を１つのソースから生成できるため、アプリ特性に合わせてモードを切り替えられます。</p><p><a href="https://jp.vuejs.org/" target="_blank" rel="noopener">Vue.js</a>は、ウェブフロントを開発するためのフレームワークです。”The Progressive JavaScript Framework” と題しており、ウェブ UI に対して少しずつ適用でき、コンポーネントへの分離と再利用がしやすくなっています。</p><p>Vue.js は強力なフレームワークですが、あらゆるウェブサイトに対して柔軟に利用できるようコア機能に絞っています。そのため開発を支援するための周辺ライブラリが多数あります。<br>たとえば、ページの<a href="https://jp.vuejs.org/v2/guide/routing.html" target="_blank" rel="noopener">ルーティング(URL のマッピング)</a>はコア機能には含まれていません。独自に実装するか、公式ライブラリの<a href="https://router.vuejs.org/" target="_blank" rel="noopener">Vue Router</a>を別途導入します。</p><p>より踏み込んで高度なことの実装に耐えうる Vue.js ですが、アプリを高速に作り上げるには、ある程度のレールを敷いておいてほしい(たとえば Vue Router は設定済みにしてほしい)、そんなときに Nuxt.js を使うと手軽に開発できます。</p><h2 id="Nuxt-js-で、アプリ開発"><a href="#Nuxt-js-で、アプリ開発" class="headerlink" title="Nuxt.js で、アプリ開発"></a>Nuxt.js で、アプリ開発</h2><p>さっそく Nuxt.js で PWA のベースアプリを作っていきます。<br>今回のアプリはベースなので以下の仕様としました。今後、このアプリをもとにさまざまな機能の検証などをします。</p><ul><li>SPA の JAMstack として作成</li><li>TypeScript 化</li></ul><p>今回は PWA アプリで、SPA の JAMstack で作成します。SSR(Universal) にするとサーバーサイドの処理を同時に実装できるので便利ですが、SEO 重視で CGM(Consumer Generated Media) や変化の激しいコンテンツでもない限り JAMstack にして、フロントとサーバーサイドは分離し Web API 経由でデータアクセスするほうが良いでしょう。<br>詳しくは<a href="https://riotz.works/articles/lulzneko/2019/03/01/made-presentation-about-JAMstack-with-aws-at-jawsdays2019/">JAWS DAYS 2019 で AWS x JAMstack な、サーバーレス Web Front について発表をしました</a>をご参照ください。</p><p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a>は JavaScript に型定義とクラスを導入する AltJS のプログラミング言語(正確にはスーパーセット)です。型定義を導入することで開発効率や不具合回避ができるため注目されており、最近で導入されるケースが多いようです。今回はゼロから作るので導入しておきます。<br>※ Nuxt.js は、バージョン 2.6 からオフィシャルに TypeScript 対応したのですが、2019年5月現在 CLI から簡単に導入できないため詳細は次回の記事で書きます。</p><p>2019年5月10日追記<br>書きました！<br>⇒<a href="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></p><h3 id="プロジェクトの作成"><a href="#プロジェクトの作成" class="headerlink" title="プロジェクトの作成"></a>プロジェクトの作成</h3><p>公式のウィザード CLI (scaffolding tool) があるので、そちらを使います。<br>今回は最後の引数<code>&lt;my-project></code>を<code>pwa-base-app</code>としました。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npx create-nuxt-app &lt;project-name></span></span><br></pre></td></tr></table></figure><p>※ yarn の場合<code>yarn create nuxt-app &lt;my-project></code>がありますがグローバル汚染回避のために<code>npx</code>を使いました</p><p>プロジェクト名と説明を聞かれます。必要に応じて入力します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">? Project name (pwa-base-app)</span><br><span class="line">? Project description (My majestic Nuxt.js project)</span><br></pre></td></tr></table></figure><p>サーバーのフレームワークを聞かれますが JAMstack でいくので<code>none</code>を選択します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">? Use a custom server framework (Use arrow keys)</span><br><span class="line">❯ none</span><br><span class="line">  express</span><br><span class="line">  koa</span><br><span class="line">  adonis</span><br><span class="line">  hapi</span><br><span class="line">  feathers</span><br><span class="line">  micro</span><br><span class="line">(Move up and down to reveal more choices)</span><br></pre></td></tr></table></figure><p>インストールする機能を聞かれます。</p><ul><li><code>PWA Support</code>は、今回の目的なのでチェックします。</li><li><code>Axios</code>は、HTTP Client で Web API などにアクセスするのに使います。使うケースが多いので入れておきます。</li><li><code>Linter / Formatter</code>と<code>Prettier</code>は TypeScript との兼ね合いがあり CLI からは入れません。<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">? Choose features to install (Press &lt;space> to select, &lt;a> to toggle all, &lt;i> to invert selection)</span><br><span class="line"> ◉ Progressive Web App (PWA) Support</span><br><span class="line"> ◯ Linter / Formatter</span><br><span class="line"> ◯ Prettier</span><br><span class="line">❯◉ Axios</span><br></pre></td></tr></table></figure></li></ul><p>UI のフレームワークを選択します。ここはお好みで。<br>今回は<code>none</code>を選択し、本アプリを開発する際に別途導入します。(普段<a href="https://vuetifyjs.com/ja/" target="_blank" rel="noopener">Vuetify</a>を使ってますがウィザードで入れると生成されるプロジェクトのサンプルコードが大きくなりすぎるので自分で入れてるのもあります)</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">? Use a custom UI framework (Use arrow keys)</span><br><span class="line">❯ none</span><br><span class="line">  bootstrap</span><br><span class="line">  vuetify</span><br><span class="line">  bulma</span><br><span class="line">  tailwind</span><br><span class="line">  element-ui</span><br><span class="line">  buefy</span><br></pre></td></tr></table></figure><p>テスティングのフレームワークを選択しまが、TypeScript にするので後から追加します。(このタイミングで追加すると<code>babel-jest</code>になるため)</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Use a custom test framework (Use arrow keys)</span><br><span class="line">❯ none</span><br><span class="line">  jest</span><br><span class="line">  ava</span><br></pre></td></tr></table></figure><p>Nuxt.js のモードを選択します。JAMstack にするので<code>Single Page App</code>を選択します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Choose rendering mode (Use arrow keys)</span><br><span class="line">  Universal</span><br><span class="line">❯ Single Page App</span><br></pre></td></tr></table></figure><p>Author を入力し、パッケージマネージャーを選択します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Author name ()</span><br><span class="line">? Choose a package manager (Use arrow keys)</span><br><span class="line">  npm</span><br><span class="line">❯ yarn</span><br></pre></td></tr></table></figure><p>以上でウィザードが終了し、プロジェクトの生成とパッケージのインストールが行われます。<br>ウィザード終了時の案内に従いプロジェクトのディレクトリへ移動し、開発サーバーを起動します。<br>※ Yarn を選んだ場合に<code>yarn run dev</code>を案内されますが<code>run</code>は省略可能です</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> pwa-base-app</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn dev</span></span><br></pre></td></tr></table></figure><p>ウィザード終了時の案内に出ていた通りブラウザで<code>http://localhost:3000/</code>へアクセスすると、PWA な Nuxt.js アプリが表示されます。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/01.png" alt=""></p><p><strong>Note</strong><br>2019年5月現在、開発サーバーを起動すると<code>ERROR (node:515) DeprecationWarning: Tapable.plugin is deprecated. Use new API on .hooks instead</code>の警告が表示されますが<code>@nuxtjs/pwa</code>のバージョンが古いためです。<code>ERROR</code>と出ていますが問題なく動作します。気になる場合は下記コマンドでモジュールをアップデートします。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn upgrade --latest</span></span><br></pre></td></tr></table></figure><p>※ npm の場合は、<a href="https://github.com/tjunnone/npm-check-updates" target="_blank" rel="noopener">tjunnone/npm-check-updates</a>を使うとよいでしょう</p><h3 id="デプロイ用のビルド"><a href="#デプロイ用のビルド" class="headerlink" title="デプロイ用のビルド"></a>デプロイ用のビルド</h3><p>デプロイ用のビルドを実行すると<code>dist</code>ディレクトリが作られます。<br>この<code>dist</code>ディレクトリの内容物をウェブサーバーに配置するだけでデプロイ完了となります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn build</span></span><br></pre></td></tr></table></figure><p>※ 同じようなコマンドで<code>generate</code>がありますが、こちらは完全に静的化され HTTP Request が使えなくなるので<code>build</code>を使います。各種サンプルなどで<code>generate</code>が出てくる場合は<code>build</code>に読み替えてください。たとえば下記デプロイの FAQ は<code>generate</code>で書かれていますが<code>build</code>を使います。</p><p>デプロイについては環境によって設定などが異なってくるので別途書きます。<br>試してみたい方は、<a href="https://ja.nuxtjs.org/faq/" target="_blank" rel="noopener">公式 FAQ</a>をご参照ください。</p><ul><li><a href="https://ja.nuxtjs.org/faq/deployment-aws-s3-cloudfront/" target="_blank" rel="noopener">AWS S3 と CloudFront によるデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/dokku-deployment/" target="_blank" rel="noopener">Dokku へデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/github-pages/" target="_blank" rel="noopener">GitHub Pages へデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/appengine-deployment/" target="_blank" rel="noopener">Google App Engine へのデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/heroku-deployment/" target="_blank" rel="noopener">Heroku へデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/netlify-deployment/" target="_blank" rel="noopener">Netlify を使ったデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/now-deployment/" target="_blank" rel="noopener">Now を使ったデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/surge-deployment/" target="_blank" rel="noopener">Surge へデプロイ</a></li><li><a href="https://ja.nuxtjs.org/faq/nginx-proxy/" target="_blank" rel="noopener">nginx proxy</a></li></ul><p>また、現時点でデプロイしても PWA として機能します。<br><img src="/articles/assets/lulzneko/develop/nuxtjs/02.png" alt=""></p><p>キャプチャ左側がスマートフォンでブラウザ表示時 [ホームに追加] が案内されます。中央がホームに追加後アプリとして起動した状態です。まだ何もないアプリですがブラウザのアドレスバーが消えてアプリっぽくなっています。アプリ内のボタンを押すとブラウザに戻るのは、アプリのドメイン外へ出たためです。</p><p>キャプチャ右側は Windows PC に、デスクトップ PWA としてインストールして起動したものになります。こちらもアドレスバーがなくアプリのような感じになります。</p><h2 id="ソースコード"><a href="#ソースコード" class="headerlink" title="ソースコード"></a>ソースコード</h2><p>今回作成した部分までのソースを GitHub へアップしました。<br><a href="https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.1" target="_blank" rel="noopener">https://github.com/riotz-works/samples-pwa-base-app/tree/0.0.1</a></p><p>GitHub Pages にホスティングもしました。<br>(公開サイトは１つのため記事公開に合わせて変わり、本記事の内容とは異なります)<br><a href="https://riotz.works/samples-pwa-base-app/">https://riotz.works/samples-pwa-base-app/</a></p><hr><p>Nuxt.js で PWA のベースアプリができました！</p><p>後は<code>pages</code>ディレクトリに表示するページの vue ファイルを追加していくことでアプリが作れますが、その前に TypeScript は入れておいたほうが良く次回の記事で、その辺のところを書きます。<br>TypeScript 対応しても、ページ単位で TypeScript/JavaScript を切り替えられますし、TypeScript の中に JavaScript が書けるので、TypeScript をやったことがなくても導入してしまい少しずつ使うことができます。</p><p>2019年5月10日追記<br>書きました！<br>⇒<a href="https://riotz.works/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></p><p>本文中で紹介しました SPAJAM は「2019 予選」が<strong>募集中</strong>です。本記事で PWA のアプリはできたも同然、ぜひハッカソンで試してみましょう！<br>Riotz.works は「東京A予選」でエントリー中です。チーム名「Riotz.works、進撃のPWA」と、今回こそ PWA で最優秀賞を目指します！！(エントリー結果が出てないので参戦できるかは決まってません)<br><a href="https://spajam.jp/2019/entry/list/" target="_blank" rel="noopener">予選一覧 ｜ SPAJAM2019公式サイト – 温泉でハッカソン</a></p><p><strong>2019年5月13日追記</strong><br><a href="https://spajam.jp/2019/entry/tokyo-a/" target="_blank" rel="noopener">SPAJAM 東京A予選</a>に参戦が決まりました！<br>Gmail の迷惑メールに仕分けされてしまったようで気づいてませんでした😭 最近メール使わないからトラブったら迷惑メールフォルダーの確認を忘れてしまい。。。</p><p>SPAJAM 東京A予選の方、ご一緒いたします。ハッカソンを楽しみましょう！！<br>応募されてない方、まだ募集中です。本戦、箱根で会いましょう！！</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Nuxt.js%20%E3%81%A7%20PWA(Progressive%20Web%20Apps)%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Nuxt.js%20%E3%81%A7%20PWA(Progressive%20Web%20Apps)%20%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/09/develop-base-app-for-pwa-with-nuxtjs/" data-id="ckfm1lwrw003d24nx3dxo9r5y" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/PWA/" rel="tag">PWA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" title="Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する" rel="bookmark">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/13/deploy-nuxtjs-pwa-base-app-to-github-pages/" title="Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする" rel="bookmark">Nuxt.js PWA のベースアプリを GitHub Pages へデプロイする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/06/15/use-of-vue-components-in-nuxtjs-and-cross-call-with-it/" title="Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする" rel="bookmark">Nuxt.js で Vue コンポーネントの利用とコンポーネントの相互呼出しをする</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/07/20/made-lt-about-Attendance-tec/" title="勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました" rel="bookmark">勤怠を自動化する技術 LT Nightで、Web-NFC の PWA について LT しました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/27/made-presentation-about-jamstack-at-serverless-meetup-tokyo-12/" title="Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました" rel="bookmark">Serverless Meetup Tokyo 12 にて「サーバーレスなウェブフロントを実現する JAMstack」について発表をしました</a></h3></div></li></ul></div></footer></div></article><article id="post-make-asana-app-with-nativefier" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" class="article-date"><time datetime="2019-05-02T15:00:00.000Z" itemprop="datePublished">2019-05-03</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/">開発環境</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/">Asana を Nativefier でアプリ化する</a></h1></header><div class="article-entry" itemprop="articleBody"><p>タスク管理の Asana、スマートフォンアプリはあるのですがデスクトップアプリが提供されておらずブラウザで使います。Google Chrome でアプリウィンドウ化ができますが、常駐化をするなどの高度な使い方をしたい場合は Node.js の Nativefier を使ってアプリ化をする方法があります。Node.js の実行環境とコマンドラインでの操作が必要となりますが、手軽にアプリ化ができます。</p><p><img src="/articles/assets/lulzneko/develop/asana/asana.png" alt=""></p><p>前回<a href="https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/">Google Chrome を使って Asana をアプリウィンドウ化</a>をしましたが、ウィンドウを閉じてしまうとウェブアクセスから始まり起動に時間がかかります。常時使うようなサービスなので常駐化し、いつでも使えるようにしたいです。</p><p>公式フォーラムでもデスクトップアプリのニーズは<a href="https://forum.asana.com/t/whats-the-status-of-a-native-asana-mac-app/1581" target="_blank" rel="noopener">What’s the status of a native Asana Mac app? - Product Feedback - Asana Community Forum</a>のように 2017年と古くから上がっているようですが進展はなさそうです。</p><p>今回は、フォーラムでも紹介されている Nativefier を使いアプリ化し常駐、必要な時にすぐに利用できるようにします。</p><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit</li><li>Node.js 12.1.0</li><li>Nativefier 7.6.12</li></ul><h2 id="Nativefier-とは"><a href="#Nativefier-とは" class="headerlink" title="Nativefier とは"></a>Nativefier とは</h2><p><a href="https://github.com/jiahaog/nativefier" target="_blank" rel="noopener">Nativefier</a>は、ウェブページをデスクトップアプリ化する Node.js のツールで、ウェブサイトを Electron でラップした Windows, macOS, Linux 用のアプリを作成します。</p><p><a href="https://electronjs.org/" target="_blank" rel="noopener">Electron</a>は、ウェブの技術である HTML/CSS/JavaScript を使ってクロスプラットフォームのデスクトップアプリを作るツールで Atom や Visual Studio Code などのエディター、Slack や Discord などのチャットクライアント等、さまざまなアプリで使われています。</p><p>ただし Electron アプリはメモリ消費が大きく、１アプリで数百メガ (私の Asana のケースでは 250MB) 使うのでアプリの作りすぎには注意が必要です。</p><p>Nativefier は Node.js 6 以上で動作します。インストールされていない場合は、<a href="https://nodejs.org/ja/" target="_blank" rel="noopener">Node.js 公式サイト</a>にしたがってインストールしてください。今回は Node.js 12.1.0 を使いました。</p><h2 id="Nativefier-で-Asana-をアプリ化"><a href="#Nativefier-で-Asana-をアプリ化" class="headerlink" title="Nativefier で Asana をアプリ化"></a>Nativefier で Asana をアプリ化</h2><p>以下のコマンドで Asana をアプリ化します。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Temp> npx nativefier -n "Asana" --internal-urls "accounts\.google\.com.*" --single-instance --tray "https://app.asana.com"</span><br></pre></td></tr></table></figure><p>指定したオプションは下記となります。</p><ul><li><code>-n</code>は、アプリ名(＝ディレクトリと実行ファイル名)</li><li><code>--internal-urls</code>は、Google 認証をウィンドウ内で行えるようするため</li><li><code>--single-instance</code>は、アプリの起動を１つだけにし、ウィンドウを複数開かないため</li><li><code>--tray</code>は、システムトレイに常駐させます</li></ul><p>Google 認証については、GitHub に Issues が上がっています。いくつかパターンがありますが、今回は一番狭いスコープで設定する<a href="https://github.com/jiahaog/nativefier/issues/282#issuecomment-479677143" target="_blank" rel="noopener">#282 @tianhuil さん</a>のを使わせてもらいました。情報ありがとうございます！</p><ul><li><a href="https://github.com/jiahaog/nativefier/issues/282" target="_blank" rel="noopener">https://github.com/jiahaog/nativefier/issues/282</a></li><li><a href="https://github.com/jiahaog/nativefier/issues/164" target="_blank" rel="noopener">https://github.com/jiahaog/nativefier/issues/164</a></li></ul><p>オプション最後の<code>https://app.asana.com</code>は、アプリ化する URL で、アプリ起動時に表示したい URL たとえば Asana マイタスクなども指定できます。システムトレイに常駐させるならば起動後は最後に見た状態を覚えているのでトップページの URL がよいでしょう。</p><p>また Node.js の npm モジュールのグローバル汚染回避と、使う頻度が少く常に最新版を使いたいため<code>npx</code>で実行しました。<code>npx</code>はローカルに存在しないモジュールを実行する場合はダウンロードして実行し、実行後はダウンロードしたファイルを削除します。そのためグローバルにモジュールを追加するよりもクリーンですが、毎回モジュールをダウンロードすることになるので試行錯誤したりする場合は、グローバルに追加して実行した方が効率的です。<br>グローバルに追加して実行するには下記のコマンドとなります。</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Temp> yarn add --global nativefier</span><br><span class="line">C:\Temp> nativefier -n "Asana" --internal-urls "accounts\.google\.com.*" --single-instance --tray "https://app.asana.com"</span><br></pre></td></tr></table></figure><p>※ npm を使う場合は<code>npm -g nativefier</code></p><h2 id="Asana-アプリ"><a href="#Asana-アプリ" class="headerlink" title="Asana アプリ"></a>Asana アプリ</h2><p>Nativefier を実行すると、実行したディレクトリにアプリが作られます。<br>ディレクトリ名が<code>Asana-win32-x64</code>になっていますが変更したり、別の場所に移動しても大丈夫です。<br><img src="/articles/assets/lulzneko/develop/asana/21.png" alt=""></p><p>ディレクトリ内の<code>Asana.exe</code>をダブルクリックするとアプリが起動します。<br>ログイン画面から始まるので、使っているアカウントでログインします。<br><img src="/articles/assets/lulzneko/develop/asana/22.png" alt=""></p><p>システムトレイにアイコンが配置され常駐していることがわかります。ウィンドウを閉じても常駐されているので、システムトレイのアイコンから最後の状態で表示されます。<br>今回はシングルインスタンスにしているので<code>Asana.exe</code>を繰り返しダブルクリックしたり、ショートカットから起動させてもウィンドウは１つで、最初に起動したウィンドウが手前に表示されます。</p><p>終了するにはシステムトレイのアイコンを右クリックして [Quit] を選びます。<br>常駐型のアプリと同じように扱うことができます。</p><h2 id="Nativefier-の、その他のオプション"><a href="#Nativefier-の、その他のオプション" class="headerlink" title="Nativefier の、その他のオプション"></a>Nativefier の、その他のオプション</h2><p>Nativefier には、たくさんのオプションがあり柔軟に設定を行うことができます。<br>主なオプションを紹介します。(詳しくは<code>--help</code>を参照ください)</p><p>プラットフォームを指定してクロスビルドできます。</p><ul><li><code>-p, --platform &lt;value></code>は、プラットフォームで ‘osx’, ‘mas’, ‘linux’, ‘windows’ から指定できます</li><li><code>-a, --arch &lt;value></code>は、CPU アーキテクチャで ‘ia32’, ‘x64’, ‘armv7l’ から指定できます</li></ul><p>macOS の場合はバッジを付けることができるようです。(macOS がないので試せない ＆ Asana は何がバッジされるんだろう🤔)</p><ul><li><code>--counter</code>は、ドックでカウンターのバッジを付けます</li><li><code>--bounce</code>は、カウンターが増えた時にバウンドします</li></ul><p>アプリの挙動を柔軟に設定できます。</p><ul><li><code>--tray start-in-tray</code>は、システムトレイ常駐で初回起動時にウィンドウを表示させません</li><li><code>--always-on-top</code>は、ウィンドウを常にトップに表示します</li></ul><hr><p>Nativefier を使うことで簡単にウェブサイトをアプリ化できます。Asana に限らず、よく使うサービスでデスクトップアプリがない場合に Nativefier を使うと手軽にアプリ化できるのでとても便利です。</p><p>一方であくまでもウェブサイトをラップしているだけなので、アプリらしい機能はありません。やはり公式でアプリをリリースされることが望ましです。Asana アプリ、リリースされないかな。。。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Asana%20%E3%82%92%20Nativefier%20%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%8C%96%E3%81%99%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Asana%20%E3%82%92%20Nativefier%20%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E5%8C%96%E3%81%99%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" data-id="ckfm1lwql001v24nx0q9nhua7" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Asana/" rel="tag">Asana</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" title="Asana を Google Chrome でアプリウィンドウ化する" rel="bookmark">Asana を Google Chrome でアプリウィンドウ化する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/27/manage-personal-tasks-with-asana/" title="Asana で個人のタスク管理をする" rel="bookmark">Asana で個人のタスク管理をする</a></h3></div></li></ul></div></footer></div></article><article id="post-make-asana-app-window-with-google-chrome" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><div class="article-author-icon"><img src="/articles/assets/bio/lulzneko/photo.jpg"></div><div class="article-author">lulzneko</div><a href="/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" class="article-date"><time datetime="2019-05-01T15:00:00.000Z" itemprop="datePublished">2019-05-02</time></a><div class="article-category"><a class="article-category-link" href="/articles/categories/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/">開発環境</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/">Asana を Google Chrome でアプリウィンドウ化する</a></h1></header><div class="article-entry" itemprop="articleBody"><p>タスク管理の Asana、スマートフォンアプリはあるのですがデスクトップアプリが提供されておらずブラウザで使います。ブラウザで使っているとタブの中に埋もれてしまい欲しいときにすぐ使えなかったり、ブラウザごとまとめて閉じられてしまうことなどがあります。もっと快適に利用できるよう Google Chrome でアプリのように扱う方法を紹介します。</p><p><img src="/articles/assets/lulzneko/develop/asana/asana.png" alt=""></p><p>今回は Google Chrome の機能を使ってアプリウィンドウ化します。この機能について一時期使えなくなっていたこともあり、環境によってはうまく動作しないかもしれません。今回の動作確認環境は下記となります。(Google Chrome にメニューがなかったりなど今回の方法でできなかったり、Google Chrome を使っていない場合は、次回投稿予定のアプリ化の方法をご検討ください)</p><p><strong>環境</strong><br>本記事の開発環境は以下となります。</p><ul><li>Windows 10 64bit</li><li>Google Chrome 74.0.3729.108</li></ul><h2 id="Google-Chrome-でショートカットの作成"><a href="#Google-Chrome-でショートカットの作成" class="headerlink" title="Google Chrome でショートカットの作成"></a>Google Chrome でショートカットの作成</h2><p>まずは Google Chrome で Asana<a href="https://app.asana.com/" target="_blank" rel="noopener">https://app.asana.com/</a>へログインします。<br>現在ブラウザで表示しているページが、アプリのトップになるので [マイタスク] やプロジェクトなど、最初に出てほしいページを表示しておきます。今回は [マイタスク] としました。<br><img src="/articles/assets/lulzneko/develop/asana/11.png" alt=""></p><p>右上の [メニューアイコン] - [その他のツール] - [ショートカットを作成] を選びます。<br><img src="/articles/assets/lulzneko/develop/asana/12.png" alt=""></p><p>ショートカットの作成ダイアログが表示されます。<br>[ショートカットの名前] を入力し、[ウィンドウとして開く] にチェックを付け [作成] をクリックします。<br><img src="/articles/assets/lulzneko/develop/asana/13.png" alt=""></p><p>ブラウザが終了し、アプリウィンドウとして Asana が表示されます。<br>あとはアプリとして独立したウィンドウのため、ブラウザを閉じても巻き込まれることはありません。<br><img src="/articles/assets/lulzneko/develop/asana/14.png" alt=""></p><h2 id="スタートメニューとタスクバーへの登録"><a href="#スタートメニューとタスクバーへの登録" class="headerlink" title="スタートメニューとタスクバーへの登録"></a>スタートメニューとタスクバーへの登録</h2><p>Google Chrome のアプリとして登録されているので、起動は<code>chrome://apps/</code>またはブックマークバーの [アプリ] からとなります。<br>※ ブックマークバーは [Ctrl + Shift + B] で表示できます<br><img src="/articles/assets/lulzneko/develop/asana/15.png" alt=""></p><p>起動をもう少し簡単にするため、スタートメニューへ登録します。<br>Google Chrome の [アプリ] にあるアイコンを右クリックし [ショートカットを作成] を選びます。<br><img src="/articles/assets/lulzneko/develop/asana/16.png" alt=""></p><p>ショートカット作成のダイアログが表示されるので、必要なショートカットを選び [作成] をクリックします。<br>今回は両方作成しました。<br><img src="/articles/assets/lulzneko/develop/asana/17.png" alt=""></p><p>デスクトップまたはスタートメニューのアイコンの右クリックからタスクバーにも追加できます。<br>これによりタスクバーからもいつでも起動することができるようになります。<br><img src="/articles/assets/lulzneko/develop/asana/18.png" alt=""></p><hr><p>タスク管理の Asana をデスクトップアプリ風にしました。これにより簡単に起動できますし、ブラウザのウィンドウやタブに紛れて探す必要もなくなります。なによりブラウザの閉じるでまとめて消えてしまわないのが助かります。</p><p>この方法は Asana だけではなく、ほとんどのウェブサイトで同様のことができます。よく使うサイトをアプリウィンドウ化することで便利に使うことができるようになります。</p><p>次回は Google Chrome の機能ではなく、アプリ化する方法を紹介します。</p><p class="article-author-footer">Author:<strong>lulzneko</strong><a href="https://github.com/lulzneko" class="article-link-github" target="_blank" title="GitHub @lulzneko"></a><a href="https://twitter.com/lulzneko" class="article-link-twitter" target="_blank" title="Twitter @lulzneko"></a></p></div><footer class="article-footer"><a href="http://b.hatena.ne.jp/entry/https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" class="article-share-hatena" target="_blank" title="このエントリーをはてなブックマークに追加"></a><a href="https://twitter.com/intent/tweet?text=Asana%20%E3%82%92%20Google%20Chrome%20%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E5%8C%96%E3%81%99%E3%82%8B&url=https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" class="article-share-twitter" target="_blank" title="Twitter"></a><a href="https://www.facebook.com/sharer.php?u=https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" class="article-share-facebook" target="_blank" title="Facebook"></a><a href="http://pinterest.com/pin/create/button/?url=https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" class="article-share-pinterest" target="_blank" title="Pinterest"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=Asana%20%E3%82%92%20Google%20Chrome%20%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E5%8C%96%E3%81%99%E3%82%8B" class="article-share-linkedin" target="_blank" title="LinkedIn"></a><span data-url="https://riotz.works/articles/lulzneko/2019/05/02/make-asana-app-window-with-google-chrome/" data-id="ckfm1lwq2001n24nx7ndj376h" class="article-share-link">共有：</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/articles/tags/Asana/" rel="tag">Asana</a></li></ul><div class="related-posts"><h2>関連記事</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/03/make-asana-app-with-nativefier/" title="Asana を Nativefier でアプリ化する" rel="bookmark">Asana を Nativefier でアプリ化する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/04/27/manage-personal-tasks-with-asana/" title="Asana で個人のタスク管理をする" rel="bookmark">Asana で個人のタスク管理をする</a></h3></div></li></ul></div></footer></div></article><nav id="page-nav"><a class="extend prev" rel="prev" href="/articles/page/4/">&amplaquo; 戻る</a><a class="page-number" href="/articles/">1</a><span class="space">…</span><a class="page-number" href="/articles/page/3/">3</a><a class="page-number" href="/articles/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/articles/page/6/">6</a><a class="page-number" href="/articles/page/7/">7</a><span class="space">…</span><a class="page-number" href="/articles/page/9/">9</a><a class="extend next" rel="next" href="/articles/page/6/">次へ &ampraquo;</a></nav></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title category">カテゴリ</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/">お知らせ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A/">ふりかえり</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%82%A2%E3%83%97%E3%83%AA/">アプリ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9/">サーバーレス</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3/">ハッカソン</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89/">フロントエンド</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%97%E3%83%AB%E3%83%AA%E3%82%AF-OSS-Friday/">プルリク / OSS-Friday</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/">プレゼンテーション</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">レポート</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E6%9B%B8%E8%A9%95/">書評</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E9%96%8B%E7%99%BA/">開発</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/articles/categories/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/">開発環境</a><span class="category-list-count">14</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title tag">タグ</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/2018%E5%B9%B4/" rel="tag">2018年</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/AWS-Lambda/" rel="tag">AWS Lambda</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Asana/" rel="tag">Asana</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Auth0/" rel="tag">Auth0</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Blog/" rel="tag">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Bot/" rel="tag">Bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Browser/" rel="tag">Browser</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Chart-js/" rel="tag">Chart.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/CircleCI/" rel="tag">CircleCI</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Cookie/" rel="tag">Cookie</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Developers-Summit/" rel="tag">Developers Summit</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/DynamoDB/" rel="tag">DynamoDB</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Git/" rel="tag">Git</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Gridsome/" rel="tag">Gridsome</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JAMstack/" rel="tag">JAMstack</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JAWS-DAYS/" rel="tag">JAWS DAYS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Lint/" rel="tag">Lint</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Material-Design/" rel="tag">Material Design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Netlify/" rel="tag">Netlify</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Node-js/" rel="tag">Node.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Nuxt-js/" rel="tag">Nuxt.js</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/OpenAPI/" rel="tag">OpenAPI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/PWA/" rel="tag">PWA</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/SPAJAM/" rel="tag">SPAJAM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Serverless-Framework/" rel="tag">Serverless Framework</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Shifter/" rel="tag">Shifter</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Slack/" rel="tag">Slack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Stripe/" rel="tag">Stripe</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Swagger/" rel="tag">Swagger</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Visual-Studio-Code/" rel="tag">Visual Studio Code</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Vue-js/" rel="tag">Vue.js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Vuetify/" rel="tag">Vuetify</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/Web/" rel="tag">Web</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/WebAPI/" rel="tag">WebAPI</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/WordPress/" rel="tag">WordPress</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/draw-io/" rel="tag">draw.io</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%81%8A%E7%B5%B5%E3%81%8B%E3%81%8D%E3%83%84%E3%83%BC%E3%83%AB/" rel="tag">お絵かきツール</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%E5%9B%B3/" rel="tag">システム構成図</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/" rel="tag">セキュリティ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/articles/tags/%E3%83%84%E3%83%BC%E3%83%AB/" rel="tag">ツール</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title tagcloud">タグクラウド</h3><div class="widget tagcloud"><a href="/articles/tags/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/" style="font-size:10px">セキュリティ</a><a href="/articles/tags/WebAPI/" style="font-size:11.82px">WebAPI</a><a href="/articles/tags/HTTP/" style="font-size:10.91px">HTTP</a><a href="/articles/tags/Git/" style="font-size:13.64px">Git</a><a href="/articles/tags/Browser/" style="font-size:12.73px">Browser</a><a href="/articles/tags/Web/" style="font-size:13.64px">Web</a><a href="/articles/tags/Chart-js/" style="font-size:13.64px">Chart.js</a><a href="/articles/tags/TypeScript/" style="font-size:16.36px">TypeScript</a><a href="/articles/tags/Bot/" style="font-size:10px">Bot</a><a href="/articles/tags/JAWS-DAYS/" style="font-size:11.82px">JAWS DAYS</a><a href="/articles/tags/Cookie/" style="font-size:12.73px">Cookie</a><a href="/articles/tags/Vuetify/" style="font-size:11.82px">Vuetify</a><a href="/articles/tags/Visual-Studio-Code/" style="font-size:12.73px">Visual Studio Code</a><a href="/articles/tags/WordPress/" style="font-size:13.64px">WordPress</a><a href="/articles/tags/CSS/" style="font-size:10px">CSS</a><a href="/articles/tags/Swagger/" style="font-size:10.91px">Swagger</a><a href="/articles/tags/Serverless-Framework/" style="font-size:15.45px">Serverless Framework</a><a href="/articles/tags/Stripe/" style="font-size:10px">Stripe</a><a href="/articles/tags/Nuxt-js/" style="font-size:18.18px">Nuxt.js</a><a href="/articles/tags/Netlify/" style="font-size:10.91px">Netlify</a><a href="/articles/tags/Vue-js/" style="font-size:11.82px">Vue.js</a><a href="/articles/tags/Asana/" style="font-size:11.82px">Asana</a><a href="/articles/tags/AWS/" style="font-size:13.64px">AWS</a><a href="/articles/tags/Slack/" style="font-size:10px">Slack</a><a href="/articles/tags/draw-io/" style="font-size:10px">draw.io</a><a href="/articles/tags/Shell/" style="font-size:10px">Shell</a><a href="/articles/tags/CircleCI/" style="font-size:12.73px">CircleCI</a><a href="/articles/tags/Lint/" style="font-size:13.64px">Lint</a><a href="/articles/tags/Blog/" style="font-size:10px">Blog</a><a href="/articles/tags/JAMstack/" style="font-size:20px">JAMstack</a><a href="/articles/tags/JavaScript/" style="font-size:11.82px">JavaScript</a><a href="/articles/tags/Auth0/" style="font-size:10px">Auth0</a><a href="/articles/tags/HTML/" style="font-size:12.73px">HTML</a><a href="/articles/tags/%E3%81%8A%E7%B5%B5%E3%81%8B%E3%81%8D%E3%83%84%E3%83%BC%E3%83%AB/" style="font-size:10px">お絵かきツール</a><a href="/articles/tags/SPAJAM/" style="font-size:10px">SPAJAM</a><a href="/articles/tags/Developers-Summit/" style="font-size:11.82px">Developers Summit</a><a href="/articles/tags/Shifter/" style="font-size:13.64px">Shifter</a><a href="/articles/tags/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%E5%9B%B3/" style="font-size:10px">システム構成図</a><a href="/articles/tags/Node-js/" style="font-size:13.64px">Node.js</a><a href="/articles/tags/DynamoDB/" style="font-size:13.64px">DynamoDB</a><a href="/articles/tags/GitHub/" style="font-size:10.91px">GitHub</a><a href="/articles/tags/Hexo/" style="font-size:19.09px">Hexo</a><a href="/articles/tags/%E3%83%84%E3%83%BC%E3%83%AB/" style="font-size:10px">ツール</a><a href="/articles/tags/Gridsome/" style="font-size:16.36px">Gridsome</a><a href="/articles/tags/2018%E5%B9%B4/" style="font-size:10px">2018年</a><a href="/articles/tags/PWA/" style="font-size:14.55px">PWA</a><a href="/articles/tags/OpenAPI/" style="font-size:10.91px">OpenAPI</a><a href="/articles/tags/Material-Design/" style="font-size:10.91px">Material Design</a><a href="/articles/tags/AWS-Lambda/" style="font-size:17.27px">AWS Lambda</a></div></div><div class="widget-wrap"><h3 class="widget-title popular">よく読まれている投稿</h3><div class="widget"><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lulzneko/2019/05/10/typescripting-base-app-of-nuxtjs-pwa/" title="Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する" rel="bookmark">Nuxt.js PWA(Progressive Web Apps) のベースアプリをTypeScript対応する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2018/12/29/what-we-did-in-2018/" title="2018年の Riotz Works の活動を振り返る" rel="bookmark">2018年の Riotz Works の活動を振り返る</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/07/05/hosting-static-web-page-on-aws-with-s3-and-cloudfront/" title="AWS で静的ウェブサイトをホスティングするための構成（S3 + CloudFront）" rel="bookmark">AWS で静的ウェブサイトをホスティングするための構成（S3 + CloudFront）</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/09/20/introduce-iso-8601-time-interval-spec/" title="ISO 8601 形式で特定の期間を指定する方法" rel="bookmark">ISO 8601 形式で特定の期間を指定する方法</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/articles/lopburny/2019/08/17/describe-bearer-scheme-in-openapi-3/" title="OpenAPI (Swagger) 3.0 で Bearer トークンの使用を定義する" rel="bookmark">OpenAPI (Swagger) 3.0 で Bearer トークンの使用を定義する</a></h3></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title recent">最近の投稿</h3><div class="widget"><ul><li><a href="/articles/lulzneko/2019/12/31/review-of-2019/">2019年の振り返り</a></li><li><a href="/articles/lulzneko/2019/12/24/first-website-with-shifter-webhooks-and-gridsome-on-netlify/">Shifter Webhooks と Gridsome で作る、最初のウェブサイト on Netlify</a></li><li><a href="/articles/lulzneko/2019/10/07/ideal-as-a-mock-server-of-webapi-jsonboxio/">Web API のモックサーバーとしても活躍、jsonbox.io</a></li><li><a href="/articles/lopburny/2019/10/07/review-my-blog-mentoring-experience/">ブログメンタリングを受けて学んだことと振り返り</a></li><li><a href="/articles/lopburny/2019/09/29/book-review-of-developing-secure-web-applications/">Web アプリのセキュリティ基礎知識を学習できる『体系的に学ぶ 安全なWebアプリケーションの作り方』を読んだ</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title archive">アーカイブ</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/12/">2019.12</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/10/">2019.10</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/09/">2019.9</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/08/">2019.8</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/07/">2019.7</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/06/">2019.6</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/05/">2019.5</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/04/">2019.4</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/03/">2019.3</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/02/">2019.2</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2019/01/">2019.1</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2018/12/">2018.12</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2018/02/">2018.2</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/articles/archives/2017/12/">2017.12</a><span class="archive-list-count">2</span></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">© Since 2017<a href="https://riotz.works/">Riotz.works</a><br>投稿や発言は私的なものであり、所属する企業や組織には関係ありません。</div></div></footer></div><nav id="mobile-nav"><a class="mobile-nav-link home" href="/">Home</a><a class="mobile-nav-link slide" href="/slides">Slides</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/articles/fancybox/jquery.fancybox.css"><script src="/articles/fancybox/jquery.fancybox.pack.js"></script><script src="/articles/js/script.js"></script></div><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js?t=1601267971694").then(function(){console.log("ServiceWorker Register Successfully.")}).catch(function(e){console.error(e)})</script></body></html>